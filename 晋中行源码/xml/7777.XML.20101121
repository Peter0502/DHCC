<?xml version="1.0" encoding="GBK" ?>
<TRANSACTION RIGHTS="11111111" TITLE="7777 卡单边撤销交易"
  xmlns="http://www.otd.org/MENU" xmlns:W3CNS="http://www.w3c.org">
<FIRSTWORK>
	"{
			show(#ONE,true);
			show(#TWO,false);
			show(#TRACENO_TRAN,true);
	}"
</FIRSTWORK>
<VARIABLE>
  <ITEM LINE="3"  COL="3" TYPE="%-44s" FUNCTIONS=
    "T(7777                        卡单边撤销交易)"/>
  <ITEM LINE="4"  COL="3"  TYPE="%-74s" FUNCTIONS=
   "T(─────────────────────────────────────)"/>
    <ITEM NAME="#TXNO" TYPE="%-4s" FUNCTIONS="T($TXNO=7777)"/>
  <ITEM NAME="#MSGTYPE" TYPE="%-5s" FUNCTIONS="T($MSGTYPE=03001)"/>
  <!--输入变量-->
  <BLOCK NAME="COMMON" LINE="7" COL="12">
  <ITEM LINE="0" COL="0" TYPE="%-15s" FUNCTIONS="T(卡       号:)"/>
  <ITEM LINE="2" COL="0" TYPE="%-15s" FUNCTIONS="T(交 易 金 额:)"/>
  <ITEM LINE="4" COL="0" TYPE="%-15s" FUNCTIONS="T( 交易发起方:)"/> 
  <ITEM NAME="#TRAN_AC_NO" INPUT="TEXT" LINE="0" COL="14" TYPE="%-19s" FUNCTIONS="V(NB)">
  <ONLOSTFOCUS>
    "{
    	if(substr(#TRAN_AC_NO,0,6)!='621223')
    	{
    	 showmsg('此交易只支持本行银行卡!');
    	 return (false)
     }
     }"
     </ONLOSTFOCUS>
     </ITEM>
  <ITEM NAME="#TXAMT" INPUT="TEXT" LINE="2" COL="14" TYPE="%17.2f" FUNCTIONS="V(NB)"/>
  <ITEM NAME="#ONETWO" INPUT="SELECT" LINE="4" COL="14" TYPE="%-3s" FUNCTIONS="T(001)">
  	<SELECT>
  		<OPTION VALUE="001" TITLE="1.行内柜面"/>
  		<!--OPTION VALUE="002" TITLE="2.西安卡系统"/-->
  	</SELECT>
    <ONLOSTFOCUS>
    "{
    	if(#ONETWO=='001')
    	{
    	 show(#ONE,true);
    	 show(#TWO,false);
    	 show(#TRACENO_TRAN,true);
     }
     if(#ONETWO=='002')
     {
      show(#TWO,true);
      show(#ONE,false);
      show(#TRACENO_TRAN,true);
      }
     }"
     </ONLOSTFOCUS>
     </ITEM>
     <ITEM LINE="6" COL="0" NAME="#ONE" TYPE="%-15s" FUNCTIONS="T(卡系统流水号:)" />
     <ITEM LINE="6" COL="0" NAME="#TWO" TYPE="%-15s"  FUNCTIONS="T(核心流水号:)"/>
     <ITEM NAME="#TRACENO_TRAN" INPUT="TEXT" LINE="6" COL="14" TYPE="%-19s" FUNCTIONS="V(NB)"/>
 </BLOCK>
  <!--输出变量--->
  <!------------一些没有用的变量,只是为了公共脚本执行时不报错------------>
  <ITEM NAME="#PASSWD" TYPE="%-6s" FUNCTIONS="T()"/>
  <ITEM LINE="21" COL="59"  TYPE="%-6s" FUNCTIONS="T(确  定)" INPUT="BUTTON">
	<ONCLICK>"{
		initfd();
		commsend_001();
		$FD16='7777';
		$FD12='9999';
		$FD82=#ONETWO;
		$FD30=#TRAN_AC_NO;
		$FD39=itoa(#TXAMT*100);
		$FD43=#TRACENO_TRAN;
		callagn();
		if($FD12!='0000')
		{
			showmsg('撤销卡系统败:['+geterror()+']');
			return (false);  
		}
		showmsg('撤销成功!!...');
		rerun();
	}"
 	</ONCLICK>
  </ITEM>
</VARIABLE>
<REQUEST>
</REQUEST>
<RESPONSE>
<PACKAGE DEVICE="SCRREN" DESC="按任意键继续">
NOTHING
</PACKAGE>
<PRINT>"{
	print(5,5,'3333333333');
}"
</PRINT>
</RESPONSE>
<OUTPUT>
</OUTPUT>
</TRANSACTION>


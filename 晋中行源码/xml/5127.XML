<?xml version="1.0" encoding="GBK" ?>
<TRANSACTION RIGHTS="11110000" TITLE="5127 银行承兑汇票查复报文录入"
  xmlns="http://www.otd.org/MENU" xmlns:W3CNS="http://www.w3c.org">
 <COMMSEND>
"{
    commsend_001();
    commsend_123();
    commsend_hv();
	$FD72 = #CONTENT_FLAG;
}"
</COMMSEND>

<COMMRECV>
"{
    commrecv_001();
        setitems('#CMTNO#O_CMTNO#PAY_QS_NO#OR_BR_NO#SENDCO#PAY_OPN_BR_NO#PAY_AC_NO#PAY_NAME#PAY_ADDR#CASH_QS_NO#AC_BR_NO#RECECO#CASH_OPN_BR_NO#CASH_AC_NO#CASH_NAME#CASH_ADDR#YW_TYPE#ORDERNO#CONTENT#RATE#RATEDATE#OORDERNO#PROCODE#CR_DATE#CR_BR_NO#CR_TX_NUM#QR_BR_NO#QR_TX_NUM#TX_TYPE#NOTPAY_CONTENT#NOTPAY_ORDERNO#O_NOTPAY_ORDERNO#RESP1#OPERLEVEL#PROC_STS',$FD123);
}"
</COMMRECV>

<VARIABLE>

  <ITEM LINE="3"  COL="3" TYPE="%-52s" FUNCTIONS=
    "T(5127                   银行承兑汇票查复报文录入)"/>
  <ITEM LINE="4"  COL="3"  TYPE="%-74s" FUNCTIONS=
  "T(───────────────────────────────────)"/> 
<ITEM NAME="#TXNO" TYPE="%-4s" FUNCTIONS="T($TXNO=5827)"/>
 <ITEM NAME="#MSGTYPE" TYPE="%-5s" FUNCTIONS="T($MSGTYPE=03001)"/>


<ITEM NAME="#CMTNO"				TYPE="%-3s"		FUNCTIONS="T(302)"/>
<ITEM NAME="#O_CMTNO"			TYPE="%-3s"		FUNCTIONS="T(301)"/>
<ITEM NAME="#PAY_QS_NO"			TYPE="%-12s"	FUNCTIONS=""/>
<ITEM NAME="#OR_BR_NO"			TYPE="%-12s"	FUNCTIONS=""/>
<ITEM NAME="#QR_BR_NO"			TYPE="%-12s"	FUNCTIONS=""/>
<ITEM NAME="#SENDCO"			TYPE="%-4s"		FUNCTIONS=""/>
<ITEM NAME="#PAY_OPN_BR_NO"     TYPE="%-12s"	FUNCTIONS=""/>
<ITEM NAME="#PAY_AC_NO"			TYPE="%-32s"	FUNCTIONS=""/>
<ITEM NAME="#CASH_QS_NO"		TYPE="%-12s"	FUNCTIONS=""/>
<ITEM NAME="#RECECO"			TYPE="%-4s"		FUNCTIONS=""/>
<ITEM NAME="#CASH_OPN_BR_NO"    TYPE="%-12s"	FUNCTIONS=""/>
<ITEM NAME="#CASH_AC_NO"		TYPE="%-32s"	FUNCTIONS=""/>
<ITEM NAME="#CASH_ADDR"			TYPE="%-60s"	FUNCTIONS=""/>
<ITEM NAME="#YW_TYPE"			TYPE="%-2s"		FUNCTIONS=""/>
<ITEM NAME="#ORDERNO"			TYPE="%-8s"		FUNCTIONS=""/>
<ITEM NAME="#QR_TX_NUM"			TYPE="%-8s"		FUNCTIONS=""/>
<ITEM NAME="#CONTENT"			TYPE="%-60s"	FUNCTIONS=""/>
<ITEM NAME="#RATE"				TYPE="%-7s"		FUNCTIONS=""/>
<ITEM NAME="#RATEDATE"			TYPE="%-5s"		FUNCTIONS=""/>
<ITEM NAME="#OORDERNO"          TYPE="%-8s"     FUNCTIONS="T(00000000)"/>
<ITEM NAME="#PROCODE"           TYPE="%-8s"     FUNCTIONS=""/>
<ITEM NAME="#CR_DATE"           TYPE="%-8s"     FUNCTIONS="T($HDATE)"/>
<ITEM NAME="#CR_BR_NO"          TYPE="%-12s"    FUNCTIONS=""/>

<ITEM NAME="#TX_TYPE"           TYPE="%-1s"     FUNCTIONS="T(1)"/>
<ITEM NAME="#NOTPAY_ORDERNO"    TYPE="%-3s"     FUNCTIONS=""/>
<ITEM NAME="#O_NOTPAY_ORDERNO"  TYPE="%-3s"     FUNCTIONS=""/>
<ITEM NAME="#RESP1"             TYPE="%-1s"     FUNCTIONS=""/>
<ITEM NAME="#OPERLEVEL"         TYPE="%-1s"     FUNCTIONS=""/><!--优先级别-->
<ITEM NAME="#PROC_STS"          TYPE="%-1s"     FUNCTIONS=""/><!--处理状态-->
<ITEM NAME="#OPCD"      		TYPE="%-2s" 	FUNCTIONS="T(10)"/>
<ITEM NAME="#NOTE_NO"       	TYPE="%-16s"    FUNCTIONS=""/>
<ITEM NAME="#LW_IND"        	TYPE="%-1s" 	FUNCTIONS="T(1)"/>
<ITEM NAME="#HP_ADD_PWD"    	TYPE="%-1s" 	FUNCTIONS=""/>
<ITEM NAME="#PACKID"        	TYPE="%8d"  	FUNCTIONS=""/>
<ITEM NAME="#O_PACKID"          TYPE="%8d"      FUNCTIONS=""/>
<ITEM NAME="#PACK_DATE"     	TYPE="%8d"  	FUNCTIONS=""/>
<ITEM NAME="#O_PACK_DATE"   	TYPE="%8d"  	FUNCTIONS=""/>
<ITEM NAME="#TXNUM"     		TYPE="%5d"  	FUNCTIONS=""/>
<ITEM NAME="#O_TXNUM"       	TYPE="%5d"  	FUNCTIONS=""/>
<ITEM NAME="#LV_YW_IND"     	TYPE="%12s" 	FUNCTIONS=""/>


<ITEM NAME="#RESP_DATE"     	TYPE="%8d"  	FUNCTIONS=""/>
<ITEM NAME="#RCP_STS"       	TYPE="%2d"  	FUNCTIONS=""/>
<ITEM NAME="#RESP2"             TYPE="%8s"      FUNCTIONS=""/>
<ITEM NAME="#RETCODE"           TYPE="%2d"      FUNCTIONS=""/>
<ITEM NAME="#YW_DTL_ID"         TYPE="%8d"      FUNCTIONS=""/>
<ITEM NAME="#ACC_IND"           TYPE="%1d"      FUNCTIONS=""/>
<ITEM NAME="#REQ_TYPE"          TYPE="%1d"      FUNCTIONS=""/>
<ITEM NAME="#DF_FREEAMT"        TYPE="%16s"     FUNCTIONS=""/>
<ITEM NAME="#PROTNO"            TYPE="%60s"     FUNCTIONS=""/>
<ITEM NAME="#PO_TYPE"           TYPE="%1d"      FUNCTIONS=""/>
<ITEM NAME="#OTYPE"             TYPE="%1d"      FUNCTIONS="T(1)"/><!-- 表示大额
 -->
<ITEM NAME="#WT_DAY"            TYPE="%-8s"     FUNCTIONS="T($HDATE)"/>
<ITEM NAME="#O_WT_DAY"          TYPE="%-8s"     FUNCTIONS="T()"/>
<ITEM NAME="#CUR_NO"            TYPE="%-3s"     FUNCTIONS=""/>
<ITEM NAME="#NOTE_TYPE"         TYPE="%-3s"     FUNCTIONS=""/>
<ITEM NAME="#PO_NO"    			TYPE="%8s"  	FUNCTIONS="V(NB)"/>
<ITEM NAME="#TX_AMT"  			TYPE="%16.2f"  	FUNCTIONS=""/>
<ITEM NAME="#PAY_NAME"  		TYPE="%-60s"  	FUNCTIONS=""/>
<ITEM NAME="#CASH_NAME"  		TYPE="%-60s"  	FUNCTIONS=""/>
<ITEM NAME="#PAY_ADDR" 			TYPE="%-60s"  	FUNCTIONS=""/>
	
  <ITEM LINE="06"  COL="5" TYPE="%-14s" FUNCTIONS="T(查询行号:)"/>
  <ITEM LINE="08"  COL="5" TYPE="%-14s" FUNCTIONS="T(查询日期:)"/>
  <ITEM LINE="10"  COL="5" TYPE="%-14s" FUNCTIONS="T(查询序号)"/>
  <ITEM LINE="12" COL="5" TYPE="%-14s" FUNCTIONS="T(是否相符:)"/>
  <ITEM LINE="14" COL="5" TYPE="%-14s" NAME="#LB0" INPUT="LABEL"   FUNCTIONS="T(查复内容:)"/>
  <ITEM   LINE="06" COL="17"  NAME="#AC_BR_NO"   TYPE="%-12s"  DEVICE="KEYBOARD" FUNCTIONS="V(NB)">
  <ONLOSTFOCUS>
  "{
	initfd();
    $FD32=#AC_BR_NO;
    commsend_001();
    $FD16='9553';
    callserver();
    if($FD12!='0000'){
        showmsg(geterror());
        return(false);
    }
    showhelp(3,70,8,3,'支付系统行名信息',substr($FD96,0,60));
  	}"
  </ONLOSTFOCUS>
  </ITEM>
  <ITEM   LINE="08"  COL="17"  NAME="#NOTPAY_DATE"  TYPE="%8s" DEVICE="KEYBOARD" FUNCTIONS="D()V(NB)"/>
  
  <ITEM LINE="10" COL="17" NAME="#CR_TX_NUM"  TYPE="%8d"  DEVICE="KEYBOARD" FUNCTIONS="V(NB)"/>
  <ITEM LINE="12" COL="17" NAME="#CONTENT_FLAG" TYPE="%-1s" DEVICE="KEYBOARD" FUNCTIONS="T(1)V(NB)">
  <SELECT>
	<OPTION VALUE="0" TITLE="0.信息相符"/>
	<OPTION VALUE="1" TITLE="1.信息不符"/>
  </SELECT>
  <ONLOSTFOCUS>
  "{
	#INFO = '';
	show(#INFO,true);
	if(#CONTENT_FLAG=='0')
		#INFO = '查询汇票与我行承兑汇票记载内容一致：';
	if(#CONTENT_FLAG=='1')
		#INFO = '查询汇票与我行承兑汇票记载内容不符，具体不符事项为：';
   }"
   </ONLOSTFOCUS>
  </ITEM>
  <ITEM LINE="13" COL="17" NAME="#INFO" TYPE="%-53s"  FUNCTIONS=""/>
 <!--
  <ITEM NAME="#ADDINFO" TYPE="%-1s" FUNCTIONS=""/>
  <ONLOSTFOCUS>
  "{
		show(#LB0,false);
		show(#NOTPAY_CONTENT,false);
		if(#CONTENT_FLAG=='1')
		{
			show(#LB0,true);
			show(#NOTPAY_CONTENT,true);
		}
  }"
  </ONLOSTFOCUS>
  </ITEM>
---->
  <ITEM LINE="14" COL="17" NAME="#NOTPAY_CONTENT" LINES="4" COLS="50"  TYPE="%-255s" LINES="4" COLS="50" DEVICE="KEYBOARD" INPUT="TEXT"   FUNCTIONS="">
  <ONLOSTFOCUS>
  "{
		 
		 if (strfldcnt(#NOTPAY_CONTENT,':') != 1 or strfldcnt(#NOTPAY_CONTENT,'{') != 1or strfldcnt(#NOTPAY_CONTENT,'}') != 1)
  		{
   			 showmsg('输入内容中不能含有半角:{}字符,请修改为全角其它字符');
   			 return(false);
 		 }
	
   }"
   </ONLOSTFOCUS>
   </ITEM>

  <ITEM LINE="21"  COL="65"  TYPE="%-6s" FUNCTIONS="T(确  定)" INPUT="SUBMIT" />
	 </VARIABLE>
<REQUEST>
</REQUEST>
<RESPONSE>
  <PACKAGE DEVICE="SCREEN" DESC="大额承兑汇票查复录入">
    NOTHING
  </PACKAGE>
  <PRINT>"{
   print(3,25, '大额承兑汇票查复录入');
   print(6,10, '委托日期:[8]',$HDATE);
   print(7,10, '交易序号:[8]',#ORDERNO);
   print(8,10, '查询行号:[12]',#QR_BR_NO);
   print(10,10, '查询内容:[56]',substr(#NOTPAY_CONTENT,0,56));
   print(11,19,'[58]',substr(#NOTPAY_CONTENT,56,58));
   print(12,19,'[58]',substr(#NOTPAY_CONTENT,114,58));
   print(13,19,'[38]',substr(#NOTPAY_CONTENT,172,38));
   print(14,19,'[45]',substr(#NOTPAY_CONTENT,210,45));
      }"
  </PRINT>
</RESPONSE>
<RESPONSE DEVICE="PRINTER" DESC="任意键继续...">
  <PACKAGE>
    NOTHING
  </PACKAGE>
  <PRINT>"{
   print(3,25, '大额承兑汇票查复录入');
   print(6,10, '委托日期:[8]',$HDATE);
   print(7,10, '交易序号:[8]',#ORDERNO);
   print(8,10, '查询行号:[12]',#QR_BR_NO);
   print(10,10, '查询内容:[56]',substr(#NOTPAY_CONTENT,0,56));
   print(11,19,'[58]',substr(#NOTPAY_CONTENT,56,58));
   print(12,19,'[58]',substr(#NOTPAY_CONTENT,114,58));
   print(13,19,'[38]',substr(#NOTPAY_CONTENT,172,38));
   print(14,19,'[45]',substr(#NOTPAY_CONTENT,210,45));

      }"
  </PRINT>
</RESPONSE>
</TRANSACTION>


<BLOCK  LINE="9" COL="4" NAME="IC_QTKH_INFO" VISABLE="FALSE">
  <ITEM LINE="1" COL="1" TYPE="%-13s"  FUNCTIONS="T(户        名:)" />
  <ITEM LINE="1" COL="15" TYPE="%-20s" NAME="#KH_NAME" INPUT="TEXT" FUNCTIONS=""/>
  <!--ITEM LINE="1" COL="37" TYPE="%-7s" FUNCTIONS="T(客   户   号:)" /> 
  <ITEM NAME="#KH_HM" INPUT="TEXT" LINE="1" COL="45" TYPE="%-12s" FUNCTIONS="T()" />
  <ITEM LINE="2" COL="1" TYPE="%-13s" FUNCTIONS="T(账 户 余 额 :)" /---> 
  <ITEM LINE="2" COL="1" TYPE="%-13s" FUNCTIONS="T(证 件  类 型:)" />
  <ITEM NAME="#TMP" TYPE="%-21s" FUNCTIONS="">
    <ONLOSTFOCUS>
    "{
       dim @tota as string;
       initfd();
       commsend_001();
       $FD16='9799';
       $FD67='1';
       @tota=callserver();
       if($FD12 != '0000')
       {
         showmsg(geterror());
         return(false);
       }
       setsel(#KH_ZJZL,@tota,'o5t20o1v1o2');
     }"
    </ONLOSTFOCUS>
  </ITEM>
  <ITEM LINE="2"  COL="15" TYPE="%-1s" NAME="#KH_ZJZL" FUNCTIONS="V(NB)T(1)" INPUT="SELECT">
    <SELECT>
      <OPTION VALUE="1" TITLE="身份证"/>
    </SELECT>
  </ITEM>
  <ITEM LINE="3" COL="1"  TYPE="%-13s"  FUNCTIONS="T(证 件  号 码:)" />
  <ITEM LINE="3" COL="15" TYPE="%-19s"  NAME="#KH_ZJHM" INPUT="TEXT"  FUNCTIONS="T()" />	
  <!---
  <ITEM NAME="#ACC_BAL" INPUT="TEXT" LINE="2" COL="14" TYPE="%17.2f" FUNCTIONS="T()" />
  --->
  <ITEM LINE="4" COL="1"  TYPE="%-13s"  FUNCTIONS="T(电子现金余额:)"/>
  <ITEM LINE="4" COL="15" TYPE="%17.2f" NAME="#ICLAVBAL" INPUT="TEXT" FUNCTIONS="V(NB)" />	
  <ITEM LINE="6" COL="1"  TYPE="%-16s"  FUNCTIONS="T(【交易信息】)" VISABLE="false" />
  <ITEM LINE="7" COL="1"  TYPE="%-70s"  FUNCTIONS=
   "T(----------------------------------------------------------------------)"/>		
  <ITEM LINE="8" COL="1"  TYPE="%-10s"  FUNCTIONS="T(圈提方式:)" />
  <ITEM LINE="8" COL="11" TYPE="%-1s"   NAME="#QT_TYPE" INPUT="SELECT"  FUNCTIONS="T(0)" >	
    <SELECT>
      <OPTION VALUE="0" TITLE="现金"/>
      <OPTION VALUE="1" TITLE="转账"/>
    </SELECT>
    <ONLOSTFOCUS>
    "{
       show(#L_ZR_NAME,false);
       show(#ZR_NAME,false);
      if (#QT_TYPE == '0')
      {
        show(#L_ZR_NAME,false);
        show(#lCARD_NO_IN,false);
        show(#CARD_NO_IN,false);
        show(#ZR_NAME,false);
        show(#L_AC_BAL,false);
        show(#AC_BAL,false);
        //rtrim(#CARD_NO_IN)=rtrim(#CARD_NO);
      }
      else if (#QT_TYPE == '1')
      {
        show(#lCARD_NO_IN,true);
        show(#CARD_NO_IN,true);
        show(#L_ZR_NAME,true);
        show(#ZR_NAME,true);
        show(#L_AC_BAL,true);
        show(#AC_BAL,true);
        enable(#CARD_NO_IN,true);
      }
    }"
    </ONLOSTFOCUS>
  </ITEM>
  <ITEM NAME="#lCARD_NO_IN" LINE="8" COL="37" TYPE="%-10s" VISABLE="false" FUNCTIONS="T(提入账号:)" />
  <ITEM NAME="#CARD_NO_IN"  LINE="8" COL="47" TYPE="%-19s" VISABLE="false" INPUT="TEXT" FUNCTIONS="V(NB)">
    <ONLOSTFOCUS>
    "{
    
         if(len(rtrim(#CARD_NO_IN))!=19)
         {
           showmsg('卡号长度不正确，请重新输入!');
           return(false);
         }
         if(substr(#CARD_NO_IN,0,6) != #CARDBIN1 and substr(#CARD_NO_IN,0,6) != #CARDBIN2)
         {
           showmsg('卡号的前6位必须为'+#CARDBIN1 +'或'+#CARDBIN2);
           return(false);
         }
      
      initfd();
      commsend_001();
      $FD32=rtrim(#CARD_NO_IN);
      $FD16='9405' ;
      callserver();
      if($FD12!='0000'){
        showmsg(geterror());
        return(false);
      }
      #ZR_NAME = $FD25 ;//户名
      enable(#ZR_NAME,false);
      #AC_BAL = val(delspace($FD39),0.01);//账户余额
      enable(#AC_BAL,false);
    }"
    </ONLOSTFOCUS>
  </ITEM>
  <ITEM NAME="#L_ZR_NAME" LINE="9"  COL="1"  TYPE="%-10s"  VISABLE="false" FUNCTIONS="T(圈存户名:)"  />
  <ITEM NAME="#ZR_NAME"   LINE="9"  COL="11" TYPE="%-20s"  VISABLE="false" INPUT="TEXT" FUNCTIONS="T()"/>
  <ITEM NAME="#L_AC_BAL"  LINE="9"  COL="37" TYPE="%-10s"  VISABLE="false" FUNCTIONS="T(账户余额:)" /> 
  <ITEM NAME="#AC_BAL"    LINE="9"  COL="47" TYPE="%17.2f" VISABLE="false" INPUT="TEXT" FUNCTIONS="V(0000000000000001,9999999999999999)"/>
  <ITEM LINE="10" COL="1" TYPE="%-10s" FUNCTIONS="T(密    码:)" /> 
  <ITEM LINE="10" COL="11" TYPE="%-6s"  NAME="#PASSWORD" INPUT="TEXT"  FUNCTIONS="V(NB)i()">
    <ONLOSTFOCUS>
    "{
      initfd();
      commsend_001();
      $FD16='7007';
      $FD30=#CARD_NO;
      $FD79=#PASSWORD;
      $FD67=#ZJZL;
      $FD62=#KH_ZJHM;
      $FD75=$MSR2; //二磁
      $FD76=$MSR3;
      $FD68='4';
      callagn();
      if($FD12!='0000')
       {
         showmsg(geterror());
         return (false);
       }
      showmsg('密码校验成功！');
      <!--
      initfd();
      commsend_001();
      $FD16='9317';
      $FD30=#CARD_NO;  
      $FD79=getitems('#PASSWORD');
      callserver();
      if($FD12!='0000')
      {
        showmsg(geterror());
        return (false);
       }
       -->
    }"
    </ONLOSTFOCUS>
  </ITEM>
  <ITEM LINE="10" COL="37" TYPE="%-10s" FUNCTIONS="T(圈提金额:)" /> 
  <ITEM NAME="#QT_AMT"    LINE="10" COL="47" TYPE="%17.2f" INPUT="TEXT" FUNCTIONS="V(0000000000000001,9999999999999999)" >
    <ONLOSTFOCUS>
    "{
      if ( (#ICLAVBAL - #QT_AMT) &lt; 0)
      {
        showmsg('圈提金额应小于等于电子现金余额!');
        return(false);
      }
    }"
    </ONLOSTFOCUS>
  </ITEM>
</BLOCK>

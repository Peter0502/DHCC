<TRANSACTION RIGHTS="11110000" TITLE="5115  汇票申请注销"
  xmlns="http://www.otd.org/MENU" xmlns:W3CNS="http://www.w3c.org">
<COMMSEND>
"{
	commsend_001();
	commsend_123();
	commsend_hv();
	$FD88 = #PWD;
}"
</COMMSEND>
<COMMRECV>
"{
	commrecv_001();
	#ORDERNO = $FD28;
	#WT_DAY  = $FD44;
}"
</COMMRECV>
<VARIABLE>

  <ITEM LINE="3"  COL="3" TYPE="%-52s" FUNCTIONS=
    "T(5115                        汇票申请注销)"/>
  <ITEM LINE="4"  COL="3"  TYPE="%-74s" FUNCTIONS=
   "T(─────────────────────────────────────)"/>

  <ITEM NAME="#MSGTYPE"        TYPE="%-5s"   FUNCTIONS="T($MSGTYPE=03001)"/>
  <ITEM NAME="#TXNO"           TYPE="%-4s"   FUNCTIONS="T($TXNO=5815)"/>

<ITEM NAME="#CMTNO"		TYPE="%-3s"	FUNCTIONS="T(303)"/>
<!------因为兑付撤销申请需要发送一个自由格式到汇票中心去---------->
<ITEM NAME="#O_CMTNO"		TYPE="%-3s"	FUNCTIONS=""/>
<ITEM NAME="#PAY_QS_NO"		TYPE="%-12s"	FUNCTIONS=""/>
<ITEM NAME="#OR_BR_NO"		TYPE="%-12s"	FUNCTIONS=""/>
<ITEM NAME="#SENDCO"		TYPE="%-4s"	FUNCTIONS=""/>
<ITEM NAME="#PAY_OPN_BR_NO"     TYPE="%-12s"	FUNCTIONS=""/>
<ITEM NAME="#PAY_AC_NO"		TYPE="%-32s"	FUNCTIONS=""/>
<ITEM NAME="#PAY_NAME"		TYPE="%-60s"	FUNCTIONS=""/>
<ITEM NAME="#PAY_ADDR"		TYPE="%-60s"	FUNCTIONS=""/>
<ITEM NAME="#CASH_QS_NO"	TYPE="%-12s"	FUNCTIONS=""/>
<ITEM NAME="#RECECO"		TYPE="%-4s"		FUNCTIONS=""/>
<ITEM NAME="#CASH_OPN_BR_NO"   	TYPE="%-12s"	FUNCTIONS=""/>
<ITEM NAME="#CASH_AC_NO"	TYPE="%-32s"	FUNCTIONS=""/>
<ITEM NAME="#CASH_NAME"		TYPE="%-60s"	FUNCTIONS=""/>
<ITEM NAME="#CASH_ADDR"		TYPE="%-60s"	FUNCTIONS=""/>
<ITEM NAME="#YW_TYPE"		TYPE="%-2s"		FUNCTIONS=""/>
<ITEM NAME="#ORDERNO"		TYPE="%-8s"		FUNCTIONS=""/>
<ITEM NAME="#CONTENT"		TYPE="%-60s"	FUNCTIONS=""/>
<ITEM NAME="#RATE"		TYPE="%-7s"		FUNCTIONS=""/>
<ITEM NAME="#RATEDATE"		TYPE="%-5s"		FUNCTIONS=""/>
<ITEM NAME="#OORDERNO"		TYPE="%-8s"		FUNCTIONS=""/>
<ITEM NAME="#PROCODE"		TYPE="%-8s"		FUNCTIONS=""/>
<ITEM NAME="#CR_DATE"           TYPE="%-8s"       FUNCTIONS=""/>
<ITEM NAME="#CR_BR_NO"         	TYPE="%-12s"      FUNCTIONS=""/>
<ITEM NAME="#CR_TX_NUM"        	TYPE="%-8s"       FUNCTIONS=""/>
<ITEM NAME="#QR_BR_NO"         	TYPE="%-12s"      FUNCTIONS=""/>
<ITEM NAME="#QR_TX_NUM"        	TYPE="%-8s"       FUNCTIONS=""/>
<ITEM NAME="#TX_TYPE"          	TYPE="%-1s"       FUNCTIONS="T(1)"/>
<ITEM NAME="#NOTPAY_CONTENT"   	TYPE="%-255s"     FUNCTIONS=""/>
<ITEM NAME="#NOTPAY_ORDERNO"   	TYPE="%-3s"       FUNCTIONS=""/>
<ITEM NAME="#O_NOTPAY_ORDERNO" 	TYPE="%-3s"       FUNCTIONS=""/>
<ITEM NAME="#RESP1"            	TYPE="%-1s"       FUNCTIONS=""/>
<ITEM NAME="#OPERLEVEL"        	TYPE="%-1s"       FUNCTIONS=""/><!--优先级别-->
<ITEM NAME="#PROC_STS"         	TYPE="%-1s"       FUNCTIONS=""/><!--处理状态-->

<ITEM NAME="#WT_DAY"           	TYPE="%-8s"       FUNCTIONS="T($HDATE)"/>
<ITEM NAME="#O_WT_DAY"         	TYPE="%-8s"       FUNCTIONS=""/>
<ITEM NAME="#CUR_NO"           	TYPE="%-3s"       FUNCTIONS=""/>
<ITEM NAME="#OPCD"             	TYPE="%-2s"       FUNCTIONS="T(10)"/>
<ITEM NAME="#NOTE_TYPE"        	TYPE="%-3s"       FUNCTIONS=""/>
<ITEM NAME="#NOTE_NO"          	TYPE="%-16s"      FUNCTIONS=""/>
<ITEM NAME="#LW_IND"           	TYPE="%-1s"       FUNCTIONS="T(1)"/>

<ITEM NAME="#HP_ADD_PWD"    	TYPE="%-1s" 		FUNCTIONS=""/>
<ITEM NAME="#PACKID"        	TYPE="%8d"  		FUNCTIONS=""/>
<ITEM NAME="#O_PACKID"         	TYPE="%8d"       	FUNCTIONS=""/>
<ITEM NAME="#PACK_DATE"     	TYPE="%8d"  		FUNCTIONS=""/>
<ITEM NAME="#O_PACK_DATE"   	TYPE="%8d"  		FUNCTIONS=""/>
<ITEM NAME="#TXNUM"     	TYPE="%5d"  		FUNCTIONS=""/>
<ITEM NAME="#O_TXNUM"       	TYPE="%5d"  		FUNCTIONS=""/>
<ITEM NAME="#LV_YW_IND"     	TYPE="%12s" 		FUNCTIONS=""/>
<ITEM NAME="#RESP_DATE"     	TYPE="%8d"  		FUNCTIONS=""/>
<ITEM NAME="#RCP_STS"       	TYPE="%2d"  		FUNCTIONS=""/>
<ITEM NAME="#RESP2"            	TYPE="%8s"       FUNCTIONS=""/>
<ITEM NAME="#RETCODE"          	TYPE="%2d"       FUNCTIONS=""/>
<ITEM NAME="#YW_DTL_ID"        	TYPE="%8d"       FUNCTIONS=""/>
<ITEM NAME="#ACC_IND"          	TYPE="%1d"       FUNCTIONS=""/>
<ITEM NAME="#REQ_TYPE"         	TYPE="%1d"       FUNCTIONS=""/>
<ITEM NAME="#DF_FREEAMT"       	TYPE="%16s"      FUNCTIONS=""/>
<ITEM NAME="#PROTNO"           	TYPE="%60s"      FUNCTIONS=""/>
<ITEM NAME="#PO_TYPE"          	TYPE="%1d"       FUNCTIONS=""/>
<ITEM NAME="#OTYPE"            	TYPE="%1d"       FUNCTIONS="T(1)"/><!-- 表示大额 -->


   

  <ITEM LINE="06"  COL="15"     TYPE="%-9s" FUNCTIONS="T(汇票号码:)"/>
  <ITEM LINE="08"  COL="15"     TYPE="%-9s" FUNCTIONS="T(汇票日期:)"/>
  <ITEM LINE="10"  COL="15"     TYPE="%-9s" FUNCTIONS="T(签发行号:)"/>
  <ITEM LINE="12"  COL="15"     TYPE="%-9s" FUNCTIONS="T(出票金额:)"/>
  <ITEM LINE="14"  COL="15"     TYPE="%-9s" FUNCTIONS="T(汇票密押:)"/>
                              
  <ITEM LINE="6"   COL="24"    TYPE="%8d"    NAME="#PO_NO"        INPUT="TEXT" FUNCTIONS="T()"/>
  <ITEM LINE="08"   COL="24"   TYPE="%08s"   NAME="#NOTPAY_DATE"  INPUT="TEXT" FUNCTIONS="T()"/>
  <ITEM LINE="10"   COL="24"   TYPE="%12s"   NAME="#AC_BR_NO"    INPUT="TEXT" FUNCTIONS="V(NB)T()"/>
  <ITEM LINE="12"  COL="24"    TYPE="%16.2f"  NAME="#TX_AMT"    INPUT="TEXT" FUNCTIONS="V(NB)T()"/>
  <ITEM LINE="14"  COL="24"    TYPE="%-10s"   NAME="#PWD"  INPUT="TEXT" FUNCTIONS="V(NB)T()"/>

  <!------------一些没有用的变量,只是为了公共脚本执行时不报错------------>
  <ITEM NAME="#PASSWD"   TYPE="%-6s" FUNCTIONS="T()"/>

<ITEM LINE="21"  COL="65"  TYPE="%-6s" FUNCTIONS="T(确  定)" INPUT="SUBMIT" />
</VARIABLE>
 <!--发送信息包-->
<REQUEST>
</REQUEST>

<!--接收信息包-->
<RESPONSE>
<PACKAGE DEVICE="SCREEN" DESC="按任意键退出">
NOTHING
</PACKAGE>
    <PRINT>"{
 	    print(3,25,'汇票兑付申请注销');
   		print(5,15,'汇票号码 :[20]',#PO_NO);
        print(6,15,'签发金额 :[20]',ltrim(comma(itoa(#TX_AMT,'%17.2f'),16)));
        print(7,15,'签发行号 :[12]',#AC_BR_NO);
        print(8,15,'付款名称 :[60]',#PAY_NAME);
        print(9,15,'流水号码 :[ 6]',$FD4);
}"
</PRINT>
</RESPONSE>
<RESPONSE>
<PACKAGE DEVICE="PRINTER" LINESPACE="24" DESC="打印业务专用凭证">
NOTHING
</PACKAGE>
    <PRINT>"{
 $KINDNO='00';
 dim @txtime  as string;
@txtime=substr($SYSTIME,0,2)+':'+substr($SYSTIME,2,2)+':'+substr($SYSTIME,4,2);

	print( 5, 20,'机构名称:[30]',$BRNAME);  
	print( 5, 2,'代码:5115');
	print( 5, 13,'交易:汇票兑付申请注销');
	
	print( 7,20,'汇票号码 :[20]',#PO_NO);
	print( 8,20,'签发金额 :[20]',ltrim(comma(itoa(#TX_AMT,'%17.2f'),16)));
	print( 9,20,'签发行号 :[12]',#AC_BR_NO);
	print(10,20,'付款名称 :[60]',#PAY_NAME);

	print( 24,20,'备注:');
	print( 24,27,'交易日期:[8] [8]',$HDATE,@txtime);
	print( 24,5,'柜员:[4]',$FD7);
	print( 24,5,'流水号:[6]',$FD4);
}"
</PRINT>
</RESPONSE>
<OUTPUT>
</OUTPUT>
</TRANSACTION>


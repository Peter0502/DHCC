<?xml version="1.0" encoding="GBK" ?>
<TRANSACTION RIGHTS="11000000" TITLE="4406 贷款还本"
  xmlns="http://www.otd.org/MENU" xmlns:W3CNS="http://www.w3c.org">
  <COMMSEND>"{
	//add by wenghui,begin,20150507,调卡系统的转账转出交易
	if(substr(#ACTNO_2,0,6)=='621223' or substr(#ACTNO_2,0,6)=='621780' )//卡卡转账
	{
		initfd();
		commsend_001();
		$FD16='7006';
		$FD30=#ACTNO_2;    //转出账号
		$FD31=#DKZH;    //转入账号
		$FD21='01';
		$FD79=#DRAW_PWD;
		//showmsg('111111');
		$FD39=itoa(#HBJE*100);
		if((substr(#ACTNO_2,0,6)=='621223') or (substr(#ACTNO_2,0,6)=='621780'))    //卡折标志： 0 折；1 卡
		{
			$FD67='C';
		}
		else
		{
			$FD67='P';
		}
		if(substr(#DKZH,0,6)=='621223' or (substr(#DKZH,0,6)=='621780'))    //卡折标志： 0 折；1 卡
		{
			$FD69='C';
		}
		else
		{
			$FD69='P';
		}
		$FD25=#DKHM;   //转入客户名
		$FD75=$MSR2;
		$FD76=$MSR3;
		$MSR2='';
		$MSR3='';
		callagn();
		if($FD12!='0000')
		{
			showmsg(geterror());
			return(false);
		}
	}
	//add by wenghui,end,20150507,调卡系统的转账转出交易
		initfd();
    	$MSGTYPE='03001';

        dim @baktxno as string;
        @baktxno=$TXNO;
        //$TXNO = '9986';
				//$FD12 = '3201';
				$FD39=space(16);
				//看不出64是什么 $FD64 = 
				//$FD64 = '27';
				$FD65 = '3201';
				$FD66 = #XZBZ;
				$FD81 = getseltitle(#XZBZ,#XZBZ);
				#FD107_10='1';
				$FD107=getitems('#FD107_1#FD107_2#DKHM#FD107_4#FD107_5#FD107_6#FD107_7#FD107_8#FD107_9#FD107_10#HBJE#FD107_12#FD107_13#FD107_14#FD107_15#FD107_16#FD107_17#FD107_18#FD107_19#FD107_20');
				#FD102_34='还本';//摘要 add by ligl 2006-12-19 16:56
				if(#XZBZ=='2')	//转帐
				{
					$FD118=getitems('#BIZHONG_2#FD118_2#FD118_3#FD118_4');
					if(delspace(#FD102_4) == '')
					{
						#FD102_24='1';
						#FD102_34 = getseltitle(#DSCPT,#DSCPT);
						$FD102=getitems('#FD102_1#FD102_2#FD102_3#VOCNUM_2_2#FD102_5#FD102_6#FD102_7#FD102_8#FD102_9#FD102_10#FD102_11#FD102_12#FD102_13#CPDATE#HBJE#FD102_16#FD102_17#FD102_18#FD102_19#FD102_20#DSCPT#FD102_22#FD102_23#FD102_24#FD102_25#FD102_26#FD102_27#FD102_28#FD102_29#FD102_30#FD102_31#FD102_32#FD102_33#FD102_34');
					}
					else
					{
						$FD102=getitems('#FD102_1#FD102_2#FD102_3#FD102_4#FD102_5#FD102_6#FD102_7#FD102_8#FD102_9#FD102_10#FD102_11#FD102_12#FD102_13#FD102_14#HBJE#FD102_16#FD102_17#FD102_18#FD102_19#FD102_20#FD102_21#FD102_22#FD102_23#FD102_24#FD102_25#FD102_26#FD102_27#FD102_28#FD102_29#FD102_30#FD102_31#FD102_32#FD102_33#FD102_34');

					}
					#FD120_5='2';
					$FD120=getitems('#FD120_1#FD120_2#FD120_3#FD120_4#FD120_5#FD120_6#FD120_7#HBJE');
				}
				else if(#XZBZ=='8')
				{
						$FD118=getitems('#BIZHONG_3#FD118_2#FD118_3#FD118_4');
					#FD120_5='2';
					$FD120=getitems('#FD120_1#FD120_2#FD120_3#FD120_4#FD120_5#FD120_6#FD120_7#HBJE#FD120_9#FD120_10#FD120_11');

			#FD102_24='1';
			$FD102=getitems('#FD102_1#FD107_2#FD102_3#FD102_4#FD102_5#FD102_6#FD102_7#FD102_8#FD102_9#FD102_10#FD102_11#FD102_12#FD102_13#FD102_14#FD102_15#HBJE#FD102_17#FD102_18#FD102_19#FD102_20#FD102_21#FD102_22#FD107_2#FD102_24#FD102_25#FD102_26#FD102_27#FD102_28#FD102_29#FD102_30#FD102_31#FD102_32#FD102_33#FD102_34');
		}
		else if(#XZBZ=='1')
		{
//			#FD107_10='1';
//			$FD107=getitems('#FD107_1#FD107_2#DKHM#FD107_4#FD107_5#FD107_6#FD107_7#FD107_8#FD107_9#FD107_10#HBJE#FD107_12#FD107_13#FD107_14#FD107_15#FD107_16#FD107_17#FD107_18#FD107_19#FD107_20');
			setitems('#FD118_1','01');
			$FD118=getitems('#FD118_1#FD118_2#FD118_3#FD118_4');

			#FD120_5='2';
			$FD120=getitems('#FD120_1#FD120_2#FD120_3#FD120_4#FD120_5#FD120_6#FD120_7#HBJE');

			#FD102_24='1';
			$FD102=getitems('#FD102_1#FD107_2#FD102_3#FD102_4#FD102_5#FD102_6#FD102_7#FD102_8#FD102_9#FD102_10#FD102_11#FD102_12#FD102_13#FD102_14#FD102_15#HBJE#FD102_17#FD102_18#FD102_19#FD102_20#FD102_21#FD102_22#FD107_2#FD102_24#FD102_25#FD102_26#FD102_27#FD102_28#FD102_29#FD102_30#FD102_31#FD102_32#FD102_33#FD102_34');
		}
		commsend_001();
        //callserver();
        //$TXNO=@baktxno;
        //if($FD12!='0000'){
         //   showmsg(geterror());
          //  return(false);
        //}

        //$FD16 = '3201';
        //$MSGTYPE='03001';
        //验印 start 20131212 wudawei
      if(#XZBZ =='2')
      {
		      if(substr(#ACTNO_2,0,1)=='5' and  substr(#PRODNAME_2,0,8)!='应解汇款' )
			   	{
//						dim @rs as string;
//						showhelp('系统提示','开始调取验印系统... ');
//						@rs = judgeone(#ACTNO_2,#VOCTYPE_2,#VOCNUM_2,$HDATE,#XHBJE,'1');
//						if(@rs=='1')
//						{
//							showmsg('验印不通过！');
//							return(false);
//						}
//						else if(@rs=='0')
//						{       
//							showmsg('验印通过！');
//							return(true);			
//						}else
//						{       
//							showmsg('验印失败请重新验印！');
//							return(false);		
//						}
					}
			}
			//验印 end 20131212 wudawei

	}"
</COMMSEND>
<COMMRECV>"{
	
}"
</COMMRECV>
<VARIABLE>


  <ITEM LINE="3"  COL="3" TYPE="%-60s" FUNCTIONS=
    "T(4406                         贷款还本  )"/>
  <ITEM LINE="4"  COL="3"  TYPE="%-74s" FUNCTIONS=
   "T(─────────────────────────────────────)"/>
   <PAGE NAME="DEFAULT">

   <ITEM NAME="#TXNO" TYPE="%-4s" FUNCTIONS="T($TXNO=3201)"/>
   <ITEM NAME="#MSGTYPE" TYPE="%-5s" FUNCTIONS="T($MSGTYPE=03001)"/>

   <!--输入变量-->
   <ITEM LINE="6"   COL="5"  TYPE="%-10s" FUNCTIONS="T(贷款账号:)"/>
   <ITEM LINE="8"  COL="5"  TYPE="%-70s" FUNCTIONS="T(------------------------------------------------------------------)"/>

   <ITEM LINE="10"  COL="5"  TYPE="%-10s" FUNCTIONS="T(贷款户名:)"/>
   <ITEM LINE="11"  COL="30" TYPE="%-10s" FUNCTIONS="T(贷款余额:)"/>
   <ITEM LINE="12"  COL="30" TYPE="%-10s" FUNCTIONS="T(表内欠息:)"/>
   <ITEM LINE="13"  COL="30" TYPE="%-10s" FUNCTIONS="T(表外欠息:)"/>
   <ITEM LINE="14"  COL="30" TYPE="%-10s" FUNCTIONS="T(复利欠息:)"/>
   <ITEM LINE="15"  COL="5"  TYPE="%-10s" FUNCTIONS="T(还本金额:)"/>
   <ITEM LINE="16"  COL="5"  TYPE="%-10s" FUNCTIONS="T(现转标志:)"/>
   <ITEM LINE="18"  COL="30"  TYPE="%-14s" FUNCTIONS="T(未结本金利息:)"/>
   <ITEM LINE="19"  COL="30" TYPE="%-14s" FUNCTIONS="T(未结复利利息:)"/>


<!-- 定义callserver返回得变量 -->
  <ITEM NAME="#FD118_1"  TYPE="%-2s"   FUNCTIONS=""/>
  <ITEM NAME="#FD118_2"  TYPE="%-3s"   FUNCTIONS=""/>
  <ITEM NAME="#FD118_3"  TYPE="%-16s"  FUNCTIONS=""/>
  <ITEM NAME="#FD118_4"  TYPE="%-16s"  FUNCTIONS=""/>

  <ITEM NAME="#FD107_1"  TYPE="%-24s"  FUNCTIONS=""/>
  <ITEM NAME="#FD107_2"  TYPE="%-4s"   FUNCTIONS=""/>
  <ITEM NAME="#FD107_4"  TYPE="%-16s"  FUNCTIONS=""/>
  <ITEM NAME="#FD107_5"  TYPE="%-16s"  FUNCTIONS=""/>
  <ITEM NAME="#FD107_6"  TYPE="%-16s"  FUNCTIONS=""/>
  <ITEM NAME="#FD107_7"  TYPE="%-16s"  FUNCTIONS=""/>
  <ITEM NAME="#FD107_8"  TYPE="%-16s"  FUNCTIONS=""/>
  <ITEM NAME="#FD107_9"  TYPE="%-16s"  FUNCTIONS=""/>
  <ITEM NAME="#FD107_10" TYPE="%-1s"   FUNCTIONS=""/>
  <ITEM NAME="#FD107_11" TYPE="%-16s"  FUNCTIONS=""/>
  <ITEM NAME="#FD107_12" TYPE="%-3s"   FUNCTIONS=""/>
  <ITEM NAME="#FD107_13" TYPE="%-16s"  FUNCTIONS=""/>
  <ITEM NAME="#FD107_14" TYPE="%-16s"  FUNCTIONS=""/>
  <ITEM NAME="#FD107_15" TYPE="%-16s"  FUNCTIONS=""/>
  <ITEM NAME="#FD107_16" TYPE="%-1s"   FUNCTIONS=""/>
  <ITEM NAME="#FD107_17" TYPE="%-16s"  FUNCTIONS=""/>
  <ITEM NAME="#FD107_18" TYPE="%-8s"   FUNCTIONS=""/>
  <ITEM NAME="#FD107_19" TYPE="%-1s"   FUNCTIONS=""/>
  <ITEM NAME="#FD107_20" TYPE="%-1s"   FUNCTIONS=""/>


  <ITEM NAME="#FD102_1"   TYPE="%-24s"  FUNCTIONS=""/>
  <ITEM NAME="#FD102_2"   TYPE="%-4s"   FUNCTIONS=""/>
  <ITEM NAME="#FD102_3"   TYPE="%-3s"   FUNCTIONS=""/>
  <ITEM NAME="#FD102_4"   TYPE="%-16s"  FUNCTIONS=""/>
  <ITEM NAME="#FD102_5"   TYPE="%-1s"   FUNCTIONS=""/>
  <ITEM NAME="#FD102_6"   TYPE="%-1s"   FUNCTIONS=""/>
  <ITEM NAME="#FD102_7"   TYPE="%-6s"   FUNCTIONS=""/>
  <ITEM NAME="#FD102_8"   TYPE="%-6s"   FUNCTIONS=""/>
  <ITEM NAME="#FD102_9"   TYPE="%-1s"   FUNCTIONS=""/>
  <ITEM NAME="#FD102_10"  TYPE="%-20s"  FUNCTIONS=""/>
  <ITEM NAME="#FD102_11"  TYPE="%-1s"   FUNCTIONS=""/>
  <ITEM NAME="#FD102_12"  TYPE="%-1s"   FUNCTIONS=""/>
  <ITEM NAME="#FD102_13"  TYPE="%-16s"  FUNCTIONS=""/>
  <ITEM NAME="#FD102_14"  TYPE="%-8s"   FUNCTIONS=""/>
  <ITEM NAME="#FD102_15"  TYPE="%-16s" FUNCTIONS=""/>
  <ITEM NAME="#FD102_16"  TYPE="%-1s"   FUNCTIONS=""/>
  <ITEM NAME="#FD102_17"  TYPE="%-60s"  FUNCTIONS=""/>
  <ITEM NAME="#FD102_18"  TYPE="%-16s" FUNCTIONS=""/>
  <ITEM NAME="#FD102_19"  TYPE="%-2s"   FUNCTIONS=""/>
  <ITEM NAME="#FD102_20"  TYPE="%-1s"   FUNCTIONS=""/>
  <ITEM NAME="#FD102_21"  TYPE="%-3s"   FUNCTIONS=""/>
  <ITEM NAME="#FD102_22"  TYPE="%-1s"   FUNCTIONS=""/>
  <ITEM NAME="#FD102_23"  TYPE="%-4s"   FUNCTIONS=""/>
  <ITEM NAME="#FD102_24"  TYPE="%-1s"   FUNCTIONS=""/>
  <ITEM NAME="#FD102_25"  TYPE="%-16s" FUNCTIONS=""/>
  <ITEM NAME="#FD102_26"  TYPE="%-16s" FUNCTIONS=""/>
  <ITEM NAME="#FD102_27"  TYPE="%-16s" FUNCTIONS=""/>
  <ITEM NAME="#FD102_28"  TYPE="%-16s" FUNCTIONS=""/>
  <ITEM NAME="#FD102_29"  TYPE="%-16s"  FUNCTIONS=""/>
  <ITEM NAME="#FD102_30"  TYPE="%-20s"  FUNCTIONS=""/>
  <ITEM NAME="#FD102_31"  TYPE="%-30s"  FUNCTIONS=""/>
  <ITEM NAME="#FD102_32"  TYPE="%-24s"  FUNCTIONS=""/>
  <ITEM NAME="#FD102_33"  TYPE="%-1s"   FUNCTIONS=""/>
  <ITEM NAME="#FD102_34"  TYPE="%-20s"  FUNCTIONS=""/>


  <ITEM NAME="#FD120_1"   TYPE="%-20s"  FUNCTIONS=""/>
  <ITEM NAME="#FD120_2"   TYPE="%-60s"  FUNCTIONS=""/>
  <ITEM NAME="#FD120_3"   TYPE="%-16s"  FUNCTIONS=""/>
  <ITEM NAME="#FD120_4"   TYPE="%-2s"   FUNCTIONS=""/>
  <ITEM NAME="#FD120_5"   TYPE="%-1s"   FUNCTIONS=""/>
  <ITEM NAME="#FD120_6"   TYPE="%-3s"   FUNCTIONS=""/>
  <ITEM NAME="#FD120_7"   TYPE="%-16s"  FUNCTIONS=""/>
  <ITEM NAME="#FD120_8"   TYPE="%-16s"  FUNCTIONS=""/>
  <ITEM NAME="#FD120_9"   TYPE="%-2s"   FUNCTIONS=""/>
  <ITEM NAME="#FD120_10"  TYPE="%-20s"  FUNCTIONS=""/>
  <ITEM NAME="#FD120_11"  TYPE="%-2s"   FUNCTIONS=""/>
  <ITEM NAME="#DINUM"   TYPE="%19.2f"  	FUNCTIONS=""/>

   <ITEM NAME="#DKZH"  LINE="6" COL="15" TYPE="%-20s" INPUT="TEXT"	FUNCTIONS="T()">
   <ONLOSTFOCUS>
   "{
		initfd();
   	 	dim @baktxno as string;
   	 	dim @tota as string;
	    @baktxno=$TXNO;
		$TXNO='9816';
		$FD65='3201';
		$FD107=#DKZH;
		commsend_001();
		callserver();
		$TXNO=@baktxno;
		if($FD12!='0000'){
			showmsg(geterror());
			return(false);
		}
		#CD66=$FD66;
		#CD81=$FD81;
		setitems('#FD107_1#FD107_2#DKHM#FD107_4#FD107_5#FD107_6#FD107_7#FD107_8#FD107_9#FD107_10#FD107_11#FD107_12#FD107_13#FD107_14#FD107_15#FD107_16#FD107_17#FD107_18#FD107_19#FD107_20',$FD107)
//showmsg('$FD105=['+$FD125+']');
		#INTYP=substr($FD125, 0, 1);
		#DINUM=val(substr($FD125, 1, 19), 0.01);
		#CD107=$FD107;
		#DKYE = val(#FD107_4,0.01);
		#BNQX = itoa(val(#FD107_5,0.01),'%.2f');
		#BWQX = itoa(val(#FD107_6,0.01),'%.2f');
		#FLQX = itoa(val(#FD107_7,0.01),'%.2f');
		#WJBJLX = itoa(val(#FD107_8,0.01),'%.2f');
		#WJFLLX = itoa(val(#FD107_9,0.01),'%.2f');
		#HBJE = val(#FD107_4,0.01);

		show(#DKHM,true);
		show(#DKYE,true);
		show(#BNQX,true);
		show(#BWQX,true);
		show(#FLQX,true);
		show(#WJBJLX,true);
		show(#WJFLLX,true);
		show(#HBJE,true);
		#INTRTMPREGLX=val($FD43,0.01);
  }"
  </ONLOSTFOCUS>
  </ITEM>
	
  <ITEM NAME="#DKHM"    LINE="10"  COL="15"  TYPE="%-60s" INPUT="TEXT"  ENABLE="FALSE" FUNCTIONS=""/>
  <ITEM NAME="#DKYE"    LINE="11"  COL="40"  TYPE="%17.2f" INPUT="TEXT"	ENABLE="FALSE" FUNCTIONS=""/>
  <ITEM NAME="#INTYP"   TYPE="%-1s"	FUNCTIONS=""/>
  <ITEM NAME="#BNQX"    LINE="12"  COL="40"  TYPE="%-16s" INPUT="TEXT"	ENABLE="FALSE" FUNCTIONS=""/>
  <ITEM NAME="#BWQX"    LINE="13"  COL="40"  TYPE="%-16s" INPUT="TEXT"	ENABLE="FALSE" FUNCTIONS=""/>
  <ITEM NAME="#FLQX"    LINE="14"  COL="40"  TYPE="%-16s" INPUT="TEXT"	ENABLE="FALSE" FUNCTIONS=""/>
  <ITEM NAME="#WJBJLX"  LINE="18"  COL="44"  TYPE="%-16s" INPUT="TEXT"	ENABLE="FALSE" FUNCTIONS=""/>
  <ITEM NAME="#WJFLLX"  LINE="19"  COL="44"  TYPE="%-16s" INPUT="TEXT"	ENABLE="FALSE" FUNCTIONS=""/>
   <ITEM NAME="#INTRTMPREGLX" TYPE="%17.2f" FUNCTIONS=""/><!--老系统登记簿里的利息-->

   <ITEM NAME="#HBJE"	 LINE="15" COL="15" TYPE="%17.2f" INPUT="TEXT"	FUNCTIONS="T()V(NB)J(#FD120_8)J(#XHBJE)J(#UHBJE)J(#KHJE)">
   <ONLOSTFOCUS>
   "{
		dim @lx as number;
		if(#HBJE &gt; #DKYE)
		     {
		     	showmsg('E:-- 还款金额大于贷款所欠本金!');
		     	return(false);
		     }
//showmsg('#DINUM='+itoa(#DINUM, '%19.2f')+';INTP=['+#INTYP+']');
		//if((#HBJE == #DKYE) and  (#DINUM &gt; 0.001 and #INTYP != '0'))
		//{
		//	showmsg('E:-- 积数不为零本金不可还完!');
		//	return(false);
	//	}
		@lx = val(#BNQX)+val(#BWQX)+val(#FLQX)+val(#WJBJLX)+val(#WJFLLX);
		//if((#HBJE == #DKYE) and  @lx &gt; 0.001){
		//	showmsg('E:-- 利息不为零本金不可还完!');
		//	return(false);
		//}
		//if((#HBJE == #DKYE) and (#INTRTMPREGLX &gt; 0.001) ){
		//	showmsg('E:-- 老系统登记簿利息未还清本金不可还完!');
		//	return(false);
		//}
   }"
   </ONLOSTFOCUS>
   </ITEM>
     <ITEM NAME="#KHJE" TYPE="%17.2f" FUNCTIONS="T(#HBJE)"/>

   <ITEM NAME="#XHBJE" TYPE="%-16s" FUNCTIONS="X(#HBJE)"/>
   <ITEM NAME="#UHBJE" TYPE="%-30s" FUNCTIONS="U(#HBJE)"/>

   <ITEM NAME="#XZBZ" INPUT="SELECT" LINE="16"  COL="15" TYPE="%-1s" 	FUNCTIONS="T(2)V(NB)J(#XZBZS)">
		<SELECT>
  			<OPTION VALUE="1" TITLE="1现金 "/>
  			<OPTION VALUE="2" TITLE="2转账 "/>
  			<OPTION VALUE="8" TITLE="8扣划 "/>
  		</SELECT>
   <ONLOSTFOCUS>
   "{
		if(#XZBZ== '1')
		{
			goitem(#GOTO);
		}
   }"
   </ONLOSTFOCUS>
   </ITEM>
  <ITEM NAME="#S_XZBZ" TYPE="%-8s" FUNCTIONS="S(#XZBZ,#XZBZ)"/>

  <ITEM LINE="21" COL="49" NAME="#SECONDPAGE" TYPE="%-6s" FUNCTIONS="T(下一页)" INPUT="BUTTON">
    <ONCLICK>"{
		if(#XZBZ== '2')
		{
        	loadpage('PAGE2');
		}
		else if(#XZBZ== '8')
		{
        	loadpage('PAGE3');
		}
    }"
    </ONCLICK>
  </ITEM>
  </PAGE>


  <PAGE NAME="PAGE2">
  <BLOCK NAME="ZZH_PGE2" LINE="6" COL="5" VISABLE="FALSE">
     <IMPORT>44061_2.IMP</IMPORT>
  </BLOCK>

  <ITEM LINE="21" COL="49"  TYPE="%-6s" FUNCTIONS="T(上一页)" INPUT="BUTTON">
    <ONCLICK>"{
        loadpage('DEFAULT');
    }"
    </ONCLICK>
  </ITEM>
  </PAGE>


  <PAGE NAME="PAGE3">
  <BLOCK NAME="KH_PGE3" LINE="6" COL="5" VISABLE="FALSE">
     <IMPORT>44061_3.IMP</IMPORT>
  </BLOCK>

  <ITEM LINE="21" COL="49"  TYPE="%-6s" FUNCTIONS="T(上一页)" INPUT="BUTTON">
    <ONCLICK>"{
        loadpage('DEFAULT');
        }"
    </ONCLICK>
  </ITEM>
  </PAGE>

  <ITEM NAME="#PASSWD" TYPE="%-6s" FUNCTIONS="T()"/>

  <ITEM NAME="#FROMTDATE" TYPE="%-10s" FUNCTIONS="T()"/>
  <ITEM NAME="#FROMTDATES" TYPE="%-10s" FUNCTIONS="T()"/>
  <ITEM NAME="#FROMTDATEE" TYPE="%-10s" FUNCTIONS="T()"/>


  <ITEM NAME="#GOTO" TYPE="%-1s" FUNCTIONS="T()"/>
  <ITEM NAME="#CD66" TYPE="%-1s" FUNCTIONS=""/>
  <ITEM NAME="#CD81" TYPE="%-50s" FUNCTIONS=""/>
  <ITEM NAME="#CD102" TYPE="%-388s" FUNCTIONS=""/>
  <ITEM NAME="#CD107" TYPE="%-279s" FUNCTIONS=""/>
  <ITEM NAME="#CD120" TYPE="%-158s" FUNCTIONS=""/>

  <ITEM NAME="#YEAR"  TYPE="%-4s" FUNCTIONS="T($FD5,1,4)"/>
  <ITEM NAME="#MON"  TYPE="%-2s" FUNCTIONS="T($FD5,5,2)"/>
  <ITEM NAME="#DAY"  TYPE="%-2s" FUNCTIONS="T($FD5,7,2)"/>

  <ITEM NAME="#SUBMIT" LINE="21" COL="59"  TYPE="%-6s" FUNCTIONS="T(确  定)" INPUT="SUBMIT"/>

</VARIABLE>
<REQUEST>
</REQUEST>
<RESPONSE>

<PACKAGE DEVICE="SCREEN" DESC="显示内容">
NOTHING
</PACKAGE>
<PRINT>
"{
    print( 5, 36,'4406贷款还本');
	print( 6, 10,'贷款帐号:[20]',#DKZH);
	print( 7, 10,'贷款户名:[60]',#DKHM);
	print( 8, 10,'归还本金金额 [16 ]', #XHBJE);
	print( 9, 10,'合计金额 [16 ]', #XHBJE);
	print(10, 10,'贷款余额:[17]',ltrim(itoa(#DKYE,'%17.2f')));
	print(11, 10,'还本金额:[17]',ltrim(itoa(#HBJE,'%17.2f')));
	print(12, 10,'流 水 号:[6]',$FD4);
}"
</PRINT>
</RESPONSE>

<!--先不打印
<RESPONSE>

<PACKAGE DEVICE="PRINTER" DESC="【 请插入对公取款凭条...】 ">
QKPT|@zh|@hm|@fse|@lx|@rq|@fd2|@zh1|@a1|@a2|||@ye||||||@zzlx||@a3|@zzlx2|@a4|@a5|@a6|@pzlx|@a7|@ms||||@zj|@zjh|@zh|@a8|||@km|
</PACKAGE>

<PRINT>
"{
	print(5, 3, '    账号:  [19                 ]      户    名: [30                            ]', @zh, @hm);
	print(6, 3, '【 转取 】[16                ]               [10         ]           [8       ]', @fse, #FROMTDATE, $FD4);
	print(7, 3, '[7     ]', $TLRNO);
	print(8, 3, '                                       【科    目】 [8       ]', @km);
}"
</PRINT>
</RESPONSE>
<RESPONSE>

<PACKAGE DEVICE="PRINTER" DESC="不可改变显示">
LNDF|@dkzh|@hm|@dkbj|
</PACKAGE>
<INIT>
"{
	#FROMTDATE= substr($HDATE, 0, 4)+'-'+ substr($HDATE, 4, 2)+'-'+ substr($HDATE, 6, 2);
	//if(#XZBZ == '1' ){
	//	showmsg('【 请插入现金缴款单... 】');
	//}else{
	//	showmsg('【 请插入转账进账单... 】');
	//}

}"
</INIT>
<PRINT>
"{
    print( 5, 16,'[4]      [2]     [2]',#YEAR,#MON,#DAY);
    print( 7,  8,'[5]',$FD2);
    print( 7, 24,'4406贷款还本');
    print( 7, 46,'[4]',$FD7);
    print( 7, 62,'[6]',$FD4);
	print( 8, 3, '    贷款账号:  [19                 ]      户    名: [30                            ]', @dkzh, @hm);
	print( 9, 3, '【贷款还本】[16                ]               [10         ] ', @dkbj, #FROMTDATE);
}"
</PRINT>
</RESPONSE>
-->
<RESPONSE>
<PACKAGE DEVICE="PRINTER" LINESPACE="20" DESC="【  请插入贷款还本凭证... 】">
LNBKBJ|@pzstr|@dkzh|@jjh|@hm|@cpmc|@je|@rqs|@rqe|@dkbj|@ljhb|@sqbj|@htll|@yqll|@kmh||@lsh|
</PACKAGE>
<INIT>
"{
	dim @rqsf as string;
	@rqsf=substr(@rqs,0,4)+'-'+substr(@rqs, 4, 2)+'-'+substr(@rqs, 6, 2);
}"
</INIT>
<PRINT>
"{
dim @txtime  as string;
@txtime=substr($SYSTIME,0,2)+':'+substr($SYSTIME,2,2)+':'+substr($SYSTIME,4,2);
print( 5,20,'	                                      [8        ]凭证', @pzstr);
print( 6,20,'    机构名称: [30                            ] 交易日期: [10          ] [8]  流 水 号: [6      ]', $BRNAME, $HDATE,@txtime, @lsh);
print( 7,20,'┍━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┑');
print( 8,20,'┃  贷款账号:[20                  ]                         借 据 号:[20                  ]         ┃', @dkzh, @jjh);
print( 9,20,'┃  户    名:[60                                                          ]                       ┃', @hm);
      if(#XZBZ=='1')
        {
print(10,20,'┃  产品名称:[40                                      ]            科 目 号:[8       ]              ┃', @cpmc, @kmh);
print(11,20,'┃----------------------------------------------------------------------------------------------┃');
print(12,20,'┃  本次还本:[30                            ]           ￥[20                  ]                    ┃', #UHBJE, #XHBJE);
print(13,20,'┃----------------------------------------------------------------------------------------------┃');
print(14,20,'┃  起止日期:  [4   ]-[2 ]-[2 ]   到   [4   ]-[2 ]-[2 ]                                                     ┃', substr(@rqs, 0, 4), substr(@rqs, 4, 2), substr(@rqs, 6, 2), substr(@rqe, 0, 4), substr(@rqe, 4, 2), substr(@rqe, 6, 2));
print(15,20,'┃  贷款本金:[16              ]   合同利率(月):[10        ]           逾期利率(月):[10        ]       ┃', @dkbj, @htll, @yqll);
print(16,20,'┃  累计还本:[16              ]                                                                   ┃', @ljhb);
print(17,20,'┃  尚欠本金:[16              ]                                                                   ┃', @sqbj);
print(18,20,'┕━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┙');
print(19,20,'              会    计:                    复    核:                      记    帐:  [4      ]', $TLRNO);
}else if(#XZBZ=='2')
	{
print(10,20,'┃  还款帐号:[20                  ]              产品名称:[40                                      ]┃',#ACTNO_2,@cpmc);
print(11,20,'┃  还款户名:[60                                                          ]科 目 号: [8       ]     ┃', #CUSTNAME_2,@kmh);
print(12,20,'┃----------------------------------------------------------------------------------------------┃');
print(13,20,'┃  本次还本:[30                            ]           ￥[20                  ]                    ┃', #UHBJE, #XHBJE);
print(14,20,'┃----------------------------------------------------------------------------------------------┃');
print(15,20,'┃  起止日期:  [4   ]-[2 ]-[2 ]   到   [4   ]-[2 ]-[2 ]                                                     ┃', substr(@rqs, 0, 4), substr(@rqs, 4, 2), substr(@rqs, 6, 2), substr(@rqe, 0, 4), substr(@rqe, 4, 2), substr(@rqe, 6, 2));
print(16,20,'┃  贷款本金:[16              ]   合同利率(月):[10        ]           逾期利率(月):[10        ]       ┃', @dkbj, @htll, @yqll);
print(17,20,'┃  累计还本:[16              ]                                                                   ┃', @ljhb);
print(18,20,'┃  尚欠本金:[16              ]                                                                   ┃', @sqbj);
print(19,20,'┕━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┙');
print(20,20,'              会    计:                    复    核:                      记    帐:  [4      ]', $TLRNO);
}else{
print(10,20,'┃  扣划帐号:[20                  ]             产品名称:[40                                      ] ┃',#ACTNO_3,@cpmc);
print(11,20,'┃  扣划户名:[60                                                          ]科 目 号: [8       ]     ┃', #CUSTNAME,@kmh);
print(12,20,'┃----------------------------------------------------------------------------------------------┃');
print(13,20,'┃  本次还本:[30                            ]           ￥[20                  ]                    ┃', #UHBJE, #XHBJE);
print(14,20,'┃----------------------------------------------------------------------------------------------┃');
print(15,20,'┃  起止日期:  [4   ]-[2 ]-[2 ]   到   [4   ]-[2 ]-[2 ]                                                     ┃', substr(@rqs, 0, 4), substr(@rqs, 4, 2), substr(@rqs, 6, 2), substr(@rqe, 0, 4), substr(@rqe, 4, 2), substr(@rqe, 6, 2));
print(16,20,'┃  贷款本金:[16              ]   合同利率(月):[10        ]           逾期利率(月):[10        ]       ┃', @dkbj, @htll, @yqll);
print(17,20,'┃  累计还本:[16              ]                                                                   ┃', @ljhb);
print(18,20,'┃  尚欠本金:[16              ]                                                                   ┃', @sqbj);
print(19,20,'┕━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┙');
print(20,20,'              会    计:                    复    核:                      记    帐:  [4      ]', $TLRNO);
}
 }"
</PRINT>
</RESPONSE>
<RESPONSE>
<PACKAGE DEVICE="PRINTER" DESC="打印业务专用凭证">
NOTHING
</PACKAGE>
<PRINT>
"{
	dim @txtime  as string;
	@txtime=substr($SYSTIME,0,2)+':'+substr($SYSTIME,2,2)+':'+substr($SYSTIME,4,2);
        print( 5, 20,'机构名称:[30]',$BRNAME);
        print( 5, 2,'代码:4406');
        print( 5, 13,'交易:贷款还本');
	print( 7, 20,'贷款帐号:[20]     贷款户名:[60]',#DKZH,#DKHM);
	if(#XZBZ=='1')
	{
	print( 8, 20,'贷款余额:[17]',ltrim(itoa(#DKYE,'%17.2f')));
	print( 9, 20,'还本金额:[17]',ltrim(itoa(#HBJE,'%17.2f')));
        }
	else if(#XZBZ=='2')
	{
	print( 8, 20,'还款帐号:[20]     还款户名:[60]',#ACTNO_2,#CUSTNAME_2);
	print( 9, 20,'贷款余额:[17]',ltrim(itoa(#DKYE,'%17.2f')));
	print( 10, 20,'还本金额:[17]',ltrim(itoa(#HBJE,'%17.2f')));
        }
	else{
	print( 8, 20,'扣划帐号:[20]     扣划户名:[60]',#ACTNO_3,#CUSTNAME_3);
	print( 9, 20,'贷款余额:[17]',ltrim(itoa(#DKYE,'%17.2f')));
	print( 10, 20,'还本金额:[17]',ltrim(itoa(#HBJE,'%17.2f')));
        }
	printacdtl_1();
        print_sq();
	print( 24,20,'备注:')
        print( 24,27,'交易日期:[8] [8]',$HDATE,@txtime);
        print( 24,5,'柜员:[4]',$FD7);
        print( 24,5,'流水号:[6]',$FD4);
}"
</PRINT>
</RESPONSE>
</TRANSACTION>
   
   
   
   
    
   
  

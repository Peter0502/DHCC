<?xml version="1.0"  encoding="GBK" ?>
<TRANSACTION RIGHTS="11111111011100000000000001100010" TITLE="补打燃气代收业务凭证"
xmlns="http://www.otd.org/MENU" xmlns:W3CNS="http://www.w3c.org">
<VARIABLE>
  <ITEM LINE="3" COL="3"   TYPE="%-70s"    FUNCTIONS="T(9926                      补打燃气代收业务凭证)"/>
  <ITEM LINE="4" COL="3"   TYPE="%-70s"    FUNCTIONS="T(────────────────────────────────────────)"/>
  <ITEM NAME="#TXNO"       TYPE="%-4s"     FUNCTIONS="T($TXNO=9020)"/>
  <ITEM NAME="#MSGTYPE"    TYPE="%-5s"     FUNCTIONS="T($MSGTYPE=03001)"/>

  <ITEM LINE="7"  COL="5"  TYPE="%-14s"   FUNCTIONS="T(流  水  号:)"/>
  <ITEM LINE="7"  COL="15" TYPE="%-8s"    NAME="#OLD_TRACENO"  INPUT="TEXT"  FUNCTIONS="V(00000001,99999999)"/>
  <ITEM LINE="9"  COL ="5" TYPE="%-14s"   FUNCTIONS="T(交 易 日 期:)"/>
  <ITEM LINE="9"  COL="15" TYPE="%-8s"    NAME="#OLD_DATE"     INPUT="TEXT"  FUNCTIONS="T($HDATE)V(00000001,99999999)">
    <ONLOSTFOCUS>
    "{
        if(len(delspace(#OLD_DATE))!=8){
          showmsg('交易日期无效，请输入8位的交易日期!!');
          return(false);
        }
     }"
    </ONLOSTFOCUS>
  </ITEM>

  <ITEM NAME="#OPN_BR_NO"    TYPE="%-5s"  FUNCTIONS=""/>
  <ITEM NAME="#USER_NO"    TYPE="%-6s"  FUNCTIONS=""/>
  <ITEM NAME="#C_CERTTYPE" TYPE="%-1s" FUNCTIONS=""/><!---账户对应证件类型--->
  <ITEM NAME="#CERTTYPE_CN" TYPE="%-20s" FUNCTIONS=""/><!---证件类型中文--->
  <ITEM NAME="#C_CERTNO" TYPE="%-20s" FUNCTIONS=""/><!---账户对应证件号码--->
  <ITEM NAME="#OLD_J_TRACENO"    TYPE="%-20s"  FUNCTIONS=""/><!---退费业务对应缴费流水号--->

  <ITEM  NAME="#BTN" LINE="21"  COL="63" TYPE="%-6s"    FUNCTIONS="T(确  定)" INPUT="BUTTON">
    <ONCLICK>"{
      initfd();
      commsend_001();
      $FD16='9020';             //平台补打业务凭条接口
      $FD60='RQDS';             //平台交易类型
      //$FD30=#USER_NO;
      $FD32=#OLD_TRACENO;
      $FD28=#OLD_DATE;

      callagnpt();
      if($FD12!='0000')
      {
        showmsg(geterror());
        rerun();
        return(false);
      }

      #USER_NO=delspace($FD30);            //用户代码
      #TX_TIME=delspace($FD29);            //交易时间
      #YHNAME=delspace($FD25);             //用户姓名
      #ADDRESS=delspace($FD76);            //用户单位及地址
      #SYBS=delspace($FD86);               //上月表指数
      #BYBS=delspace($FD87);               //本月表指数
      #YL=delspace($FD88);                 //用量
      #DJ=delspace($FD91);                 //单价
      #RQF=delspace($FD73);                //燃气费
      #BXF=delspace($FD84);                //保险费
      #FZJ=delspace($FD85);                //复置金
      #SYQF=delspace($FD58);               //上月欠费
      #ZNJ=delspace($FD59);                //滞纳金
      #SYJY=delspace($FD26);               //上月结余
      #DYJJK=delspace($FD61);              //当月已交款
      #YSHJ=delspace($FD52);               //应收合计
      #CHBY=delspace($FD27);               //抄表员
      #PHONE=delspace($FD62);              //电话
      #TX_AMT=delspace(itoa($FD39,'%-10.2f'));  //缴费金额
      #TX_CHANNEL=delspace($FD20);         //交易渠道
      #JFFS=delspace($FD68);               //缴费方式
      #TX_CODE=delspace($FD44);            //交易代码
      #TX_BRNO=delspace($FD45);            //机构号
      #TX_TEL=delspace($FD46);             //柜员号
      #TX_STAT=delspace($FD69);            //交易状态
      #TX_TYPE=delspace($FD70);            //交易类型
      #ACC_TRACE_NO=delspace($FD63);       //核心交易日期
      #ACC_TX_DATE=delspace($FD47);        //核心交易日期
      #BRF=delspace($FD100);               //说明
      #OLD_TRACENO=delspace($FD32);        //平台交易流水

      #AC_NO=delspace($FD31);              //账号
      #AC_NAME=delspace($FD33);            //户名

      //交易状态不为正常成功的，不进行补打
      if(#TX_STAT != '0'){
        showmsg('该笔交易流水非正常成功状态，不可进行补打!');
        rerun();
        return(false);
      }

      //用户绑定维护时，需取得原账户名称
      if(#TX_CODE=='9030' and #TX_TYPE=='3'){
        #OLD_ACNO=#BRF;

        //核心查询卡代收维护原卡户名
        dim @info1 as string;
        dim @tmpacid1 as string;
        #OLD_ACNAME='';
        refresh();

        initfd();
        commsend_001();
        $FD16='9598';
        $FD123='select ac_id  from mdm_ac_rel where ac_no='+chr(39)+#OLD_ACNO+chr(39);
        @info1=callserver();
        if($FD12!='0000')
        {
          showmsg(geterror());
          return(false);
        }
        if(@info1=='')
        {
          showmsg('账号不存在,请核对后重新输入!!');
          return(false);
        }
        @tmpacid1=delspace(strfld(@info1,'|',0));
        initfd();
        commsend_001();
        $FD16='9598';
        @info1='';
        $FD123='select name from dd_mst where ac_id='+chr(39)+@tmpacid1+chr(39);
        @info1=callserver();
        if($FD12!='0000')
        {
            showmsg(geterror());
            return(false);
        }
        #OLD_ACNAME=delspace(strfld(@info1,'|',0));
      }

      //9924[3010]退费交易取得原缴费流水号
      if(#TX_CODE=='3010'){
        #OLD_J_TRACENO=substr(#BRF,len(#BRF)-8,8);
      }

      //取得绑定账号的开户行及证件类型、号码
      if(#AC_NO != '')
      {
        dim @info as string;
        #OPN_BR_NO='';
        #C_CERTTYPE='';
        #C_CERTNO='';
        refresh();
        
        initfd();
        commsend_001();
        $FD16='9598';
        $FD123='select opn_br_no, id_type, id_no from mdm_ac_rel where ac_no='+chr(39)+#AC_NO+chr(39);
        @info=callserver();
        if($FD12!='0000')
        {
            showmsg(geterror());
            return(false);
        }
        if(@info=='')
        {
            showmsg('账号不存在,请核对后重新输入!!');
            return(false);
        }
        #OPN_BR_NO=delspace(strfld(@info,'|',0));
        #C_CERTTYPE=delspace(strfld(@info,'|',1));
        #C_CERTNO=delspace(strfld(@info,'|',2));

        //证件类型中文转换
        if(#C_CERTTYPE == '1')
        {
          #CERTTYPE_CN='身份证';
        }
        if(#C_CERTTYPE == '2')
        {
          #CERTTYPE_CN='户口薄';
        }
        if(#C_CERTTYPE == '3')
        {
          #CERTTYPE_CN='护照';
        }
        if(#C_CERTTYPE == '4')
        {
          #CERTTYPE_CN='军官证';
        }
        if(#C_CERTTYPE == '5')
        {
          #CERTTYPE_CN='回乡证';
        }
        if(#C_CERTTYPE == '6')
        {
          #CERTTYPE_CN='士兵证';
        }
        if(#C_CERTTYPE == '7')
        {
          #CERTTYPE_CN='港澳居民来往通行证';
        }
        if(#C_CERTTYPE == 'E')
        {
          #CERTTYPE_CN='临时身份证';
        }
        if(#C_CERTTYPE == 'F')
        {
          #CERTTYPE_CN='外国人居留证';
        }
        if(#C_CERTTYPE == 'G')
        {
          #CERTTYPE_CN='警官证';
        }
        if(#C_CERTTYPE == 'H')
        {
          #CERTTYPE_CN='其他证件';
        }
        if(#C_CERTTYPE == 'I')
        {
          #CERTTYPE_CN='台湾同胞来往通行证';
        }
      }
    }"
    </ONCLICK>
  </ITEM>

  <ITEM NAME="#UTX_AMT"  TYPE="%-40s"   FUNCTIONS="U(#TX_AMT)"/><!---大写金额--->

  <ITEM NAME="#OVERDUE_AMT"  TYPE="%-12s"   FUNCTIONS=""><!---本次欠费--->
    <ONLOSTFOCUS>
    "{
      #OVERDUE_AMT='0.00';

      //当应收合计为正数时，说明该用户欠费
      if(substr(#YSHJ,0,1) != '-')
      {
        //当缴费金额小于应收合计时，产生欠费
        if(val(#TX_AMT) &lt; val(#YSHJ))
        {
          #OVERDUE_AMT=itoa((val(#YSHJ)-val(#TX_AMT)),'%-10.2f');
        }
      }
    }"
    </ONLOSTFOCUS>
  </ITEM>
  <ITEM NAME="#BALANCE_AMT"  TYPE="%-12s"   FUNCTIONS=""><!---本次结余--->
    <ONLOSTFOCUS>
    "{
      #BALANCE_AMT='0.00';

      //当应收合计为负数时，说明该用户有剩余结余
      //本次结余为缴费金额、应收合计金额之和
      if(substr(#YSHJ,0,1) == '-')
      {
        #BALANCE_AMT=itoa((val(#TX_AMT)-val(#YSHJ)),'%-10.2f');
      }
      //当应收合计为正数、缴费金额大于应收合计时，本次有结余
      else if(val(#TX_AMT) &gt; val(#YSHJ))
      {
        #BALANCE_AMT=itoa((val(#TX_AMT)-val(#YSHJ)),'%-10.2f');
      }
      //燃气公司要求，应收合计为负数时，默认为0
      if(substr(#YSHJ,0,1) == '-')
      {
        #YSHJ='0.00';
      }
    }"
    </ONLOSTFOCUS>
  </ITEM>

  <ITEM NAME="#RUNOUT"     TYPE="%-60s"    FUNCTIONS="">
    <ONLOSTFOCUS>
    "{
      runoutput();
      rerun();
    }"
    </ONLOSTFOCUS>
  </ITEM>

  <!-- 凭证变量 -->
  <ITEM NAME="#TX_TIME"        TYPE="%-8s"     FUNCTIONS=""/>
  <ITEM NAME="#YHNAME"         TYPE="%-40s"    FUNCTIONS=""/>
  <ITEM NAME="#ADDRESS"        TYPE="%-64s"    FUNCTIONS=""/>
  <ITEM NAME="#SYBS"           TYPE="%-9s"     FUNCTIONS=""/>
  <ITEM NAME="#BYBS"           TYPE="%-9s"     FUNCTIONS=""/>
  <ITEM NAME="#YL"             TYPE="%-9s"     FUNCTIONS=""/>
  <ITEM NAME="#DJ"             TYPE="%-4s"     FUNCTIONS=""/>
  <ITEM NAME="#RQF"            TYPE="%-10s"    FUNCTIONS=""/>
  <ITEM NAME="#BXF"            TYPE="%-8s"     FUNCTIONS=""/>
  <ITEM NAME="#FZJ"            TYPE="%-8s"     FUNCTIONS=""/>
  <ITEM NAME="#SYQF"           TYPE="%-10s"    FUNCTIONS=""/>
  <ITEM NAME="#ZNJ"            TYPE="%-8s"     FUNCTIONS=""/>
  <ITEM NAME="#SYJY"           TYPE="%-10s"    FUNCTIONS=""/>
  <ITEM NAME="#DYJJK"          TYPE="%-10s"    FUNCTIONS=""/>
  <ITEM NAME="#YSHJ"           TYPE="%-11s"    FUNCTIONS=""/>
  <ITEM NAME="#CHBY"           TYPE="%-8s"     FUNCTIONS=""/>
  <ITEM NAME="#PHONE"          TYPE="%-11s"    FUNCTIONS=""/>
  <ITEM NAME="#TX_AMT"         TYPE="%-10s"    FUNCTIONS=""/>
  <ITEM NAME="#TX_CHANNEL"     TYPE="%1s"      FUNCTIONS=""/>
  <ITEM NAME="#JFFS"           TYPE="%1s"      FUNCTIONS=""/>
  <ITEM NAME="#TX_CODE"        TYPE="%-4s"     FUNCTIONS=""/>
  <ITEM NAME="#TX_BRNO"        TYPE="%-5s"     FUNCTIONS=""/>
  <ITEM NAME="#TX_TEL"         TYPE="%-4s"     FUNCTIONS=""/>
  <ITEM NAME="#TX_STAT"        TYPE="%-1s"     FUNCTIONS=""/>
  <ITEM NAME="#TX_TYPE"        TYPE="%-1s"     FUNCTIONS=""/>
  <ITEM NAME="#ACC_TRACE_NO"   TYPE="%-12s"    FUNCTIONS=""/>
  <ITEM NAME="#ACC_TX_DATE"    TYPE="%-8s"     FUNCTIONS=""/>
  <ITEM NAME="#BRF"            TYPE="%-112s"   FUNCTIONS=""/>
  <ITEM NAME="#AC_NO"          TYPE="%-19s"    FUNCTIONS=""/>
  <ITEM NAME="#OLD_ACNO"       TYPE="%-19s"    FUNCTIONS=""/>
  <ITEM NAME="#AC_NAME"        TYPE="%-60s"    FUNCTIONS=""/>
  <ITEM NAME="#OLD_ACNAME"     TYPE="%-60s"    FUNCTIONS=""/>
  <!-- 凭证变量 -->
</VARIABLE>
<REQUEST>
</REQUEST>
<RESPONSE>
  <PACKAGE DEVICE="SCREEN" DESC="显示内容">
   NOTHING
  </PACKAGE>
  <PRINT>
    "{
      print( 3,25,'补打业务凭条成功');
      //9923[2010]缴费凭证补打
      if(#TX_CODE=='2010' and #TX_STAT=='0' and #TX_TYPE=='1'){
        print( 5,25,'补打燃气缴费凭条');
        print( 6,20,'用户代码:[6]       用户名:[60]',#USER_NO,#YHNAME);
        if(#JFFS=='1'){
          print(7,20,'缴费方式:现金         缴费金额:[10]',delspace(comma(#TX_AMT)));
        }else{
          print(7,20,'缴费方式:转账         支付账号:[20]',delspace(#AC_NO));
          print(8,20,'缴费金额:[10]',delspace(comma(#TX_AMT)));
        }
      }
      //9924[3010]退费凭条补打
      if(#TX_CODE=='3010' and #TX_STAT=='0' and #TX_TYPE=='2')
      {
        print(5,25,'补打退费凭条');
        print(6,20,'用户代码：[6]                     用户姓名：[40]',#USER_NO,#YHNAME);
        print(7,20,'地    址：[64]',#ADDRESS);
        print(8,20,'原缴费金额：[16]         退费金额：[16]',delspace(comma(#TX_AMT)),delspace(comma(#TX_AMT)));
        print(9,20,'原缴费流水：[8]                 退费流水：[8]',delspace(#OLD_J_TRACENO),#OLD_TRACENO);
        if(#JFFS == '2')
        {
          print(10,20,'退费方式：转账');
          print(11,20,'银行卡：[19]          户名：[60]',#AC_NO,#AC_NAME);
        }
        else
        {
          print(10,20,'退费方式：现金');
        }
      }
      //9921[5010]燃气费用代扣签解约凭条补打
      if(#TX_CODE=='5010' and #TX_STAT=='0'){
        if(#TX_TYPE=='0')
        {
          print(5,25,'补打燃气费用代扣签约凭条');
          print(6,20,'用户代码：[6]                代扣状态：签约',#USER_NO);
          print(7,20,'签约卡号：[19]   签约卡户名：[60]',#AC_NO,#AC_NAME);
          print(8,20,'证件类型：[20]  证件号码：[18]',#CERTTYPE_CN,#C_CERTNO);
        }
        if(#TX_TYPE=='2')
        {
          print(5,25,'补打燃气费用代扣解约凭条');
          print(6,20,'用户代码：[6]                代扣状态：解约',#USER_NO);
          print(7,20,'解约卡号：[19]   解约卡户名：[60]',#AC_NO,#AC_NAME);
          print(8,20,'证件类型：[20]  证件号码：[18]',#CERTTYPE_CN,#C_CERTNO);
        }
      }
      //9920[9030]用户绑定解绑凭条补打
      if(#TX_CODE=='9030' and #TX_STAT=='0'){
        if(#TX_TYPE=='2')
        {
          print(5,25,'补打用户绑定凭条');
          print(6,20,'用户代码：[6]            用户姓名：[40]',#USER_NO,#YHNAME);
          print(7,20,'地    址：[64]',#ADDRESS);
          print(8,20,'绑定账号：[19]        绑定账户名：[60]',#AC_NO,#AC_NAME);
        }
        if(#TX_TYPE=='3'){
          print(5,25,'补打用户绑定维护凭条');
          print(6,20,'用户代码：[6]            用户姓名：[40]',#USER_NO,#YHNAME);
          print(7,20,'地    址：[64]',#ADDRESS);
          print(8,20,'原代收账号：[19]               代收账户名：[60]',#OLD_ACNO,#OLD_ACNAME);
          print(9,20,'新代收账号：[19]               代收账户名：[60]',#AC_NO,#AC_NAME);
        }
        if(#TX_TYPE=='4')
        {
          print(5,25,'补打用户解绑凭条');
          print(6,20,'用户代码：[6]            用户姓名：[40]',#USER_NO,#YHNAME);
          print(7,20,'地    址：[64]',#ADDRESS);
          print(8,20,'解绑账号：[19]        解绑账户名：[60]',#AC_NO,#AC_NAME);
        }
      }
    }"
  </PRINT>
</RESPONSE>

<RESPONSE>
  <PACKAGE DEVICE="PRINTER" LINESPACE="24" DESC="请打印燃气公司收据" CHECK="#TX_CODE=2010">
  NOTHING
  </PACKAGE>

  <PRINT>
  "{
    dim @txdate  as string;
    @txdate=substr(#OLD_DATE,0,4)+'年'+substr(#OLD_DATE,4,2)+'月'+substr(#OLD_DATE,6,2)+'日';

    //2010缴费凭证补打
    if(#TX_CODE=='2010' and #TX_STAT=='0' and #TX_TYPE=='1'){
	    print(3,40,'[14]                     [8]',@txdate,delspace(#OLD_TRACENO));
	    print(4,13,'\B0[30]\B1[40]\B0[6]\B1',delspace(#YHNAME),delspace(#ADDRESS),delspace(#USER_NO));
        print(5,6,'[9]      [9]      [9]     [4]       [10]   [8]    [8]',delspace(#SYBS),delspace(#BYBS),delspace(#YL),delspace(#DJ),delspace(#RQF),delspace(#BXF),delspace(#FZJ));
        print(8,10,'[2][10]      [8]       [10]       [10]         [11]',' ',delspace(#SYQF),delspace(#ZNJ),delspace(#SYJY),delspace(#DYJJK),delspace(#YSHJ));
        print(10,22,'[15]                             [15]',delspace(comma(itoa(#TX_AMT,'%.2f'))),delspace(#OVERDUE_AMT));
        print(11,22,'[36]        [15]',delspace(#UTX_AMT),delspace(#BALANCE_AMT));
        print(15,12,'[8]                [11]                            [4]',delspace(#CHBY),delspace(#PHONE),$FD7);
    }
  }"
  </PRINT>
</RESPONSE>

<RESPONSE>
  <PACKAGE DEVICE="PRINTER" LINESPACE="22" DESC="请打印业务专用凭证">
    NOTHING
  </PACKAGE>
  <PRINT>
   "{
      dim @txtime  as string;
      @txtime=substr($SYSTIME,0,2)+':'+substr($SYSTIME,2,2)+':'+substr($SYSTIME,4,2);
      print(5,20,'机构名称:[30]',$BRNAME);
      print(5,2,'代码:9926');
      print(5,13,'交易:补打业务凭条');

      //9923[2010]缴费凭证补打
      if(#TX_CODE=='2010' and #TX_STAT=='0' and #TX_TYPE=='1'){
        print(7,40,'\L0燃气缴费\L1');
        if(#JFFS=='1'){
          print(9,20,'缴费方式：现金                       缴费金额：[15]',delspace(comma(#TX_AMT)));
          print(10,20,'用户代码：[6]                     用户姓名：[40]',#USER_NO,#YHNAME);
          print(11,20,'地    址：[64]',#ADDRESS);
          print(12,20,'平台流水：[8]                   交 易 行：[4]',#OLD_TRACENO,#TX_BRNO);
        }else{
          print(9,20,'开 户 行：[5]                      交 易 行：[5]',#OPN_BR_NO,#TX_BRNO);
          print(10,20,'缴费方式：转账                       缴费金额：[15]',delspace(comma(#TX_AMT)));
          print(11,20,'支付账号：[20]       户    名：[20]',delspace(#AC_NO),#AC_NAME);
          print(12,20,'用户代码：[6]                     用户姓名：[40]',#USER_NO,#YHNAME);
          print(13,20,'地    址：[64]',#ADDRESS);
          print(14,20,'平台流水：[8]',#OLD_TRACENO);

          print(17,80,'\H0本人已确认银行打印记录正确无误.\H1');
          print(19,80,'客户签名:_____________________');
        }
      }
      //9924[3010]退费凭证补打
      if(#TX_CODE=='3010' and #TX_STAT=='0' and #TX_TYPE=='2')
      {
        print(7,40,'\L0燃气退费\L1');
        print(9,20,'用户代码：[6]                  用户姓名：[40]',#USER_NO,#YHNAME);
        print(10,20,'地    址：[64]',#ADDRESS);
        if(#JFFS == '2')
        {
          print(11,20,'退费方式：转账');
          print(12,20,'原缴费金额：[16]      支付账号：[19]',delspace(comma(#TX_AMT)),delspace(#AC_NO));
          print(13,20,'退费金额：[16]        退入账号：[19]',delspace(comma(#TX_AMT)),delspace(#AC_NO));
          print(14,20,'原缴费流水：[8]              退费流水：[8]',delspace(#OLD_J_TRACENO),#OLD_TRACENO);
        }
        else
        {
          print(11,20,'退费方式：现金');
          print(12,20,'原缴费金额：[16]      退费金额：[16]',delspace(comma(#TX_AMT)),delspace(comma(#TX_AMT)));
          print(13,20,'原缴费流水：[8]              退费流水：[8]',delspace(#OLD_J_TRACENO),#OLD_TRACENO);
        }
        print(17,80,'\H0本人已确认银行打印记录正确无误.\H1');
        print(19,80,'客户签名:_____________________');
      }
      //9921[5010]燃气费用代扣签/解约凭证补打
      if(#TX_CODE=='5010' and #TX_STAT=='0'){
        print(7,27,'\L0燃气费用代扣签/解约\L1');
        print(9,20,'开 户 行：[5]                      交 易 行：[5]',#OPN_BR_NO,#TX_BRNO);
        if(#TX_TYPE=='0')
        {
          print(10,20,'业务类型：签约');
          print(11,20,'签约账号：[19]        户    名：[60]',#AC_NO,#AC_NAME);
          print(12,20,'证件类型：[20]       证件号码：[18]',#CERTTYPE_CN,#C_CERTNO);
        }
        if(#TX_TYPE=='2')
        {
          print(10,20,'业务类型：解约');
          print(11,20,'解约账号：[19]        户    名：[60]',#AC_NO,#AC_NAME);
          print(12,20,'证件类型：[20]       证件号码：[18]',#CERTTYPE_CN,#C_CERTNO);
        }
        print(13,20,'用户代码：[6]                     用户姓名：[40]',#USER_NO,#YHNAME);
        print(14,20,'地    址：[64]',#ADDRESS);
        print(15,20,'平台流水:[8]',#OLD_TRACENO);

        print(17,80,'\H0本人已确认银行打印记录正确无误.\H1');
        print(19,80,'客户签名:_____________________');
      }
      //9920[9030]用户绑定/解绑凭证补打
      if(#TX_CODE=='9030' and #TX_STAT=='0'){
        print(7,27,'\L0燃气用户绑定/解绑\L1');
        print(9,20,'开 户 行：[5]                      交 易 行：[5]',#OPN_BR_NO,#TX_BRNO);
        if(#TX_TYPE=='2')
        {
          print(10,20,'业务类型：绑定');
          print(11,20,'绑定账号：[19]        户    名：[60]',#AC_NO,#AC_NAME);
        }
        if(#TX_TYPE=='3')
        {
          print(10,20,'业务类型：维护');
          print(11,20,'原绑定账号：[19]      户    名：[60]',#OLD_ACNO,#OLD_ACNAME);
          print(12,20,'新绑定账号：[19]      户    名：[60]',#AC_NO,#AC_NAME);
        }
        if(#TX_TYPE=='4')
        {
          print(10,20,'业务类型：解绑');
          print(11,20,'解绑账号：[19]        户    名：[60]',#AC_NO,#AC_NAME);
        }
        print(13,20,'用户代码：[6]                     用户姓名：[40]',#USER_NO,#YHNAME);
        print(14,20,'地    址：[64]',#ADDRESS);
        print(15,20,'平台流水:[8]',#OLD_TRACENO);
        
        print(17,80,'\H0本人已确认银行打印记录正确无误.\H1');
        print(19,80,'客户签名:_____________________');
      }

      print( 23,20,'备注:');
      print( 23,27,'交易日期:[8] [8]',$HDATE,@txtime);
      print( 23,5,'柜员:[4]',$FD7);
      print( 23,5,'流水号:[6]',#ACC_TRACE_NO);
    }"
  </PRINT>
</RESPONSE>
</TRANSACTION>

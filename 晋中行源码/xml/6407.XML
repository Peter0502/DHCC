<?xml version="1.0" encoding="GBK" ?>
<TRANSACTION RIGHTS="00110000" TITLE="6407 拆入还款信息维护"
  xmlns="http://www.otd.org/MENU" xmlns:W3CNS="http://www.w3c.org">
<COMMSEND>"{
    dim @txno as string;
    $MSGTYPE='03001';
    @txno = $TXNO;
	$FD12='4507';
	$FD16='9986';
	$FD25=#CJHM;
	$FD30=#DFZH;
    $FD31=#CJZH;
    $FD36=#CJQX;
//    $FD40=getitems('#CJJE');
//	$FD41=getitems('#ZHYE');
    $FD40=itoa(val(#CJJE,100),'%016d');
	$FD41=itoa(val(#ZHYE,100),'%016d');
	$FD42=getitems('#GHBJ');
	$FD43=getitems('#GHLX');
	$FD44=#DQRQ;
	$FD72='1';
	$FD73=#HTH;
//	$FD84=getitems('#CJLL');
//	$FD85=getitems('#YQLL');
	$FD84=itoa(val(#CJLL,1000000),'%08d');
	$FD85=itoa(val(#YQLL,1000000),'%08d');
	commsend_001();
	callserver();
	$TXNO=@txno;
	if($FD12 != '0000')
	{
	   showmsg(geterror());
	   return(false);
	}
	
	$FD16='4507';
	$MSGTYPE='03001';
	
	}"
</COMMSEND>
<COMMRECV>"{
	commrecv_001();
	if($FD12!='0000')
	{
			return(false);
			}
	showmsg('交易成功!')
}"
</COMMRECV>
<VARIABLE>
  <ITEM LINE="3"  COL="3" TYPE="%-44s" FUNCTIONS=
    "T(6407                        拆入还款信息维护)"/>
  <ITEM LINE="4"  COL="3"  TYPE="%-74s" FUNCTIONS=
   "T(─────────────────────────────────────)"/>
  <ITEM NAME="#TXNO" TYPE="%-4s" FUNCTIONS="T($TXNO=4507)"/>
  <ITEM NAME="#MSGTYPE" TYPE="%-5s" FUNCTIONS="T($MSGTYPE=03001)"/>
  <!--输入变量-->
  <BLOCK NAME="COMMON" LINE="7" COL="10">
  <ITEM LINE="0" COL="0" TYPE="%-10s" FUNCTIONS="T(合 同 号:)"/>
  <ITEM LINE="1" COL="0" TYPE="%-10s" FUNCTIONS="T(归还本金:)"/>
  <ITEM LINE="2" COL="0" TYPE="%-10s" FUNCTIONS="T(归还利息:)"/>
  <ITEM LINE="4" COL="0" TYPE="%-60s" FUNCTIONS="T(------------------------------------------------------------)"/>
  <ITEM LINE="6" COL="0" TYPE="%-10s" FUNCTIONS="T(拆借账号:)"/>
  <ITEM LINE="7" COL="0" TYPE="%-10s" FUNCTIONS="T(拆借户名:)"/>
  <ITEM LINE="8" COL="0" TYPE="%-10s" FUNCTIONS="T(账户余额:)"/>
  <ITEM LINE="9" COL="0" TYPE="%-10s" FUNCTIONS="T(对方账号:)"/>
  <ITEM LINE="10" COL="0" TYPE="%-10s" FUNCTIONS="T(拆借金额:)"/> 
  <ITEM LINE="11" COL="0" TYPE="%-10s" FUNCTIONS="T(拆借利率:)"/>
  <ITEM LINE="11" COL="18" TYPE="%-2s" FUNCTIONS="T(％)"/>    
  <ITEM LINE="11" COL="30" TYPE="%-10s" FUNCTIONS="T(逾期利率:)"/> 
  <ITEM LINE="11" COL="50" TYPE="%-2s" FUNCTIONS="T(％)"/>  
  <ITEM LINE="12" COL="0" TYPE="%-10s" FUNCTIONS="T(到期日期:)"/>
  <ITEM LINE="12" COL="30" TYPE="%-10s" FUNCTIONS="T(拆借期限:)"/>
  <ITEM LINE="12" COL="50" TYPE="%-2s" FUNCTIONS="T(天)"/>   

  <ITEM NAME="#HTH" INPUT="TEXT" LINE="0" COL="10" TYPE="%-10s" FUNCTIONS="V(NB)"> 
  <ONLOSTFOCUS>
 "{	initfd();
 		dim @tota as string;	
    commsend_001();
 		$FD16='9944';
		$FD73=#HTH;
		$FD72='1';
		callserver();
		if($FD12!='0000'){
			showmsg(geterror());
			return(false);
		}
    #CJHM=delspace($FD25);
	#CJZH=delspace($FD31);
    #DQRQ=delspace($FD44);

    #CJLL=ltrim(itoa(val($FD84,0.000001),'%.6f'));
    #YQLL=ltrim(itoa(val($FD85,0.000001),'%.6f'));

    #CJQX=delspace($FD36);

    #CJJE=ltrim(itoa(val($FD40,0.01),'%.2f'));
    #ZHYE=ltrim(itoa(val($FD41,0.01),'%.2f'));

    #DFZH=delspace($FD30);  

	show(#CJHM,true);
    show(#CJZH,true);
	show(#DQRQ,true);
	show(#CJLL,true);	
	show(#YQLL,true);
	show(#CJQX,true);
	show(#CJJE,true);		
	show(#ZHYE,true);				
	show(#GHBJ,true);	
//    show(#GHLX,true);
    show(#DFZH,true);  				
	 }"
 </ONLOSTFOCUS>
  </ITEM> 

  <ITEM NAME="#GHBJ" INPUT="TEXT" LINE="1" COL="10" TYPE="%17.2f" FUNCTIONS="J(#LGHBJ)"/>
  <ITEM NAME="#LGHBJ" TYPE="%-16s" FUNCTIONS="X(#GHBJ)"/>

  <ITEM NAME="#GHLX" INPUT="TEXT" LINE="2" COL="10" TYPE="%17.2f" FUNCTIONS="J(#LGHLX)"/> 
  <ITEM NAME="#LGHLX" TYPE="%-16s" FUNCTIONS="X(#GHLX)"/>

  <ITEM NAME="#CJZH" ENABLE="FALSE" INPUT="TEXT" LINE="6" COL="10" TYPE="%-24s" FUNCTIONS=""/>
  <ITEM NAME="#CJHM" ENABLE="FALSE" INPUT="TEXT" LINE="7" COL="10" TYPE="%-50s" FUNCTIONS=""/>
  <!--
  <ITEM NAME="#ZHYE" ENABLE="FALSE" INPUT="TEXT" LINE="8" COL="10" TYPE="%17.2f" FUNCTIONS=""/>
  -->
  <ITEM NAME="#ZHYE" ENABLE="FALSE" INPUT="TEXT" LINE="8" COL="10" TYPE="%-16s" FUNCTIONS=""/>
  <ITEM NAME="#DFZH" ENABLE="FALSE" INPUT="TEXT" LINE="9" COL="10" TYPE="%-24s" FUNCTIONS=""/>
  <!--
  <ITEM NAME="#CJJE" ENABLE="FALSE" INPUT="TEXT" LINE="10" COL="10" TYPE="%17.2f" FUNCTIONS=""/>
  -->
  <ITEM NAME="#CJJE" ENABLE="FALSE" INPUT="TEXT" LINE="10" COL="10" TYPE="%-16s" FUNCTIONS=""/>
  <!--
  <ITEM NAME="#CJLL" ENABLE="FALSE" INPUT="TEXT" LINE="11" COL="10" TYPE="%9.6f" FUNCTIONS=""/>
  <ITEM NAME="#YQLL" ENABLE="FALSE" INPUT="TEXT" LINE="11" COL="40" TYPE="%9.6f" FUNCTIONS=""/>   
  -->
  <ITEM NAME="#CJLL" ENABLE="FALSE" INPUT="TEXT" LINE="11" COL="10" TYPE="%-8s" FUNCTIONS=""/>
  <ITEM NAME="#YQLL" ENABLE="FALSE" INPUT="TEXT" LINE="11" COL="40" TYPE="%-8s" FUNCTIONS=""/>   
  <ITEM NAME="#DQRQ" ENABLE="FALSE" INPUT="TEXT" LINE="12" COL="10" TYPE="%-8s" FUNCTIONS=""/>
  <ITEM NAME="#CJQX" ENABLE="FALSE" INPUT="TEXT" LINE="12" COL="40" TYPE="%4d" FUNCTIONS=""/>               
  </BLOCK>

  <!--输出变量--->
  <ITEM NAME="#PASSWD" TYPE="%-6s" FUNCTIONS="T()"/>
   <ITEM NAME="#YEAR"  TYPE="%-4s" FUNCTIONS="T($FD5,1,4)"/>
   <ITEM NAME="#MON"   TYPE="%-2s" FUNCTIONS="T($FD5,5,2)"/>
   <ITEM NAME="#DAY"   TYPE="%-2s" FUNCTIONS="T($FD5,7,2)"/>

  <ITEM LINE="21" COL="59"  TYPE="%-6s" FUNCTIONS="T(确  定)" INPUT="SUBMIT"/>

</VARIABLE>
<REQUEST>
</REQUEST>
<RESPONSE>
<PACKAGE DEVICE="SCREEN" DESC="显示内容">
NOTHING
</PACKAGE>
<PRINT>"{
	 print( 5, 30,'拆入还款信息维护');
	 print( 7, 20,'流水号:  [6]', $FD4);
	 print( 8, 20,'合 同 号:[8]',#HTH);
	 print( 9, 20,'归还本金:[16]',#LGHBJ);
	 print(10, 20,'归还利息:[16]',#LGHLX);
	}"
 </PRINT>
 </RESPONSE>

<RESPONSE>
<PACKAGE DEVICE="PRINTER"  LINESPACE="24" DESC="打印业务专用凭证">
NOTHING
</PACKAGE>
<PRINT>"{
	$KINDNO='00';
	dim @txtime  as string;
	@txtime=substr($SYSTIME,0,2)+':'+substr($SYSTIME,2,2)+':'+substr($SYSTIME,4,2);
	print( 5, 20,'机构名称:[30]',$BRNAME);  
	print( 5, 2,'代码:6401');
	print( 5, 13,'交易:拆入还款信息维护');
	 
	print(07, 10,'合 同 号:[8]',#HTH);
	print(08, 10,'归还本金:[16]',#LGHBJ);
	print(09, 10,'归还利息:[16]',#LGHLX);
	 
	print( 24,20,'备注:');
	print( 24,27,'交易日期:[8] [8]',$HDATE,@txtime);
	print( 24,5,'柜员:[4]',$FD7);
	print( 24,5,'流水号:[6]',$FD4);
  }"
 </PRINT>
</RESPONSE>
<OUTPUT>
</OUTPUT>
</TRANSACTION>

<USERFUN NAME="commsend_001">"{
	$FD2=$OPNBR;
	$FD3=$KINBR;
	$FD5=$HDATE;
	$FD7=$TLRNO;
	$FD10=$TTYNAME;
	$FD16=$TXNO;
	$FD79=#PASSWD;
	$FD74=$KINBR+'|'+$TLRNO;
}"
</USERFUN>



<USERFUN NAME="commrecv_001">"{
	//showmsg('FD12=['+$FD12+']');
}"
</USERFUN>
<!--存款交易结构-->
<USERFUN NAME="commsend_101">"{
	$FD101=getitems('#ACTNO24#ACTSEQ#TXAMT#VOCTYPE#VOCNUM#DESC10#NBFLAG#CUSTNAME#AVBAL#CURCD#CASHFLAG#DSCPT#ACTTYPE#ACTSEQ_2#PRODNAME');
}"
</USERFUN>
	<!--取款交易结构-->
<USERFUN NAME="commsend_102">"{
	$FD102=getitems('#ACTNO24#ACTSEQ#VOCTYPE#VOCNUM#FETCHFLAG#PWDFLAG#QUE_PWD#DRAW_PWD#CERTFLAG#CERTNO#STAMPFLAG#PWDFLAG2#PWD16#PRINTDATE#TXAMT#CERTTYPE#CUSTNAME#AVBAL#CURCD#CASHFLAG#DSCPT#ACTTYPE#ACTSEQ_2#ACCOUNTFLAG#INTEREST1#INTEREST2#INTEREST3#PAYAMOUNT#NEWVOCNUM#SPEFLAG#PRODNAME#ACTNO_24#EDUCREDIT#DESC10');
}"
</USERFUN>
<USERFUN NAME="commrecv_101">"{
	setitems('#ACTNO24#ACTSEQ#RTXAMT#VOCTYPE#VOCNUM#DESC10#NBFLAG#CUSTNAME#AVBAL#CURCD#CASHFLAG#DSCPT#ACTTYPE#ACTSEQ_2#PRODNAME',$FD101);
}"
</USERFUN>
<!--开户交易结构-->
<USERFUN NAME="commsend_103">"{
	$FD103=getitems('#PRODNO#PRODNAME#CURCD#ACTLX#ACTZL#JXLX#TXAMT#CUSTNAME#SHOWACTNO20#TERM#LUNIT#SVTYPE#ACTSEQ#CASHCD#ZBCODE#AUTOSVCD#AUTOSVCNT');
}"
</USERFUN>
<USERFUN NAME="commrecv_103">"{
	setitems('#PRODNO#PRODNAME#CURCD#ACTLX#ACTZL#JXLX#RTXAMT#CUSTNAME#SHOWACTNO20#TERM#LUNIT#SVTYPE#ACTSEQ#CASHCD#ZBCODE#AUTOSVCD#AUTOSVCNT',$FD103);
}"
</USERFUN>
<!--开介质结构-->
<USERFUN NAME="commsend_116">"{
	$FD116=getitems('#JZZL#CARDNO#GBFJE#ZJLX#ZJHM#CUSTNAME#SHOWACTNO#VOCNUM#JZLX');
}"
</USERFUN>
<USERFUN NAME="commrecv_116">"{
	setitems('#JZZL#CARDNO#GBFJE#ZJLX#ZJHM#CUSTNAME#SHOWACTNO#RVOCNUM#JZLX',$FD116);
}"
</USERFUN>
<!--大额支付交易结构-->
<USERFUN NAME="commsend_123">"{
	#OTYPE='1';
	$FD123 = getitems('#CMTNO#O_CMTNO#PAY_QS_NO#OR_BR_NO#SENDCO#PAY_OPN_BR_NO#PAY_AC_NO#PAY_NAME#PAY_ADDR#CASH_QS_NO#AC_BR_NO#RECECO#CASH_OPN_BR_NO#CASH_AC_NO#CASH_NAME#CASH_ADDR#YW_TYPE#ORDERNO#CONTENT#RATE#RATEDATE#OORDERNO#PROCODE#CR_DATE#CR_BR_NO#CR_TX_NUM#QR_BR_NO#QR_TX_NUM#TX_TYPE#NOTPAY_CONTENT#NOTPAY_ORDERNO#O_NOTPAY_ORDERNO#RESP1#OPERLEVEL#PROC_STS#OPCD#LW_IND#HP_ADD_PWD#PACKID#O_PACKID#PACK_DATE#O_PACK_DATE#TXNUM#O_TXNUM#LV_YW_IND#RESP_DATE#RCP_STS#RESP2#RETCODE#YW_DTL_ID#ACC_IND#REQ_TYPE#DF_FREEAMT#PROTNO#PO_NO#PO_TYPE#OTYPE');
	//debug_stru('#CMTNO#O_CMTNO#PAY_QS_NO#OR_BR_NO#SENDCO#PAY_OPN_BR_NO#PAY_AC_NO#PAY_NAME#PAY_ADDR#CASH_QS_NO#AC_BR_NO#RECECO#CASH_OPN_BR_NO#CASH_AC_NO#CASH_NAME#CASH_ADDR#YW_TYPE#ORDERNO#CONTENT#RATE#RATEDATE#OORDERNO#PROCODE#CR_DATE#CR_BR_NO#CR_TX_NUM#QR_BR_NO#QR_TX_NUM#TX_TYPE#NOTPAY_CONTENT#NOTPAY_ORDERNO#O_NOTPAY_ORDERNO#RESP1#OPERLEVEL#PROC_STS#OPCD#LW_IND#HP_ADD_PWD#PACKID#O_PACKID#PACK_DATE#O_PACK_DATE#TXNUM#O_TXNUM#LV_YW_IND#RESP_DATE#RCP_STS#RESP2#RETCODE#YW_DTL_ID#ACC_IND#REQ_TYPE#DF_FREEAMT#PROTNO#PO_NO#PO_TYPE#OTYPE');
	//showmsg('CMTNO             ='+#CMTNO             +']');
	//showmsg('O_CMTNO           ='+#O_CMTNO           +']');
	//showmsg('PAY_QS_NO         ='+#PAY_QS_NO         +']');
	//showmsg('OR_BR_NO          ='+#OR_BR_NO          +']');
	//showmsg('SENDCO            ='+#SENDCO            +']');
	//showmsg('PAY_OPN_BR_NO     ='+#PAY_OPN_BR_NO     +']');
	//showmsg('PAY_AC_NO         ='+#PAY_AC_NO         +']');
	//showmsg('PAY_NAME          ='+#PAY_NAME          +']');
	//showmsg('PAY_ADDR          ='+#PAY_ADDR          +']');
	//showmsg('CASH_QS_NO        ='+#CASH_QS_NO        +']');
	//showmsg('AC_BR_NO          ='+#AC_BR_NO          +']');
	//showmsg('RECECO            ='+#RECECO            +']');
	//showmsg('CASH_OPN_BR_NO    ='+#CASH_OPN_BR_NO    +']');
	//showmsg('CASH_AC_NO        ='+#CASH_AC_NO        +']');
	//showmsg('CASH_NAME         ='+#CASH_NAME         +']');
	//showmsg('CASH_ADDR         ='+#CASH_ADDR         +']');
	//showmsg('YW_TYPE           ='+#YW_TYPE           +']');
	//showmsg('ORDERNO           ='+#ORDERNO           +']');
	//showmsg('CONTENT           ='+#CONTENT           +']');
	//showmsg('RATE              ='+itoa(#RATE,'%7.0f')+']');
	//showmsg('RATEDATE          ='+#RATEDATE          +']');
	//showmsg('OORDERNO          ='+#OORDERNO          +']');
	//showmsg('PROCODE           ='+#PROCODE           +']');
	//showmsg('CR_DATE           ='+#CR_DATE           +']');
	//showmsg('CR_BR_NO          ='+#CR_BR_NO          +']');
	//showmsg('CR_TX_NUM         ='+#CR_TX_NUM         +']');
	//showmsg('QR_BR_NO          ='+#QR_BR_NO          +']');
	//showmsg('QR_TX_NUM         ='+#QR_TX_NUM         +']');
	//showmsg('TX_TYPE           ='+#TX_TYPE           +']');
	//showmsg('NOTPAY_CONTENT    ='+#NOTPAY_CONTENT    +']');
	//showmsg('NOTPAY_ORDERNO    ='+#NOTPAY_ORDERNO    +']');
	//showmsg('O_NOTPAY_ORDERNO  ='+#O_NOTPAY_ORDERNO  +']');
	//showmsg('RESP1             ='+#RESP1             +']');
	//showmsg('OPERLEVEL         ='+#OPERLEVEL         +']');
	//showmsg('PROC_STS          ='+#PROC_STS          +']');
	//showmsg('OPCD              ='+#OPCD              +']');
	//showmsg('LW_IND            ='+#LW_IND            +']');
	//showmsg('HP_ADD_PWD        ='+#HP_ADD_PWD        +']');
	//showmsg('PACKID            ='+#PACKID            +']');
	//showmsg('O_PACKID          ='+#O_PACKID          +']');
	//showmsg('PACK_DATE         ='+#PACK_DATE         +']');
	//showmsg('O_PACK_DATE       ='+#O_PACK_DATE       +']');
	//showmsg('TXNUM             ='+#TXNUM             +']');
	//showmsg('O_TXNUM           ='+#O_TXNUM           +']');
	//showmsg('LV_YW_IND         ='+#LV_YW_IND         +']');
	//showmsg('RESP_DATE         ='+#RESP_DATE         +']');
	//showmsg('RCP_STS           ='+#RCP_STS           +']');
	//showmsg('RESP2             ='+#RESP2             +']');
	//showmsg('RETCODE           ='+#RETCODE           +']');
	//showmsg('YW_DTL_ID         ='+#YW_DTL_ID         +']');
	//showmsg('ACC_IND           ='+#ACC_IND           +']');
	//showmsg('REQ_TYPE          ='+#REQ_TYPE          +']');
	//showmsg('DF_FREEAMT        ='+#DF_FREEAMT        +']');
	//showmsg('PROTNO            ='+#PROTNO            +']');
	//showmsg('PO_NO             ='+#PO_NO             +']');
	//showmsg('PO_TYPE           ='+#PO_TYPE           +']');
	//showmsg('OTYPE             ='+#OTYPE             +']');
}"
</USERFUN>
<USERFUN NAME="commrecv_1234">"{
	$FD123 = getitems('#RECECO#QSBRNO#TXAMT#SDATE#EDATE#IDRATE#SERATE#MORATE#ZFTXAMT#ZFNUM#DBTXAMT#DBNUM#MESTXAMT#MESNUM');
  }"
</USERFUN>
<USERFUN NAME="commrecv_12">"{
	$FD123 = getitems('#RECECO#RATE_TIME#OVER_AMT#RATE#OVER_INTR');
  }"
</USERFUN>
<!--小额支付结构-->
<USERFUN NAME="lvsend_123">"{
	$FD123 = getitems('#CRDB#OPCD#PKGNO#ORDERNO#TXNUM#OR_BR_NO#AC_BR_NO#TX_AMT#PAY_OPN_BR_NO#PAY_QS_NO#PAY_AC_NO#PAY_NAME#PAY_ADDR#PWD#CASH_QS_NO#CASH_OPN_BR_NO#CASH_AC_NO#CASH_NAME#CASH_ADDR#YW_TYPE#BRF#WT_DATE#OPERLEVEL#AUTH_TEL#AUTH_PWD#NOTE_TYPE#NOTE_NO#PACK_DATE#PACK_ID#CHRG_IND#CHRG_AMT#RESP_DAY#PO_TYPE#PO_DATE#PO_NUM#PC_TX_AMT#JF_TX_AMT#O_WT_DATE#O_TXNUM#O_ORDERNO#RET_CODE#RCP_STS#RESP1#RESP2#PACK_END#LV_STS#LW_IND#DFXYNO#OORBRNO#OACBRNO');
	//showmsg('lw_ind'+#LW_IND);
	//showmsg('dfxyno'+#DFXYNO);
	//showmsg('resp1'+#RESP1);
	//showmsg('resp2'+#RESP2);
}"
</USERFUN>
<!--小额包结构,这里为了区别其他域的字段，就在每个字段前添加了一个B-->
<USERFUN NAME="lvsend_125">"{
	//showmsg('1111111111111111111111');
	$FD125 = getitems('#BPACK_DATE#BPACKID#BPKGNO#BPAY_QS_NO#BCASH_QS_NO#BIN_DATE#BPACKMY#BDTLCNT#BTOTAMT#BZCNODE#BZC_DATE#BZCID#BHZ_DATE#BO_PACK_DATE#BO_PACKID#BDTLSUCCNT#BDTLSUCAMT#BO_PKGNO#BORNODE#BACNODE#BFFFLAG#BTXNUM#BBFFLAG#BQS_DATE#BPACKSTAT#BSTS#BBR_NO#BFILLER');
	//showmsg('lw_ind'+#BPACK_DATE);
	//showmsg('dfxyno'+#BPACKID);
	//showmsg('resp1'+#BPKGNO);
	//showmsg('resp2'+#BPAY_QS_NO);
}"
</USERFUN>
<!--大额公共要素结构-->
<USERFUN NAME="commsend_hv">"{
	$FD44 = #WT_DAY;
	$FD45 = #O_WT_DAY;
	$FD46 = #NOTPAY_DATE;
	$FD39 = itoa( #TX_AMT*100,'%016.0f');
	$FD21 = #CUR_NO;
	$FD69 = #TX_TYPE;
	$FD89 = #NOTE_TYPE;
	$FD58 = #NOTE_NO;
	$FD20 = #LW_IND;
}"
</USERFUN>
<USERFUN NAME="call_9986">"{
	dim @fd122 as string;
	commsend_001();
	$FD16='9986';
	$FD12=$TXNO;
	if(len($FD9)==11){
		$FD9=substr($FD9,0,10)+' ';
	}
	@fd122=$FD122;
	if(substr(@fd122,231,1)=='1'){
	$FD122='                                                                                                                                                                                                                                       1';
	}else {
	$FD122='';
	}
	callserver();
	$FD16=$TXNO;
	if($FD12!='0000'){
		showmsg(geterror());
	}
	if($FD12=='Z201'){
		if(opendlg('../xml/FEE.DLG')){
			return(true);
		}else{
			return(false);
		}
	}
	return(true);
}"
</USERFUN>
<USERFUN NAME="call_9986_1">"{
	dim @fd122 as string;
	commsend_001();
	$FD16='9986';
	$FD12=$TXNO;
	if(len($FD9)==11){
		$FD9=substr($FD9,0,10)+' ';
	}
	@fd122=$FD122;
	if(substr(@fd122,231,1)=='1'){
	$FD122='                                                                                                                                                                                                                                       1';
	}else {
	$FD122='';
	}
	callserver();
	$FD16=$TXNO;
	if($FD12!='0000'){
		showmsg(geterror());
	}
	if($FD12=='Z201'){
		if(opendlg('../xml/FEE3101.DLG')){
			return(true);
		}else{
			return(false);
		}
	}
	return(true);
}"
</USERFUN>
<USERFUN NAME="call_9986_card">"{
	dim @fd122 as string;
	commsend_001();
	$FD16='9986';
	if ($TXNO =='2405')
	{
		$TXNO ='3405';
	}
	//showmsg('call_9986_card_$TXNO='+$TXNO);
	$FD12=$TXNO;
	if(len($FD9)==11){
		$FD9=substr($FD9,0,10)+' ';
	}
	@fd122=$FD122;
	if(substr(@fd122,231,1)=='1'){
	$FD122='                                                                                                                                                                                                                                       1';
	}else {
	$FD122='';
	}
	callserver();
	$FD16=$TXNO;
	if($FD12!='0000'){
		showmsg(geterror());
	}
	if($FD12=='Z201'){
		if(opendlg('../xml/FEE_CARD.DLG')){
			return(true);
		}else{
			return(false);
		}
	}
	return(true);
}"
</USERFUN>
<USERFUN NAME="commrecv_123">"{
    setitems('#CMTNO#O_CMTNO#PAY_QS_NO#OR_BR_NO#SENDCO#PAY_OPN_BR_NO#PAY_AC_NO#PAY_NAME#PAY_ADDR#CASH_QS_NO#AC_BR_NO#RECECO#CASH_OPN_BR_NO#CASH_AC_NO#CASH_NAME#CASH_ADDR#YW_TYPE#ORDERNO#CONTENT#RATE#RATEDATE#OORDERNO#PROCODE#CR_DATE#CR_BR_NO#CR_TX_NUM#QR_BR_NO#QR_TX_NUM#TX_TYPE#NOTPAY_CONTENT#NOTPAY_ORDERNO#O_NOTPAY_ORDERNO#RESP1#OPERLEVEL#PROC_STS#OPCD#LW_IND#HP_ADD_PWD#PACKID#O_PACKID#PACK_DATE#O_PACK_DATE#TXNUM#O_TXNUM#LV_YW_IND#RESP_DATE#RCP_STS#RESP2#RETCODE#YW_DTL_ID#ACC_IND#REQ_TYPE#DF_FREEAMT#PROTNO#PO_NO#PO_TYPE#OTYPE',$FD123);
		#CMTNO     =rtrim(#CMTNO  );enable(#CMTNO    ,true);
    #O_CMTNO   =rtrim(#O_CMTNO);enable(#O_CMTNO  ,true);
    #PAY_QS_NO =rtrim(#PAY_QS_NO);enable(#PAY_QS_NO,true);
    #OR_BR_NO  =rtrim(#OR_BR_NO);enable(#OR_BR_NO ,true);
    #SENDCO    =rtrim(#SENDCO  );enable(#SENDCO   ,true);
    #PAY_OPN_BR_NO=rtrim(#PAY_OPN_BR_NO);enable(#PAY_OPN_BR_NO,true);
    #PAY_AC_NO =rtrim(#PAY_AC_NO);enable(#PAY_AC_NO ,true);
    #PAY_NAME  =rtrim(#PAY_NAME );enable(#PAY_NAME  ,true);
    #PAY_ADDR  =rtrim(#PAY_ADDR );enable(#PAY_ADDR  ,true);
    #CASH_QS_NO=rtrim(#CASH_QS_NO);enable(#CASH_QS_NO,true);
    #AC_BR_NO  =rtrim(#AC_BR_NO );enable(#AC_BR_NO  ,true);
    #RECECO    =rtrim(#RECECO   );enable(#RECECO    ,true);
    #CASH_OPN_BR_NO=rtrim(#CASH_OPN_BR_NO);enable(#CASH_OPN_BR_NO,true);
    #CASH_AC_NO=rtrim(#CASH_AC_NO);enable(#CASH_AC_NO,true);
    #CASH_NAME =rtrim(#CASH_NAME);enable(#CASH_NAME,true);
    #CASH_ADDR =rtrim(#CASH_ADDR);enable(#CASH_ADDR,true);
    #YW_TYPE   =rtrim(#YW_TYPE  );enable(#YW_TYPE  ,true);
    #ORDERNO   =rtrim(#ORDERNO  );enable(#ORDERNO  ,true);
    #CONTENT   =rtrim(#CONTENT  );enable(#CONTENT  ,true);
    #RATEDATE  =rtrim(#RATEDATE );enable(#RATEDATE ,true);
    #OORDERNO  =rtrim(#OORDERNO );enable(#OORDERNO ,true);
    #PROCODE   =rtrim(#PROCODE  );enable(#PROCODE  ,true);
    #CR_DATE   =rtrim(#CR_DATE  );enable(#CR_DATE  ,true);
    #CR_BR_NO  =rtrim(#CR_BR_NO );enable(#CR_BR_NO ,true);
    #CR_TX_NUM =rtrim(#CR_TX_NUM);enable(#CR_TX_NUM,true);
    #QR_BR_NO  =rtrim(#QR_BR_NO );enable(#QR_BR_NO ,true);
    #QR_TX_NUM =rtrim(#QR_TX_NUM);enable(#QR_TX_NUM,true);
    #TX_TYPE   =rtrim(#TX_TYPE  );enable(#TX_TYPE  ,true);
    #NOTPAY_CONTENT=rtrim(#NOTPAY_CONTENT);enable(#NOTPAY_CONTENT,true);
    #NOTPAY_ORDERNO=rtrim(#NOTPAY_ORDERNO);enable(#NOTPAY_ORDERNO,true);
    #O_NOTPAY_ORDERNO =rtrim(#O_NOTPAY_ORDERNO );enable(#O_NOTPAY_ORDERNO ,true);
    #RESP1    =rtrim(#RESP1    );enable(#RESP1    ,true);
    #OPERLEVEL=rtrim(#OPERLEVEL);enable(#OPERLEVEL,true);
    #PROC_STS =rtrim(#PROC_STS );enable(#PROC_STS ,true);
    #OPCD  =rtrim(#OPCD);enable(#OPCD  ,true);
    #LW_IND=rtrim(#LW_IND);enable(#LW_IND,true);
    #HP_ADD_PWD =rtrim(#HP_ADD_PWD);enable(#HP_ADD_PWD,true);
    #PACKID   =rtrim(#PACKID);enable(#PACKID,true);
    #PACK_DATE=rtrim(#PACK_DATE);enable(#PACK_DATE,true);
    #O_PACK_DATE=rtrim(#O_PACK_DATE);enable(#O_PACK_DATE,true);
    #TXNUM  =rtrim(#TXNUM  );enable(#TXNUM  ,true);
    #O_TXNUM=rtrim(#O_TXNUM);enable(#O_TXNUM,true);
    #LV_YW_IND=rtrim(#LV_YW_IND);enable(#LV_YW_IND,true);
    #RESP_DATE=rtrim(#RESP_DATE);enable(#RESP_DATE,true);
    #RCP_STS=rtrim(#RCP_STS);enable(#RCP_STS,true);
    #RESP2  =rtrim(#RESP2  );enable(#RESP2  ,true);
    #RETCODE=rtrim(#RETCODE);enable(#RETCODE,true);
    #YW_DTL_ID=rtrim(#YW_DTL_ID);enable(#YW_DTL_ID,true);
    #ACC_IND  =rtrim(#ACC_IND );enable(#ACC_IND ,true);
    #REQ_TYPE =rtrim(#REQ_TYPE);enable(#REQ_TYPE,true);
    #DF_FREEAMT=rtrim(#DF_FREEAMT);enable(#DF_FREEAMT,true);
    #PROTNO =rtrim(#PROTNO);enable(#PROTNO,true);
    #PO_NO  =rtrim(#PO_NO );enable(#PO_NO ,true);
    #PO_TYPE=rtrim(#PO_TYPE);enable(#PO_TYPE,true);
    #OTYPE  =rtrim(#OTYPE );enable(#OTYPE,true);
}"
</USERFUN>
<USERFUN NAME="lvrecv_123">"{
    setitems('#CRDB#OPCD#PKGNO#ORDERNO#TXNUM#OR_BR_NO#AC_BR_NO#TX_AMT#PAY_OPN_BR_NO#PAY_QS_NO#PAY_AC_NO#PAY_NAME#PAY_ADDR#PWD#CASH_QS_NO#CASH_OPN_BR_NO#CASH_AC_NO#CASH_NAME#CASH_ADDR#YW_TYPE#BRF#WT_DATE#OPERLEVEL#AUTH_TEL#AUTH_PWD#NOTE_TYPE#NOTE_NO#PACK_DATE#PACK_ID#CHRG_IND#CHRG_AMT#RESP_DAY#PO_TYPE#PO_DATE#PO_NUM#PC_TX_AMT#JF_TX_AMT#O_WT_DATE#O_TXNUM#O_ORDERNO#RET_CODE#RCP_STS#RESP1#RESP2#PACK_END#LV_STS#LW_IND#DFXYNO#OORBRNO#OACBRNO',$FD123);
    #CRDB            =rtrim(#CRDB          );enable(#CRDB          ,true);
		#OPCD            =rtrim(#OPCD          );enable(#OPCD          ,true);
		#PKGNO           =rtrim(#PKGNO         );enable(#PKGNO         ,true);
		#ORDERNO         =rtrim(#ORDERNO       );enable(#ORDERNO       ,true);
		#TXNUM           =rtrim(#TXNUM         );enable(#TXNUM         ,true);
		#OR_BR_NO        =rtrim(#OR_BR_NO      );enable(#OR_BR_NO      ,true);
		#AC_BR_NO        =rtrim(#AC_BR_NO      );enable(#AC_BR_NO      ,true);
	//	#TX_AMT          =rtrim(#TX_AMT        );enable(#TX_AMT        ,true);
		#PAY_OPN_BR_NO   =rtrim(#PAY_OPN_BR_NO );enable(#PAY_OPN_BR_NO ,true);
		#PAY_QS_NO       =rtrim(#PAY_QS_NO     );enable(#PAY_QS_NO     ,true);
		#PAY_AC_NO       =rtrim(#PAY_AC_NO     );enable(#PAY_AC_NO     ,true);
		#PAY_NAME        =rtrim(#PAY_NAME      );enable(#PAY_NAME      ,true);
		#PAY_ADDR        =rtrim(#PAY_ADDR      );enable(#PAY_ADDR      ,true);
		#PWD             =rtrim(#PWD           );enable(#PWD           ,true);
		#CASH_QS_NO      =rtrim(#CASH_QS_NO    );enable(#CASH_QS_NO    ,true);
		#CASH_OPN_BR_NO  =rtrim(#CASH_OPN_BR_NO);enable(#CASH_OPN_BR_NO,true);
		#CASH_AC_NO      =rtrim(#CASH_AC_NO    );enable(#CASH_AC_NO    ,true);
		#CASH_NAME       =rtrim(#CASH_NAME     );enable(#CASH_NAME     ,true);
		#CASH_ADDR       =rtrim(#CASH_ADDR     );enable(#CASH_ADDR     ,true);
		#YW_TYPE"        =rtrim(#YW_TYPE"      );enable(#YW_TYPE"      ,true);
		//showmsg('!!!! ywtype=='+#YW_TYPE);
		#BRF             =rtrim(#BRF           );enable(#BRF           ,true);
		#WT_DATE         =rtrim(#WT_DATE       );enable(#WT_DATE       ,true);
		#OPERLEVEL       =rtrim(#OPERLEVEL     );enable(#OPERLEVEL     ,true);
		#AUTH_TEL        =rtrim(#AUTH_TEL      );enable(#AUTH_TEL      ,true);
		#AUTH_PWD        =rtrim(#AUTH_PWD      );enable(#AUTH_PWD      ,true);
		#NOTE_TYPE       =rtrim(#NOTE_TYPE     );enable(#NOTE_TYPE     ,true);
		#NOTE_NO         =rtrim(#NOTE_NO       );enable(#NOTE_NO       ,true);
		#PACK_DATE       =rtrim(#PACK_DATE     );enable(#PACK_DATE     ,true);
		#PACK_ID         =rtrim(#PACK_ID       );enable(#PACK_ID       ,true);
		#CHRG_IND        =rtrim(#CHRG_IND      );enable(#CHRG_IND      ,true);
		#CHRG_AMT        =rtrim(#CHRG_AMT      );enable(#CHRG_AMT      ,true);
		#RESP_DAY        =rtrim(#RESP_DAY      );enable(#RESP_DAY      ,true);
		#PO_TYPE"        =rtrim(#PO_TYPE       );enable(#PO_TYPE      ,true);
		#PO_DATE"        =rtrim(#PO_DATE       );enable(#PO_DATE      ,true);
		#PO_NUM"         =rtrim(#PO_NUM"       );enable(#PO_NUM"       ,true);
		#PC_TX_AMT       =rtrim(#PC_TX_AMT     );enable(#PC_TX_AMT     ,true);
		#JF_TX_AMT       =rtrim(#JF_TX_AMT     );enable(#JF_TX_AMT     ,true);
		#O_WT_DATE       =rtrim(#O_WT_DATE     );enable(#O_WT_DATE     ,true);
		#O_TXNUM         =rtrim(#O_TXNUM       );enable(#O_TXNUM       ,true);
		#O_ORDERNO       =rtrim(#O_ORDERNO     );enable(#O_ORDERNO     ,true);
		#RET_CODE        =rtrim(#RET_CODE      );enable(#RET_CODE      ,true);
		#RCP_STS         =rtrim(#RCP_STS       );enable(#RCP_STS       ,true);
		#RESP1	         =rtrim(#RESP1	       );enable(#RESP1	       ,true);
		#RESP2           =rtrim(#RESP2         );enable(#RESP2         ,true);
		#PACK_END        =rtrim(#PACK_END      );enable(#PACK_END      ,true);
		#LV_STS          =rtrim(#LV_STS        );enable(#LV_STS        ,true);
		#LW_IND          =rtrim(#LW_IND        );enable(#LW_IND        ,true);
		#DFXYNO          =rtrim(#DFXYNO        );enable(#DFXYNO      ,true);
		#OORBRNO          =rtrim(#OORBRNO        );enable(#OORBRNO        ,true);
		#OACBRNO          =rtrim(#OACBRNO        );enable(#OACBRNO      ,true);
   }"
</USERFUN>

<USERFUN NAME="lvrecv_125">"{
    setitems('#BPACK_DATE#BPACKID#BPKGNO#BPAY_QS_NO#BCASH_QS_NO#BIN_DATE#BPACKMY#BDTLCNT#BTOTAMT#BZCNODE#BZC_DATE#BZCID#BHZ_DATE#BO_PACK_DATE#BO_PACKID#BDTLSUCCNT#BDTLSUCAMT#BO_PKGNO#BORNODE#BACNODE#BFFFLAG#BTXNUM#BBFFLAG#BQS_DATE#BPACKSTAT#BSTS#BBR_NO#BFILLER',$FD125);
    #BPACK_DATE   = rtrim(#BPACK_DATE  ); enable(#BPACK_DATE   ,true);
    #BPACKID      = rtrim(#BPACKID     ); enable(#BPACKID      ,true);
    #BPKGNO       = rtrim(#BPKGNO      ); enable(#BPKGNO       ,true);
    #BPAY_QS_NO   = rtrim(#BPAY_QS_NO  ); enable(#BPAY_QS_NO   ,true);
    #BCASH_QS_NO  = rtrim(#BCASH_QS_NO ); enable(#BCASH_QS_NO  ,true);
    #BIN_DATE     = rtrim(#BIN_DATE    ); enable(#BIN_DATE     ,true);
    #BPACKMY      = rtrim(#BPACKMY     ); enable(#BPACKMY      ,true);
    #BDTLCNT      = rtrim(#BDTLCNT     ); enable(#BDTLCNT      ,true);
    #BTOTAMT      = rtrim(#BTOTAMT     ); enable(#BTOTAMT      ,true);
    #BZCNODE      = rtrim(#BZCNODE     ); enable(#BZCNODE      ,true);
    #BZC_DATE     = rtrim(#BZC_DATE    ); enable(#BZC_DATE     ,true);
    #BZCID        = rtrim(#BZCID       ); enable(#BZCID        ,true);
    #BHZ_DATE     = rtrim(#BHZ_DATE    ); enable(#BHZ_DATE     ,true);
    #BO_PACK_DATE = rtrim(#BO_PACK_DATE); enable(#BO_PACK_DATE ,true);
    #BO_PACKID    = rtrim(#BO_PACKID   ); enable(#BO_PACKID    ,true);
    #BDTLSUCCNT   = rtrim(#BDTLSUCCNT  ); enable(#BDTLSUCCNT   ,true);
    #BDTLSUCAMT   = rtrim(#BDTLSUCAMT  ); enable(#BDTLSUCAMT   ,true);
    #BO_PKGNO     = rtrim(#BO_PKGNO    ); enable(#BO_PKGNO     ,true);
    #BORNODE      = rtrim(#BORNODE     ); enable(#BORNODE      ,true);
    #BACNODE      = rtrim(#BACNODE     ); enable(#BACNODE      ,true);
    #BFFFLAG      = rtrim(#BFFFLAG     ); enable(#BFFFLAG      ,true);
    #BTXNUM       = rtrim(#BTXNUM      ); enable(#BTXNUM       ,true);
    #BBFFLAG      = rtrim(#BBFFLAG     ); enable(#BBFFLAG      ,true);
    #BQS_DATE     = rtrim(#BQS_DATE    ); enable(#BQS_DATE     ,true);
    #BPACKSTAT    = rtrim(#BPACKSTAT   ); enable(#BPACKSTAT    ,true);
    #BSTS         = rtrim(#BSTS        ); enable(#BSTS         ,true);
    #BBR_NO       = rtrim(#BBR_NO      ); enable(#BBR_NO       ,true);
    #BFILLER      = rtrim(#BFILLER     ); enable(#BFILLER      ,true);
   }"
</USERFUN>
<USERFUN NAME="commrecv_v123">"{
    setitems('#CMTNO#O_CMTNO#PAY_QS_NO#OR_BR_NO#SENDCO#PAY_OPN_BR_NO#PAY_AC_NO#PAY_NAME#PAY_ADDR#CASH_QS_NO#AC_BR_NO#RECECO#CASH_OPN_BR_NO#CASH_AC_NO#CASH_NAME#CASH_ADDR#YW_TYPE#ORDERNO#CONTENT#RATE#RATEDATE#OORDERNO#PROCODE#CR_DATE#CR_BR_NO#CR_TX_NUM#QR_BR_NO#QR_TX_NUM#TX_TYPE#NOTPAY_CONTENT#NOTPAY_ORDERNO#O_NOTPAY_ORDERNO#RESP1#OPERLEVEL#PROC_STS#OPCD#LW_IND#HP_ADD_PWD#PACKID#PACK_DATE#O_PACK_DATE#TXNUM#O_TXNUM#LV_YW_IND#RESP_DATE#RCP_STS#RESP2#RETCODE#YW_DTL_ID#ACC_IND#REQ_TYPE#DF_FREEAMT#PROTNO#PO_NO#PO_TYPE#OTYPE',$FD123);
}"
</USERFUN>

<USERFUN NAME="lv_reset_item">"{
	#OPCD  = '10';
	#OTYPE = '1';
	#WT_DAY = $HDATE;
	#LW_IND = '1';
	}"
</USERFUN>
<USERFUN NAME="printacdtl_1">"{ //为了使打印格式与凭证格式匹配
	dim @fd123 as string;
	dim @fd4 as string;
	dim @cnt as number;
	dim @id as number;
	dim @dracno as string;
	dim @cracno as string;
	dim @dramt as string;
	dim @cramt as string;
	dim @dramt_sign as string;
	dim @cramt_sign as string;
	dim @equa_ind as string;
	savefds('../tmp/'+$KINBR+$TTYNAME+'.fds');//保存fd变量
	@fd4=$FD4;
	initfd();
	commsend_001();
	$FD16='9550';
	$FD4=@fd4;
	setnomsg();
	callserver();
	setmsg();
	if($FD12!='0000'){
		print(lineno()+1,20,'取得分录信息失败!');
		loadfds('../tmp/'+$KINBR+$TTYNAME+'.fds');//恢复fd变量
		return(false);
	}
	@fd123=$FD123;
	loadfds('../tmp/'+$KINBR+$TTYNAME+'.fds');//恢复fd变量
	//print(lineno()+1,37,'\[会计分录\]');
	@cnt=val(substr(@fd123,0,2));
	@id=0;
 	print(lineno()+2,10,'[50]',space(50));
	while(@id &lt; @cnt){
		@equa_ind=substr(@fd123,2+@id*47,1);
		@dracno=substr(@fd123,2+@id*47+1,7);
		@dramt=substr(@fd123,2+@id*47+8,16);
		if(substr(@dramt,0,1)=='-'){
			@dramt_sign='-';
			@dramt=substr(@dramt,1,15);
		}else{
			@dramt_sign=' ';
		}
		@cracno=substr(@fd123,2+@id*47+24,7);
		@cramt=substr(@fd123,2+@id*47+31,16);
		if(substr(@cramt,0,1)=='-'){
			@cramt_sign='-';
			@cramt=substr(@cramt,1,15);
		}else{
			@cramt_sign=' ';
		}
		if(@equa_ind=='N'){
			/****收付****/
			if(substr(@dracno,0,1)==' '){
				/***只有收***/
				print(lineno()+1,48,'收:([7    ])[7]  [1][20                 ]',@cracno,space(7),@cramt_sign,delspace(comma(@cramt,21)));

			}else{
				/***只有付***/
				print(lineno()+1,20,'付:([7    ])[35]  [1][20                 ]',@dracno,space(35),@dramt_sign,delspace(comma(@dramt,21)));
			}
			@id=@id+1;
		}else{
			if(delspace(@dracno)!=''){
				print(lineno()+1,20,'借:([7    ])[35]  [1][20                 ]',@dracno,space(35),@dramt_sign,delspace(comma(@dramt,21)));
			}
			if(delspace(@cracno)!=''){
				print(lineno()+1,48,'贷:([7    ])[7]  [1][20                 ]',@cracno,space(7),@cramt_sign,delspace(comma(@cramt,21)));
			}
			@id=@id+1;
		}
	}
	return(true);
}"
</USERFUN>
<!--
<USERFUN NAME="print_sq">"{ //打印授权信息
	dim @auth_no as string;
	dim @auth as string;
	dim @auth_num as string;
	loadfds('../tmp/tmp'+$KINBR+$TTYNAME+'.fmp');//恢复fd变量
	@auth_no=substr($FD14,1,7);
	if((substr($FD9,0,3) == '@@@') and (substr($FD9,3,1) == '1')) //第3种授权方式
	{

		@auth_num=substr($FD9,3,7);
	loadfds('../tmp/tmp'+$KINBR+@auth_num+'.sq');
		print(lineno()+1,20,'授权流水号:[7]       授权码:[7]       授权柜员:[4]',@auth_no,@auth_num,$FD7);
		return(true);
	}
	if((substr($FD9,0,3) == '@@@') and (substr($FD9,3,1) == '3'))//第2种授权方式
	{
	loadfds('../tmp/tmp'+$KINBR+@auth_no+'.sq');

	print(lineno()+1,20,'授权流水号:[7]      授权码:[7]       授权柜员:[4]',@auth_no,@auth_no,$FD7);
		return(true);
	}
		@auth=substr($FD9,0,4);
	print(lineno()+1,20,'授权流水号:[7]      授权柜员:[4]',@auth_no,@auth);
		return(true);
}"
</USERFUN>
-->
<!--added by lyz-->
<USERFUN NAME="print_sq">"{ //打印授权信息
dim @auth_no as string;
	dim @auth as string;
	dim @auth_num as string;
	dim @f as file;
	dim @line as string;
	dim @fd27 as string;//com_tel_change.name
	dim @fd34 as string;
	dim @b as string;
	dim @fd68 as string;
	//解决授权打印问题，在文件名中加$TXNO以区别 20080927 martin
	savefds('../tmp/'+$KINBR+'-'+$TLRNO+'-'+$TTYNAME+'.tmp');//保存fd变量
	@f=openfile('../tmp/tmp'+$KINBR+'-'+$TLRNO+'-'+$TTYNAME+'-'+$TXNO+'.tmp','a');//授权修改 20080927 martin
	closefile(@f);
	@f=openfile('../tmp/tmp'+$KINBR+'-'+$TLRNO+'-'+$TTYNAME+'-'+$TXNO+'.tmp','r');//授权修改 20080927 martin
	@line=readline(@f);
	@b=substr(@line,0,1);

	if(@b=='b')
	{
	  if(substr(@line,1,1)=='1')
	  {
		@auth_num=substr(@line,8,7);
		@auth_no=substr(@line,1,7);
		initfd();
		commsend_001();
		$FD14=@auth_no;
		$FD28=@auth_num;
		$FD20='3';
		$FD16='9555';
		setnomsg();
		callserver();
		setmsg();
		if($FD12 != '0000'){
			//print(lineno()+1,20,'3取得授权信息失败!');
			loadfds('../tmp/'+$KINBR+'-'+$TLRNO+'-'+$TTYNAME+'.tmp');//保存fd变量
			closefile(@f);
			@f=openfile('../tmp/tmp'+$KINBR+'-'+$TLRNO+'-'+$TTYNAME+'-'+$TXNO+'.tmp','w');//授权修改 20081118 martin
			writeline(@f,' ');
			closefile(@f);
			return(false);
		}
		@fd27=$FD27;
		@fd34=$FD34;
		@fd68=$FD68;
		loadfds('../tmp/'+$KINBR+'-'+$TLRNO+'-'+$TTYNAME+'.tmp');//保存fd变量
		if(@fd68 != '0')
		{
			print(lineno()+1,20,'授权流水号:[7]      授权码:[7]       授权柜员:[8][10]',@auth_num,@auth_no,@fd34,@fd27);
		}
	  }
	if(substr(@line,1,1)=='3')//第2种授权方式
	{
		@auth_num=substr(@line,8,7);
		@auth_no=substr(@line,1,7);
		initfd();
		commsend_001();
		$FD14=@auth_no;
		$FD20='2';
		$FD16='9555';
		setnomsg();
		callserver();
		setmsg();
		if($FD12 !='0000'){
			//print(lineno()+1,20,'2取得授权信息失败!');
			closefile(@f);
			@f=openfile('../tmp/tmp'+$KINBR+'-'+$TLRNO+'-'+$TTYNAME+'-'+$TXNO+'.tmp','w');//授权修改 20081118 martin
			writeline(@f,' ');
			closefile(@f);
			loadfds('../tmp/'+$KINBR+'-'+$TLRNO+'-'+$TTYNAME+'.tmp');//保存fd变量
			return(false);
		}
		@fd27=$FD27;
		@fd34=$FD34;
		@fd68=$FD68;
		loadfds('../tmp/'+$KINBR+'-'+$TLRNO+'-'+$TTYNAME+'.tmp');//保存fd变量
		if(@fd68 != '0')
		{
			print(lineno()+1,20,'授权流水号:[7]      授权码:[7]       授权柜员:[4][10]',@auth_num,@auth_no,@fd34,@fd27);
	  	}
	  }
	}
	else if(@b=='a')
	{
		@auth=substr(@line,1,4);
		@auth_num=substr(@line,5,7);
		initfd();
		commsend_001();
		$FD14=@auth_num;
		$FD20='1';
		$FD16='9555';
		setnomsg();
		callserver();
		setmsg();
		if($FD12 !='0000'){
			//print(lineno()+1,20,'1取得授权信息失败!');
			loadfds('../tmp/'+$KINBR+'-'+$TLRNO+'-'+$TTYNAME+'.tmp');//保存fd变量
			closefile(@f);
			@f=openfile('../tmp/tmp'+$KINBR+'-'+$TLRNO+'-'+$TTYNAME+'-'+$TXNO+'.tmp','w');//授权修改 20081118 martin
			writeline(@f,' ');
			closefile(@f);
			return(false);
		}
		@fd27=$FD27;
		@fd68=$FD68;
		loadfds('../tmp/'+$KINBR+'-'+$TLRNO+'-'+$TTYNAME+'.tmp');//保存fd变量
		if(@fd68 != '0')
		{
			print(lineno()+1,20,'授权流水号:[7]      授权柜员:[4][10] ',@auth_num,@auth,@fd27);
		}
	}

	closefile(@f);
	@f=openfile('../tmp/tmp'+$KINBR+'-'+$TLRNO+'-'+$TTYNAME+'-'+$TXNO+'.tmp','w');//授权修改 20081118 martin
	writeline(@f,' ');
	closefile(@f);
	return(true);
}"
</USERFUN>
<USERFUN NAME="printacdtl_h">"{ //取消交易打印分录
	dim @fd123 as string;
	dim @cnt as number;
	dim @id as number;
	dim @dracno as string;
	dim @cracno as string;
	dim @dramt as string;
	dim @cramt as string;
	dim @dramt_sign as string;
	dim @cramt_sign as string;
	dim @equa_ind as string;
	dim @fd4 as string;
	savefds('../tmp/'+$KINBR+$TTYNAME+'.fds');//保存fd变量
	@fd4=itoa(val($FD44),'%06.0f');
	initfd();
	commsend_001();
	$FD16='9550';
	$FD4=@fd4;
	setnomsg();
	callserver();
	setmsg();
	if($FD12!='0000'){
		print(lineno()+1,20,'取得分录信息失败!');
		loadfds('../tmp/'+$KINBR+$TTYNAME+'.fds');//恢复fd变量
		return(false);
	}
	@fd123=$FD123;
	loadfds('../tmp/'+$KINBR+$TTYNAME+'.fds');//恢复fd变量
	//print(lineno()+1,37,'\[会计分录\]');
	@cnt=val(substr(@fd123,0,2));
	@id=0;
 	print(lineno()+2,10,'[50]',space(50));
	while(@id &lt; @cnt){
		@equa_ind=substr(@fd123,2+@id*47,1);
		@dracno=substr(@fd123,2+@id*47+1,7);
		@dramt=substr(@fd123,2+@id*47+8,16);
		//反交易的正负号要反过来
		if(substr(@dramt,0,1)=='-'){
			@dramt_sign=' ';
			@dramt=substr(@dramt,1,15);
		}else{
			@dramt_sign='-';
		}
		@cracno=substr(@fd123,2+@id*47+24,7);
		@cramt=substr(@fd123,2+@id*47+31,16);
		if(substr(@cramt,0,1)=='-'){
			@cramt_sign=' ';
			@cramt=substr(@cramt,1,15);
		}else{
			@cramt_sign='-';
		}
		if(@equa_ind=='N'){
			/****收付****/
			if(substr(@dracno,0,1)==' '){
				/***只有收***/
				print(lineno()+2,20,'收:([7    ])[35]  [1][20                 ]',@cracno,space(35),@cramt_sign,delspace(comma(@cramt,21)));

			}else{
				/***只有付***/
				print(lineno()+2,20,'付:([7    ])[35]  [1][20                 ]',@dracno,space(35),@dramt_sign,delspace(comma(@dramt,21)));
			}
			@id=@id+1;
		}else{
			if(delspace(@dracno)!=''){
				print(lineno()+1,20,'借:([7    ])[35]  [1][20                 ]',@dracno,space(35),@dramt_sign,delspace(comma(@dramt,21)));
			}
			if(delspace(@cracno)!=''){
				print(lineno()+1,48,'贷:([7    ])[7]  [1][21                 ]',@cracno,space(7),@cramt_sign,delspace(comma(@cramt,21)));
			}
			@id=@id+1;
		}
	}
	return(true);
}"
</USERFUN>

<USERFUN NAME="HV_SET_STAT">"{
	switch(#TMP_TXSTAT)
	{
		case '0':
			#TXSTAT	= '往账记账(复核)';
			break;
		case '1':
			#TXSTAT	= '往账发送';
			break;
		case '2':
			#TXSTAT	= '往账记账清算';
			break;
		case '3':
			#TXSTAT	= '往账退回记账';
			break;
		case '4':
			#TXSTAT	= '往账退回等待';
			break;
		case '5':
			#TXSTAT	= '往账拒绝';
			break;
		case '6':
			#TXSTAT	= '往账撤销记账';
			break;
		case '7':
			#TXSTAT	= '往账撤销等待';
			break;
		case '8':
			#TXSTAT	= '来账拒绝';
			break;
		case '9':
			#TXSTAT	= '来账记账清算';
			break;
		case 'A':
			#TXSTAT	= '往账登记取消';
			break;
		case 'B':
			#TXSTAT	= '来账退回';
			break;
		case 'C':
			#TXSTAT	= '往帐登记(不记账)';
			break;
		case 'D':
			#TXSTAT	= '往账复核取消';
			break;
		case 'E':
			#TXSTAT	= '来账记账登记';
			break;
		case 'F':
			#TXSTAT	= '来账核地方押错';
			break;
		case 'G':
			#TXSTAT	= '来账核全国押错';
			break;
		case 'H':
			#TXSTAT	= '清算中心挂帐';
			break;
		case 'I':
			#TXSTAT	= '支行挂帐';
			break;
		case 'J':
			#TXSTAT	= '往账排队';
			break;
		case 'K':
			#TXSTAT	= '核对清算记帐';
			break;
		default:
			#TXSTAT	= '未知状态';
	}

    }"
</USERFUN>



<USERFUN NAME="HV_SET_CMTNAME">"{
	switch(#CMTNO)
	{
		case '100':
			#CMTNO_DES = '大额汇兑【100】';
			break;
		case '103':
			#CMTNO_DES = '国库资金汇划【103】';
			break;
		case '101':
			#CMTNO_DES = '委托收款【101】';
			break;
		case '105':
			#CMTNO_DES = '同业拆借【105】';
			break;
		case '102':
			#CMTNO_DES = '托收承付【102】';
			break;
		case '109':
			#CMTNO_DES = '电子联行【109】';
			break;
		case '108':
			#CMTNO_DES = '支付退汇【108】';
			break;
		case '313':
			#CMTNO_DES = '申请退回【313】';
			break;
		case '314':
			#CMTNO_DES = '退回应答【314】';
			break;
		case '301':
			#CMTNO_DES = '大额查询【301】';
			break;
		case '302':
			#CMTNO_DES = '大额查复【302】';
			break;
		case '303':
			#CMTNO_DES = '自由格式【303】';
			break;
		case '311':
			#CMTNO_DES = '申请撤销【311】';
			break;
		case '407':
			#CMTNO_DES = '质押融资【407】';
			break;
		case '408':
			#CMTNO_DES = '质押融资扣款【408】';
			break;
		case '121':
			#CMTNO_DES = '资金移存【121】';
			break;
		case '721':
			#CMTNO_DES = '申请资金清算【721】';
			break;
		case '123':
			#CMTNO_DES = '多余资金退回【123】';
			break;
		case '725':
			#CMTNO_DES = '全额兑付通知【725】';
			break;
		case '724':
			#CMTNO_DES = '汇票申请退回【724】';
			break;
		case '124':
			#CMTNO_DES = '汇票未用退回【124】';
			break;
		default:
			#CMTNO_DES = '未知业务类型【000】';
	}
 }"
</USERFUN>

<USERFUN NAME="BIG5">
"{
	dim @hdate  as string; //日期
	dim @year   as string; //年
	dim @month  as string; //月
	dim @day    as string; //日
	dim @byear  as string; //大写年
	dim @bmonth as string; //大写月
	dim @bday   as string; //大写日
	dim @i      as number;


	@hdate = #COMMDAY;       //XML中传入的日期
	@year  = substr(@hdate,0,4);
	@month = substr(@hdate,4,2);
	@day   = substr(@hdate,6,2);
	while(@i &lt; 4)
	{
		switch(substr(@year,@i,1)) //判断年如何取大写
		{
			case '0':
				@byear = @byear+'零';
				break;
			case '1':
				@byear = @byear+'壹';
				break;
			case '2':
				@byear = @byear+'贰';
				break;
			case '3':
				@byear = @byear+'叁';
				break;
			case '4':
				@byear = @byear+'肆';
				break;
			case '5':
				@byear = @byear+'伍';
				break;
			case '6':
				@byear = @byear+'陆';
				break;
			case '7':
				@byear = @byear+'柒';
				break;
			case '8':
				@byear = @byear+'捌';
				break;
			case '9':
				@byear = @byear+'玖';
				break;
		}
		@i = @i + 1;
	}

	switch(@month)   //判断月如何取大写
	{
		case '01':
			@bmonth = '  零壹';
			break;
		case '02':
			@bmonth = '  零贰';
			break;
		case '03':
			@bmonth = '  零叁';
			break;
		case '04':
			@bmonth = '  零肆';
			break;
		case '05':
			@bmonth = '  零伍';
			break;
		case '06':
			@bmonth = '  零陆';
			break;
		case '07':
			@bmonth = '  零柒';
			break;
		case '08':
			@bmonth = '  零捌';
			break;
		case '09':
			@bmonth = '  零玖';
			break;
		case '10':
			@bmonth = '零壹拾';
			break;
		case '11':
			@bmonth = '壹拾壹';
			break;
		case '12':
			@bmonth = '壹拾贰';
			break;
	}

	switch(@day)    //判断日如何取大写
	{
		case '01':
			@bday = '  零壹';
			break;
		case '02':
			@bday = '  零贰';
			break;
		case '03':
			@bday = '  零叁';
			break;
		case '04':
			@bday = '  零肆';
			break;
		case '05':
			@bday = '  零伍';
			break;
		case '06':
			@bday = '  零陆';
			break;
		case '07':
			@bday = '  零柒';
			break;
		case '08':
			@bday = '  零捌';
			break;
		case '09':
			@bday = '  零玖';
			break;
		case '10':
			@bday = '零壹拾';
			break;
		case '11':
			@bday = '壹拾壹';
			break;
		case '12':
			@bday = '壹拾贰';
			break;
		case '13':
			@bday = '壹拾叁';
			break;
		case '14':
			@bday = '壹拾肆';
			break;
		case '15':
			@bday = '壹拾伍';
			break;
		case '16':
			@bday = '壹拾陆';
			break;
		case '17':
			@bday = '壹拾柒';
			break;
		case '18':
			@bday = '壹拾捌';
			break;
		case '19':
			@bday = '壹拾玖';
			break;
		case '20':
			@bday = '零贰拾';
			break;
		case '21':
			@bday = '贰拾壹';
			break;
		case '22':
			@bday = '贰拾贰';
			break;
		case '23':
			@bday = '贰拾叁';
			break;
		case '24':
			@bday = '贰拾肆';
			break;
		case '25':
			@bday = '贰拾伍';
			break;
		case '26':
			@bday = '贰拾陆';
			break;
		case '27':
			@bday = '贰拾柒';
			break;
		case '28':
			@bday = '贰拾捌';
			break;
		case '29':
			@bday = '贰拾玖';
			break;
		case '30':
			@bday = '零叁拾';
			break;
		case '31':
			@bday = '叁拾壹';
			break;
	}

	#BIGDAY = @byear+@bmonth+@bday;
}"
</USERFUN>

<USERFUN NAME="HV_SET_POSTS_NAME">
"{
	switch(#PO_STS)
	{
		case '0':
			#PO_STS_DESP = '登记';
			break;
		case '1':
			#PO_STS_DESP = '签发';
			break;
		case '2':
			#PO_STS_DESP = '汇票移存';
			break;
		case '3':
			#PO_STS_DESP = '申请兑付';
			break;
		case '4':
			#PO_STS_DESP = '汇票兑付';
			break;
		case '5':
			#PO_STS_DESP = '全额结清';
			break;
		case '6':
			#PO_STS_DESP = '部分退回';
			break;
		case '7':
			#PO_STS_DESP = '未用退回';
			break;
		case '8':
			#PO_STS_DESP = '汇票解付';
			break;
		case '9':
			#PO_STS_DESP = '签发取消';
			break;
		case 'A':
			#PO_STS_DESP = '解付取消';
			break;
		case 'B':
			#PO_STS_DESP = '发送';
			break;
		case 'C':
			#PO_STS_DESP = '申请兑付取消';
			break;
		case 'D':
			#PO_STS_DESP = '汇票登记取消';
			break;
		case 'E':
			#PO_STS_DESP = '挂失';
			break;
		case 'F':
			#PO_STS_DESP = '解挂失';
			break;
		case 'G':
			#PO_STS_DESP = '逾期未用退回';
			break;
		case 'H':
			#PO_STS_DESP = '未用解';
			break;
		case 'I':
			#PO_STS_DESP = '未用冲帐冲帐';
			break;
		default:
			#PO_STS_DESP = '未知状态';

	}
}"
</USERFUN>

<USERFUN NAME="LV_SET_STAT">"{
	switch(#TMP_TXSTAT)
	{
	case '0':
		#TXSTAT = '无效状态' ;
	        break;
	case '1':
		#TXSTAT = '往账录入' ;
	        break;
	case '3':
		#TXSTAT = '往账复核' ;
	        break;
	case '4':
		#TXSTAT = '往账发送' ;
	        break;
	case '5':
		#TXSTAT = '往账拒绝' ;
	        break;
	case '6':
		#TXSTAT = '往账扎差' ;
	        break;
	case '7':
		#TXSTAT = '往账排队' ;
	        break;
	case '8':
		#TXSTAT = '往账撤销等待' ;
	        break;
	case '9':
		#TXSTAT = '往账撤销' ;
	        break;
	case 'A':
		#TXSTAT = '退回冲正止付等待' ;
	        break;
	case 'B':
		#TXSTAT = '往账退回' ;
	        break;
	case 'C':
		#TXSTAT = '往账已冲正' ;
	        break;
	case 'D':
		#TXSTAT = '往账已止付' ;
	        break;
	case 'G':
		#TXSTAT = '往账异常挂帐' ;
	        break;
	case 'H':
		#TXSTAT = '临时接收,不记帐' ;
	        break;
	case 'I':
		#TXSTAT = '正式接收' ;
	        break;
	case 'J':
		#TXSTAT = '全国押错' ;
	        break;
	case 'K':
		#TXSTAT = '地方押错' ;
	        break;
	case 'L':
		#TXSTAT = '全国押和地方押都错' ;
	        break;
	case 'M':
		#TXSTAT = '清算中心挂帐' ;
	        break;
	case 'N':
		#TXSTAT = '支行挂帐' ;
	        break;
	case 'O':
		#TXSTAT = '来账退回等待' ;
	        break;
	case 'P':
		#TXSTAT = '来账退回' ;
	        break;
	case 'Q':
		#TXSTAT = '同意未发送' ;
	        break;
	case 'R':
		#TXSTAT = '同意已发送' ;
	        break;
	case 'S':
		#TXSTAT = '不同意未发送' ;
	        break;
	case 'T':
		#TXSTAT = '不同意已发送' ;
	        break;
	case 'U':
		#TXSTAT = '来账已冲正' ;
	        break;
	case 'V':
		#TXSTAT = '来账已止付' ;
	        break;
	case 'W':
		#TXSTAT = '来账已付款' ;
	        break;
	case 'Z':
		#TXSTAT = '来账异常挂帐' ;
	        break;
	default:
		#TXSTAT = '未知状态' ;
	}

    }"
</USERFUN>
<USERFUN NAME="LV_SET_RCPSTAT">"{
	switch(#TMP_RCPSTAT)
	{
		case '00':
			#RCPSTAT = '成功';
			break;
		case '01':
			#RCPSTAT = '帐号不符';
			break;
		case '02':
			#RCPSTAT = '帐号户名不符';
			break;
		case '03':
			#RCPSTAT = '账户余额不足支付';
			break;
		case '09':   //wangyongwei  20070621
			#RCPSTAT = '对方退票';
			break;
		case '10':
			#RCPSTAT = '账户密码错误';
			break;
		case '11':
			#RCPSTAT = '帐号状态错误';
			break;
		case '20':
			#RCPSTAT = '业务已撤销';
			break;
		case '90':
			#RCPSTAT = '其他错误';
			break;
		case '21':
			#RCPSTAT ='大小写金额不符  ';
			break;
		case '22':
			#RCPSTAT ='支票记载事项不全';
			break;
		case '23':
			#RCPSTAT ='出票人签章不符  ';
			break;
		case '24':
			#RCPSTAT ='支付密码错误    ';
			break;
		case '25':
			#RCPSTAT ='持票人未做背书  ';
			break;
		case '26':
			#RCPSTAT ='支票影像不相符  ';
			break;
		case '27':
			#RCPSTAT ='出票人帐号户名错';
			break;
		case '28':
			#RCPSTAT ='出票人余额不足  ';
			break;
		case '29':
			#RCPSTAT ='重复提示付款    ';
			break;
		case '30':
			#RCPSTAT ='非本行票据      ';
			break;
		case '31':
			#RCPSTAT ='出票人已销户    ';
			break;
		case '32':
			#RCPSTAT ='出票人帐户已冻结';
			break;
		case '33':
			#RCPSTAT ='出票人帐户已止付';
			break;
		case '34':
			#RCPSTAT ='业务已经申请止付';
			break;
		case '35':
			#RCPSTAT ='数字签名或证书错';
			break;
		case '40':  // add by NEWBP4
			#RCPSTAT ='本票号码不符';
			break;
		case '41':
			#RCPSTAT ='收款人户名不符';
			break;
		case '42':
			#RCPSTAT ='出票日期不符';
			break;
		case '43':
			#RCPSTAT ='密押不符';
			break;
		case '44':
			#RCPSTAT ='金额不符';
			break;
		case '45':
			#RCPSTAT ='超过提示付款日';
			break;
		case '48':
			#RCPSTAT ='本票已挂失止付或收到法院通知';
			break; //end by NEWBP4
		default:
			#RCPSTAT = '没有回执';
	}
}"
</USERFUN>
<USERFUN NAME="LV_SET_CMTNAME">"{

	switch(#CMTNO)
	{
	case '001':
		#CMT_DES = '普通贷记';
		break;
	case '002':
		#CMT_DES = '普通借记';
	        break;
	case '003':
		#CMT_DES = '实时贷记';
	        break;
	case '004':
		#CMT_DES = '实时借记';
	        break;
	case '005':
		#CMT_DES = '定期贷记';
	        break;
	case '006':
		#CMT_DES = '定期借记';
	        break;
	case '007':
		#CMT_DES = '贷记退汇';
	        break;
	case '008':
		#CMT_DES = '普通借记回执';
	        break;
	case '009':
		#CMT_DES = '实时贷记回执';
	        break;
	case '010':
		#CMT_DES = '实时借记回执';
	        break;
	case '011':
		#CMT_DES = '定期借记回执';
	        break;
	case '012':
		#CMT_DES = '通用信息';
	        break;
	case '013':
		#CMT_DES = '实时信息';
	        break;
	case '301':
		#CMT_DES = '小额查询';
	        break;
	case '302':
		#CMT_DES = '小额查复';
	        break;
	case '303':
		#CMT_DES = '自由格式';
	        break;
	case '319':
		#CMT_DES = '申请退回';
	        break;
	case '320':
		#CMT_DES = '退回应答';
	        break;
	case '321':
		#CMT_DES = '申请撤销';
	        break;
	case '322':
		#CMT_DES = '撤销应答';
	        break;
	case '323':
		#CMT_DES = '冲正申请';
	        break;
	case '324':
		#CMT_DES = '冲正应答';
	        break;
	case '325':
		#CMT_DES = '冲正通知';
	        break;
	case '327':
		#CMT_DES = '止付申请';
	        break;
	case '328':
		#CMT_DES = '止付应答';
	        break;
	default:
		#CMT_DES = '未知交易类型';
	}
}"
</USERFUN>

<USERFUN NAME="LV_SET_TXNUM">"{
	switch(#TMP_TXNUM)
	{
		case '00100':
			#TXNUM_DES = '汇兑';
			break;
		case '00101':
			#TXNUM_DES = '委托收款划回';
			break;
		case '00102':
			#TXNUM_DES = '托收承付划回';
			break;
		case '00103':
			#TXNUM_DES = '国库资金贷记划拨';
			break;
		case '00106':
			#TXNUM_DES = '其他贷记业务';
			break;
		case '20001':
			#TXNUM_DES = '缴税';
			break;
		case '20005':
			#TXNUM_DES = '国债贷记';
			break;
		case '20002':
			#TXNUM_DES = '非税收入';
			break;
		case '30002':
			#TXNUM_DES = '缴费';
			break;
		case '00113':
			#TXNUM_DES = '国库资金借记划拨';
			break;
		case '00119':
			#TXNUM_DES = '其他借记业务';
			break;
		case '20103':
			#TXNUM_DES = '财政直接支付';
			break;
		case '20104':
			#TXNUM_DES = '财政授权支付';
			break;
		case '20003':
			#TXNUM_DES = '财政直接支付退回';
			break;
		case '20004':
			#TXNUM_DES = '财政授权支付退回';
			break;
		case '30102':
			#TXNUM_DES = '支票截留业务';
			break;
		case '30104':
			#TXNUM_DES = '支票截留回执';
			break;
		case '20105':
			#TXNUM_DES = '国债借记';
			break;
		case '00108':
			#TXNUM_DES = '贷记退汇业务';
			break;
		case '00104':
			#TXNUM_DES = '定期贷记业务';
			break;
		case '00114':
			#TXNUM_DES = '定期借记业务';
			break;
		case '20102':
			#TXNUM_DES = '批量扣税';
			break;
		case '30001':
			#TXNUM_DES = '通存业务';
			break;
		case '20101':
			#TXNUM_DES = '实时扣税';
			break;
		case '30101':
			#TXNUM_DES = '通兑业务';
			break;
		case '30103':
			#TXNUM_DES = '对公通兑业务';
			break;
		case '30105':
			#TXNUM_DES = '通用截留回执';
			break;
		case '00500':
			#TXNUM_DES = '通用信息业务';
			break;
		case '40501':
			#TXNUM_DES = '代收业务';
			break;
		case '40502':
			#TXNUM_DES = '代付业务';
			break;
		case '30501':
			#TXNUM_DES = '支票圈存';
			break;
		case '30502':
			#TXNUM_DES = '客户账户查询';
			break;
		case '30503':
			#TXNUM_DES = '客户账户查询应答';
			break;
		case '30504':
			#TXNUM_DES = '支票圈存应答';
			break;
		case '30505':
			#TXNUM_DES = '证书查询';
			break;
		case '30506':
			#TXNUM_DES = '证书查询应答';
			break;
		default:
			#TXNUM_DES = '未知业务类型';
	}
}"
</USERFUN>
<USERFUN NAME="set_fd122">"{
setitems('#FD1221#FD1222#FD1223#FD1224#FD1225#FD1226#FD1227#FD1228#FD1229#FD122A#FD122B#FD122C#FD122D#FD122E#FD122F',$FD122);
}"
</USERFUN>

<USERFUN NAME="print_nxywpz1">"{
    dim @br_name1 as string;
    @br_name1=substr($BRNAME,0,4);

        print( 5,20,'机构名称:[30]',$BRNAME);
        print( 5, 2,'代码:[4]',#TXNUMBER);
        print( 5,13,'交易:[30]',#TXNAME);
    }"
</USERFUN>

<USERFUN NAME="print_nxywpz2">"{
    dim @txtime  as string;
    @txtime=substr($SYSTIME,0,2)+':'+substr($SYSTIME,2,2)+':'+substr($SYSTIME,4,2);
  print(24,15,'备注:');
  print(24,27,'交易日期:[8]  [8]',$HDATE,@txtime);
  print(24,5,'柜员:[4]',$FD7);
  print(24,5,'流水号:[6]',$FD4);
}"
</USERFUN>
<USERFUN NAME="setpicture">"{

}"
</USERFUN>
<USERFUN NAME="idcheck">"{

}"
</USERFUN>
<USERFUN NAME="call_96641">"{
      dim @txnobak as string;
      dim @tatl as string;
      dim @FD25 as string;
      dim @FD26 as string;
      dim @FD28 as string;
      dim @FD30 as string;
      dim @FD34 as string;
      dim @FD41 as string;
      dim @FD42 as string;
      dim @FD44 as string;
      dim @FD48 as string;
      dim @FD50 as string;
      dim @FD52 as string;
      dim @FD53 as string;
      dim @FD54 as string;
      dim @FD58 as string;
      dim @FD62 as string;
      dim @FD63 as string;
      dim @FD68 as string;
      dim @FD70 as string;
      dim @FD72 as string;
      dim @FD81 as string;
      dim @FD82 as string; 
      @txnobak = $TXNO;
      
      @FD25=$FD25;
      @FD26=$FD26;
      @FD28=$FD28;
      @FD30=$FD30;
      @FD34=$FD34;
      @FD41=$FD41;
      @FD42=$FD42;
      @FD44=$FD44;
      @FD48=$FD48;
      @FD50=$FD50;
      @FD52=$FD52;
      @FD53=$FD53;
      @FD54=$FD54;
      @FD58=$FD58;
      @FD62=$FD62;
      @FD63=$FD63;
      @FD68=$FD68;
      @FD70=$FD70;
      @FD72=$FD72;
      @FD81=$FD81;
      @FD82=$FD82;
      
      $TXNO = '9664';
      $FD30 = #LYACNO;
      $FD72 = '1';
      commsend_001();
      @tatl = callserver();
      if($FD12 !='0000')
      {
        
      }
      $TXNO = @txnobak;
      setpicture(#PIC,1,0);
      $FD25=@FD25;
      $FD26=@FD26;
      $FD28=@FD28;
      $FD30=@FD30;
      $FD34=@FD34;
      $FD41=@FD41;
      $FD42=@FD42;
      $FD44=@FD44;
      $FD48=@FD48;
      $FD50=@FD50;
      $FD52=@FD52;
      $FD53=@FD53;
      $FD54=@FD54;
      $FD58=@FD58;
      $FD62=@FD62;
      $FD63=@FD63;
      $FD68=@FD68;
      $FD70=@FD70;
      $FD72=@FD72;
      $FD81=@FD81;
      $FD82=@FD82;
}"
</USERFUN>
<USERFUN NAME="call_96642">"{
      dim @txnobak as string;
      dim @tatl as string;
      
      dim @FD25 as string;
      dim @FD26 as string;
      dim @FD28 as string;
      dim @FD30 as string;
      dim @FD34 as string;
      dim @FD41 as string;
      dim @FD42 as string;
      dim @FD44 as string;
      dim @FD48 as string;
      dim @FD50 as string;
      dim @FD52 as string;
      dim @FD53 as string;
      dim @FD54 as string;
      dim @FD58 as string;
      dim @FD62 as string;
      dim @FD63 as string;
      dim @FD68 as string;
      dim @FD70 as string;
      dim @FD72 as string;
      dim @FD81 as string;
      dim @FD82 as string; 
      
      @FD25=$FD25;
      @FD26=$FD26;
      @FD28=$FD28;
      @FD30=$FD30;
      @FD34=$FD34;
      @FD41=$FD41;
      @FD42=$FD42;
      @FD44=$FD44;
      @FD48=$FD48;
      @FD50=$FD50;
      @FD52=$FD52;
      @FD53=$FD53;
      @FD54=$FD54;
      @FD58=$FD58;
      @FD62=$FD62;
      @FD63=$FD63;
      @FD68=$FD68;
      @FD70=$FD70;
      @FD72=$FD72;
      @FD81=$FD81;
      @FD82=$FD82;
      @txnobak = $TXNO;
      $TXNO = '9664';
      $FD30 = #LYACNO;
      $FD72 = '2';
      commsend_001();
      @tatl = callserver();
      if($FD12 !='0000')
      {
        
      }
      $TXNO = @txnobak;
      setpicture(#PIC1,1,0);
      $FD25=@FD25;
      $FD26=@FD26;
      $FD28=@FD28;
      $FD30=@FD30;
      $FD34=@FD34;
      $FD41=@FD41;
      $FD42=@FD42;
      $FD44=@FD44;
      $FD48=@FD48;
      $FD50=@FD50;
      $FD52=@FD52;
      $FD53=@FD53;
      $FD54=@FD54;
      $FD58=@FD58;
      $FD62=@FD62;
      $FD63=@FD63;
      $FD68=@FD68;
      $FD70=@FD70;
      $FD72=@FD72;
      $FD81=@FD81;
      $FD82=@FD82;
}"
</USERFUN>
<USERFUN NAME="call_96681">"{
      dim @txnobak as string;
      dim @tatl as string;
      dim @FD25 as string;
      dim @FD26 as string;
      dim @FD28 as string;
      dim @FD30 as string;
      dim @FD34 as string;
      dim @FD41 as string;
      dim @FD42 as string;
      dim @FD44 as string;
      dim @FD48 as string;
      dim @FD50 as string;
      dim @FD52 as string;
      dim @FD53 as string;
      dim @FD54 as string;
      dim @FD58 as string;
      dim @FD62 as string;
      dim @FD63 as string;
      dim @FD68 as string;
      dim @FD70 as string;
      dim @FD72 as string;
      dim @FD81 as string;
      dim @FD82 as string; 
      
      @FD25=$FD25;
      @FD26=$FD26;
      @FD28=$FD28;
      @FD30=$FD30;
      @FD34=$FD34;
      @FD41=$FD41;
      @FD42=$FD42;
      @FD44=$FD44;
      @FD48=$FD48;
      @FD50=$FD50;
      @FD52=$FD52;
      @FD53=$FD53;
      @FD54=$FD54;
      @FD58=$FD58;
      @FD62=$FD62;
      @FD63=$FD63;
      @FD68=$FD68;
      @FD70=$FD70;
      @FD72=$FD72;
      @FD81=$FD81;
      @FD82=$FD82;
      @txnobak = $TXNO;
      $TXNO = '9668';
      $FD28 = '';
      $FD62 = #LYIDNO;
      $FD67 = #LYIDTYPE;
      $FD72 = '1';
      commsend_001();
      @tatl = callserver();
      if($FD12 !='0000')
      {
        
      }
      $TXNO = @txnobak;
      setpicture(#PIC,1,0);
      $FD25=@FD25;
      $FD26=@FD26;
      $FD28=@FD28;
      $FD30=@FD30;
      $FD34=@FD34;
      $FD41=@FD41;
      $FD42=@FD42;
      $FD44=@FD44;
      $FD48=@FD48;
      $FD50=@FD50;
      $FD52=@FD52;
      $FD53=@FD53;
      $FD54=@FD54;
      $FD58=@FD58;
      $FD62=@FD62;
      $FD63=@FD63;
      $FD68=@FD68;
      $FD70=@FD70;
      $FD72=@FD72;
      $FD81=@FD81;
      $FD82=@FD82;
}"
</USERFUN>
<USERFUN NAME="call_96682">"{
      dim @txnobak as string;
      dim @tatl as string;
      dim @FD25 as string;
      dim @FD26 as string;
      dim @FD28 as string;
      dim @FD30 as string;
      dim @FD34 as string;
      dim @FD41 as string;
      dim @FD42 as string;
      dim @FD44 as string;
      dim @FD48 as string;
      dim @FD50 as string;
      dim @FD52 as string;
      dim @FD53 as string;
      dim @FD54 as string;
      dim @FD58 as string;
      dim @FD62 as string;
      dim @FD63 as string;
      dim @FD68 as string;
      dim @FD70 as string;
      dim @FD72 as string;
      dim @FD81 as string;
      dim @FD82 as string; 
      
      @FD25=$FD25;
      @FD26=$FD26;
      @FD28=$FD28;
      @FD30=$FD30;
      @FD34=$FD34;
      @FD41=$FD41;
      @FD42=$FD42;
      @FD44=$FD44;
      @FD48=$FD48;
      @FD50=$FD50;
      @FD52=$FD52;
      @FD53=$FD53;
      @FD54=$FD54;
      @FD58=$FD58;
      @FD62=$FD62;
      @FD63=$FD63;
      @FD68=$FD68;
      @FD70=$FD70;
      @FD72=$FD72;
      @FD81=$FD81;
      @FD82=$FD82;
      @txnobak = $TXNO;
      $TXNO = '9668';
      $FD28 = '';
      $FD62 = #LYIDNO;
      $FD67 = #LYIDTYPE;
      $FD72 = '2';
      commsend_001();
      @tatl = callserver();
      if($FD12 !='0000')
      {
        
      }
      $TXNO = @txnobak;
      setpicture(#PIC1,1,0);
      $FD25=@FD25;
      $FD26=@FD26;
      $FD28=@FD28;
      $FD30=@FD30;
      $FD34=@FD34;
      $FD41=@FD41;
      $FD42=@FD42;
      $FD44=@FD44;
      $FD48=@FD48;
      $FD50=@FD50;
      $FD52=@FD52;
      $FD53=@FD53;
      $FD54=@FD54;
      $FD58=@FD58;
      $FD62=@FD62;
      $FD63=@FD63;
      $FD68=@FD68;
      $FD70=@FD70;
      $FD72=@FD72;
      $FD81=@FD81;
      $FD82=@FD82;
}"
</USERFUN>
<USERFUN NAME="count_cash">"{
	dim @total as number;
	@total=val(#MONEY100)*100+val(#MONEY50)*50+val(#MONEY20)*20+
			val(#MONEY10)*10+val(#MONEY5)*5+val(#MONEY2)*2+
			val(#MONEY1)*1+val(#MONEY05)*0.5+val(#MONEY02)*0.2+
			val(#MONEY01)*0.1+val(#MONEY005)*0.05+val(#MONEY002)*0.02+
			val(#MONEY001)*0.01;
	#TOTAL = comma(itoa(@total,'%.2f'),16);
	show(#TOTAL,true);
	enable(#TOTAL,false);
}"
</USERFUN>

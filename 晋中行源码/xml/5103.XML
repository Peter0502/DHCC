<?xml version="1.0" encoding="GBK" ?>
<TRANSACTION RIGHTS="11110000" TITLE="5103  大额来帐退汇录入)"
  xmlns="http://www.otd.org/MENU" xmlns:W3CNS="http://www.w3c.org">
<COMMSEND>"{
  #ORDERNO='';
  commsend_001();
  #TXAMT15=itoa(#TX_AMT*100,'%016.0f');
  $FD102=getitems('#ACTNO24#ACTSEQ#VOCTYPE#VOCNUM#FETCHFLAG#PWDFLAG#QUE_PWD#DRAW_PWD#ID_TYPE#ID_NO#STAMPFLAG#PWDFLAG2#PWD16#PRINTDATE#TXAMT15#CERTTYPE#CUSTNAME#AVBAL#CURCD#CT_IND#DSCPT#ACTTYPE#ACTSEQ_2#ACCOUNTFLAG#INTEREST1#INTEREST2#INTEREST3#PAYAMOUNT#NEWVOCNUM#SPEFLAG#PRODNAME#ACTNO_24#EDUCREDIT#DESC10');
  commsend_123();
  commsend_hv();
  $FD20='1';
  $FD69='1';
}"
</COMMSEND>
<COMMRECV>"{
        commrecv_123();
        commrecv_001();
}"
</COMMRECV>
<FIRSTWORK>
"{
  #PIC='';
  #PIC1='';
  show(#PIC,false);
  show(#PIC1,false);
  show(#LBLPIC,false);
  show(#LBLPIC1,false);
  enable(#SETPIC,false);
  enable(#SETPIC1,false);
}"
</FIRSTWORK>
<VARIABLE>
  <ITEM LINE="3"  COL="3" TYPE="%-52s" FUNCTIONS=
    "T(5103                        大额来帐退汇录入)"/>
  <ITEM LINE="4"  COL="3"  TYPE="%-74s" FUNCTIONS=
   "T(─────────────────────────────────────)"/>
  <ITEM NAME="#TXNO" TYPE="%-4s" FUNCTIONS="T($TXNO=5803)"/>
  <ITEM NAME="#MSGTYPE" TYPE="%-5s" FUNCTIONS="T($MSGTYPE=03001)"/>

  <ITEM LINE="5"  COL="5"  TYPE="%-11s"  FUNCTIONS="T(原委托日期:)"/>
  <ITEM LINE="5"  COL="45" TYPE="%-11s"  FUNCTIONS="T(原CMT 编号:)"/>
  <ITEM LINE="6"  COL="5"  TYPE="%-11s"  NAME="#LB0"  INPUT="LABEL" FUNCTIONS="T(原发起行号:)"/>

  <ITEM LINE="6"  COL="45" TYPE="%-11s"  FUNCTIONS="T(原交易序号:)"/>

  <ITEM LINE="8"  COL="5" TYPE="%-9s"          FUNCTIONS="T(货币符号:)"/>
  <ITEM LINE="9"  COL="5" TYPE="%-9s"          FUNCTIONS="T(优先级别:)"/>

  <ITEM LINE="20"  COL="5"   TYPE="%-13s"  NAME="#LB6" VISABLE="TRUE" INPUT="LABEL"  FUNCTIONS="T(附        言:)"/>

<!-----占位字段--------------->  


<ITEM NAME="#PAY_QS_NO"         TYPE="%-12s"      FUNCTIONS=""/>
<ITEM NAME="#OR_BR_NO"          TYPE="%-12s"      FUNCTIONS=""/>
<ITEM NAME="#SENDCO"            TYPE="%-4s"       FUNCTIONS=""/>
<ITEM NAME="#PAY_OPN_BR_NO"     TYPE="%-12s"      FUNCTIONS=""/>
<ITEM NAME="#CASH_QS_NO"        TYPE="%-12s"      FUNCTIONS=""/>
<ITEM NAME="#RECECO"             TYPE="%-04s"      FUNCTIONS=""/>
<ITEM NAME="#ORDERNO"           TYPE="%-8s"       FUNCTIONS=""/>
<ITEM NAME="#CASH_ADDR"         TYPE="%-60s"      FUNCTIONS=""/>
<ITEM NAME="#PROCODE"           TYPE="%-8s"       FUNCTIONS=""/>
<ITEM NAME="#CR_DATE"           TYPE="%-8s"       FUNCTIONS=""/>
<ITEM NAME="#CR_BR_NO"          TYPE="%-12s"      FUNCTIONS=""/>
<ITEM NAME="#CR_TX_NUM"         TYPE="%-8s"       FUNCTIONS=""/>
<ITEM NAME="#QR_BR_NO"          TYPE="%-12s"      FUNCTIONS=""/>
<ITEM NAME="#QR_TX_NUM"         TYPE="%-8s"       FUNCTIONS=""/>
<ITEM NAME="#TX_TYPE"           TYPE="%-1s"       FUNCTIONS=""/>
<ITEM NAME="#NOTPAY_CONTENT"    TYPE="%-255s"     FUNCTIONS=""/>
<ITEM NAME="#NOTPAY_ORDERNO"    TYPE="%-3s"       FUNCTIONS=""/>
<ITEM NAME="#O_NOTPAY_ORDERNO"  TYPE="%-3s"       FUNCTIONS=""/>
<ITEM NAME="#RESP1"             TYPE="%-1s"       FUNCTIONS=""/>
<ITEM NAME="#PROC_STS"          TYPE="%-1s"        FUNCTIONS=""/>



<!-- 102域变量 -->

  <ITEM NAME="#ACTNO24"   TYPE="%-24s" FUNCTIONS=""/>
  <ITEM NAME="#ACTSEQ"    TYPE="%-4s" FUNCTIONS=""/>
  <ITEM NAME="#VOCTYPE" TYPE="%-3s"  FUNCTIONS=""/>
  <ITEM NAME="#VOCNUM" TYPE="%16d" FUNCTIONS=""/>
  <ITEM NAME="#FETCHFLAG" TYPE="%1s" FUNCTIONS=""/>
  <ITEM NAME="#PWDFLAG" TYPE="%-1s" FUNCTIONS=""/>
  <ITEM NAME="#QUE_PWD" TYPE="%6s" FUNCTIONS=""/>

  <ITEM NAME="#CERTFLAG" TYPE="%-1s"  FUNCTIONS=""/>
  <ITEM NAME="#CERTNO20"    TYPE="%-20s" FUNCTIONS=""/>
  <ITEM NAME="#STAMPFLAG" TYPE="%1s" FUNCTIONS=""/>
  <ITEM NAME="#PWDFLAG2" TYPE="%1s" FUNCTIONS=""/>  
  <ITEM NAME="#PWD16"  TYPE="%-16s" FUNCTIONS=""/>
  <ITEM NAME="#PRINTDATE" TYPE="%-8s" FUNCTIONS=""/>      
  <ITEM NAME="#TXAMT15"   TYPE="%-16s" FUNCTIONS=""/>
  <ITEM NAME="#CERTTYPE"  TYPE="%-1s" FUNCTIONS=""/>
  <ITEM NAME="#CUSTNAME" TYPE="%-60s" FUNCTIONS=""/>
  <ITEM NAME="#AVBAL" TYPE="%17.2f" FUNCTIONS=""/>
  <ITEM NAME="#CURCD" TYPE="%-2s"  FUNCTIONS=""/>
  <ITEM NAME="#CT_IND" TYPE="%-1s"  FUNCTIONS="T(2)"/>
  <ITEM NAME="#DSCPT"     TYPE="%-3s" FUNCTIONS=""/>
  <ITEM NAME="#ACTTYPE"   TYPE="%-1s" FUNCTIONS=""/>
  <ITEM NAME="#ACTSEQ_2"  TYPE="%-4s" FUNCTIONS=""/>
  <ITEM NAME="#ACCOUNTFLAG" TYPE="%-1s" FUNCTIONS=""/>
  <ITEM NAME="#INTEREST1" TYPE="%-16s" FUNCTIONS=""/>
  <ITEM NAME="#INTEREST2" TYPE="%-16s" FUNCTIONS=""/>  
  <ITEM NAME="#INTEREST3" TYPE="%-16s" FUNCTIONS=""/>
  <ITEM NAME="#PAYAMOUNT" TYPE="%-16s" FUNCTIONS=""/>  
  <ITEM NAME="#NEWVOCNUM" TYPE="%-16d" FUNCTIONS=""/>
  <ITEM NAME="#SPEFLAG"   TYPE="%-20s" FUNCTIONS=""/>    
  <ITEM NAME="#PRODNAME"  TYPE="%-30s" FUNCTIONS=""/>
  <ITEM NAME="#ACTNO_24"  TYPE="%-24s" FUNCTIONS=""/> 
  <ITEM NAME="#EDUCREDIT" TYPE="%1s" FUNCTIONS=""/>   
  <ITEM NAME="#DESC10"    TYPE="%-10s" FUNCTIONS=""/>
<!--
  <ITEM NAME="#RATE"      TYPE="%-7s"  FUNCTIONS=""/>
  <ITEM NAME="#RATEDATE"  TYPE="%-5s"  FUNCTIONS=""/>
-->
<!----几个公共数据------>
<ITEM NAME="#WT_DAY"            TYPE="%-8s"       FUNCTIONS="T($HDATE)"/>

<ITEM NAME="#NOTPAY_DATE"       TYPE="%-8s"       FUNCTIONS=""/>
<ITEM NAME="#TX_OPCD"           TYPE="%-1s"       FUNCTIONS="T(1)"/>
<ITEM NAME="#NOTE_NO"           TYPE="%-16s"      FUNCTIONS=""/>
<ITEM NAME="#LW_IND"            TYPE="%-1s"       FUNCTIONS="T(1)"/>

<ITEM NAME="#OPCD"              TYPE="%-2s"       FUNCTIONS="T(10)"/>
<!--<ITEM NAME="#NOTE_NO"           TYPE="%-16s"      FUNCTIONS=""/>--><!--同名ITEM liangq注-->
<!--<ITEM NAME="#LW_IND"            TYPE="%-1s"       FUNCTIONS="T(1)"/>--><!--同名ITEM liangq注-->
<ITEM NAME="#HP_ADD_PWD"        TYPE="%-1s"       FUNCTIONS=""/>
<ITEM NAME="#PACKID"            TYPE="%8d"       FUNCTIONS=""/>
<ITEM NAME="#O_PACKID"          TYPE="%8d"       FUNCTIONS=""/>
<ITEM NAME="#PACK_DATE"         TYPE="%8d"       FUNCTIONS=""/>
<ITEM NAME="#O_PACK_DATE"       TYPE="%8d"       FUNCTIONS=""/>
<ITEM NAME="#TXNUM"             TYPE="%5d"       FUNCTIONS=""/>
<ITEM NAME="#O_TXNUM"           TYPE="%5d"       FUNCTIONS=""/>
<ITEM NAME="#LV_YW_IND"         TYPE="%12s"       FUNCTIONS=""/>
<ITEM NAME="#RESP_DATE"         TYPE="%8d"       FUNCTIONS=""/>
<ITEM NAME="#RCP_STS"           TYPE="%2d"       FUNCTIONS=""/>
<ITEM NAME="#RESP2"             TYPE="%8s"       FUNCTIONS=""/>
<ITEM NAME="#RETCODE"           TYPE="%2d"       FUNCTIONS=""/>
<ITEM NAME="#YW_DTL_ID"         TYPE="%8d"       FUNCTIONS=""/>
<ITEM NAME="#ACC_IND"           TYPE="%1d"       FUNCTIONS=""/>
<ITEM NAME="#REQ_TYPE"          TYPE="%1d"       FUNCTIONS=""/>
<ITEM NAME="#DF_FREEAMT"        TYPE="%16s"       FUNCTIONS=""/>
<ITEM NAME="#PROTNO"            TYPE="%60s"       FUNCTIONS=""/>
<ITEM NAME="#PO_NO"             TYPE="%8d"       FUNCTIONS=""/>
<ITEM NAME="#PO_TYPE"           TYPE="%1d"       FUNCTIONS=""/>
<ITEM NAME="#OTYPE"             TYPE="%1d"       FUNCTIONS="T(1)"/><!-- 表示大额 -->

  <ITEM NAME="#O_WT_DAY" TYPE="%-8s" LINE="5" COL="17" DEVICE="KAYBOARD" FUNCTIONS="V(NB)D()"/>

  <ITEM NAME="#O_CMTNO"   TYPE="%3s"   LINE="5" COL="57"  DEVICE="KAYBOARD" FUNCTIONS="T(100)">
  <SELECT>
    <OPTION VALUE="100" TITLE="0.汇兑"/>
    <OPTION VALUE="101" TITLE="2.委托收款"/>
    <OPTION VALUE="102" TITLE="1.托收承付"/>
    <OPTION VALUE="103" TITLE="3.国库资金汇划"/>
    <OPTION VALUE="105" TITLE="4.银行间拆借"/>
  </SELECT>
  <ONLOSTFOCUS>"{
  $MSR2='';
  $MSR3='';
    if(#O_CMTNO=='105'){
        showblock('COMMON',false);
        showblock('BLOCK_CJ',true);
    }
    else{
        showblock('BLOCK_CJ',false);
        showblock('COMMON',true);
    }
  "}

  </ONLOSTFOCUS>
  </ITEM>
  <ITEM NAME="#CCMTNO" TYPE="%-20s"   FUNCTIONS="S(#O_CMTNO,#O_CMTNO)"/>
  <ITEM NAME="#ACTYPE"            TYPE="%-1s"       FUNCTIONS=""/>
  <ITEM NAME="#YW_TYPE" TYPE="%-2s" FUNCTIONS=""/>

  <ITEM NAME="#AC_BR_NO"   TYPE="%-12s" LINE="6" COL="17" INPUT="TEXT"   DEVICE="KEYBOARD" FUNCTIONS="V(NB)T()">
  <ONLOSTFOCUS>"{
    dim @baktxno as string;
    @baktxno=$TXNO;
    $TXNO='9553';
    $FD32=#AC_BR_NO;
    commsend_001();
    callserver();
    $TXNO=@baktxno;
    if($FD12!='0000'){
      showmsg(geterror());
      return(false);
    }
    showhelp(3,70,8,3,'支付系统行名信息',substr($FD96,0,60));
  }"</ONLOSTFOCUS>
  </ITEM>
  <ITEM NAME="#OORDERNO" TYPE="%8d" LINE="6" COL="57" DEVICE="KEYBOARD" FUNCTIONS="V(NB)">
  <ONLOSTFOCUS>"{
    dim @baktxno as string;
    dim @line as string;
    dim @rate as string;
    @line='';
    @rate='';
    @baktxno=$TXNO;
    $TXNO='9561';
    $FD32=#AC_BR_NO;
    $FD44=#O_WT_DAY;
    #CMTNO=#O_CMTNO;
    #ORDERNO=#OORDERNO;
    #OR_BR_NO=#AC_BR_NO;
    commsend_001();
    commsend_123();
    @line=callserver();
    $TXNO=@baktxno;
    if($FD12!='0000'){
      showmsg(geterror());
      return(false);
    }
    #TX_AMT=val($FD39,0.01);
    if(#TX_AMT &gt; 1000000)
       {
         showhelp(3,70,8,3,'提示','金额大于1,000,000请联系清算中心!此业务发送后需授权');
       }
    #CUR_NO=$FD21;
    enable(#TX_AMT,true);

    setitems('#O_CMTNO#CMTNO#CASH_QS_NO#AC_BR_NO#RECECO#CASH_OPN_BR_NO#CASH_AC_NO#CASH_NAME#CASH_ADDR#PAY_QS_NO#OR_BR_NO#SENDCO#PAY_OPN_BR_NO#PAY_AC_NO#PAY_NAME#PAY_ADDR#YW_TYPE#ORDERNO#CONTENT#RATE#RATEDATE#OORDERNO#PROCODE#CR_DATE#CR_BR_NO#CR_TX_NUM#QR_BR_NO#QR_TX_NUM#TX_TYPE#NOTPAY_CONTENT#NOTPAY_ORDERNO#O_NOTPAY_ORDERNO#RESP1#OPERLEVEL#PROC_STS',$FD123);

    #CMTNO='108';enable(#CMTNO,true);
    #O_CMTNO=rtrim(#O_CMTNO  );enable(#O_CMTNO  ,true);
    #PAY_QS_NO =rtrim(#PAY_QS_NO);enable(#PAY_QS_NO,true);
    #OR_BR_NO  =rtrim(#OR_BR_NO );enable(#OR_BR_NO ,true);
    #SENDCO    =rtrim(#SENDCO   );enable(#SENDCO   ,true);
    #PAY_OPN_BR_NO=rtrim(#PAY_OPN_BR_NO);enable(#PAY_OPN_BR_NO,true);
    #PAY_AC_NO =rtrim(#PAY_AC_NO );enable(#PAY_AC_NO ,true);
    #PAY_NAME  =rtrim(#PAY_NAME  );enable(#PAY_NAME  ,true);
    #PAY_ADDR  =rtrim(#PAY_ADDR  );enable(#PAY_ADDR  ,true);
    #CASH_QS_NO=rtrim(#CASH_QS_NO);enable(#CASH_QS_NO,true);
    #AC_BR_NO  =rtrim(#AC_BR_NO  );enable(#AC_BR_NO  ,true);
    #RECECO    =rtrim(#RECECO    );enable(#RECECO    ,true);
    #CASH_OPN_BR_NO=rtrim(#CASH_OPN_BR_NO);enable(#CASH_OPN_BR_NO,true);
    #CASH_AC_NO=rtrim(#CASH_AC_NO);enable(#CASH_AC_NO,true);
    #CASH_NAME =rtrim(#CASH_NAME );enable(#CASH_NAME,true);
    #CASH_ADDR =rtrim(#CASH_ADDR );enable(#CASH_ADDR,true);
    #YW_TYPE   =rtrim(#YW_TYPE   );enable(#YW_TYPE  ,true);
    #ORDERNO   =rtrim(#ORDERNO   );enable(#ORDERNO  ,true);
    #CONTENT   =rtrim(#CONTENT   );enable(#CONTENT  ,true);
    #RATE      =rtrim(#RATE      );enable(#RATE     ,true);
    #RATEDATE  =rtrim(#RATEDATE  );enable(#RATEDATE ,true);
    #OORDERNO  =rtrim(#OORDERNO  );
    #OORDERNO=#ORDERNO;enable(#OORDERNO ,true);//特殊处理
    #PROCODE   =rtrim(#PROCODE   );enable(#PROCODE  ,true);
    #CR_DATE   =rtrim(#CR_DATE   );enable(#CR_DATE  ,true);
    #CR_BR_NO  =rtrim(#CR_BR_NO  );enable(#CR_BR_NO ,true);
    #CR_TX_NUM =rtrim(#CR_TX_NUM );enable(#CR_TX_NUM,true);
    #QR_BR_NO  =rtrim(#QR_BR_NO  );enable(#QR_BR_NO ,true);
    #QR_TX_NUM =rtrim(#QR_TX_NUM );enable(#QR_TX_NUM,true);
    #TX_TYPE   =rtrim(#TX_TYPE   );enable(#TX_TYPE  ,true);
    #NOTPAY_CONTENT=rtrim(#NOTPAY_CONTENT);enable(#NOTPAY_CONTENT,true);
    #NOTPAY_ORDERNO=rtrim(#NOTPAY_ORDERNO);enable(#NOTPAY_ORDERNO,true);
    #O_NOTPAY_ORDERNO =rtrim(#O_NOTPAY_ORDERNO );enable(#O_NOTPAY_ORDERNO ,true);
    #RESP1    =rtrim(#RESP1    );enable(#RESP1    ,true);
    #OPERLEVEL=rtrim(#OPERLEVEL);enable(#OPERLEVEL,true);
    #PROC_STS =rtrim(#PROC_STS );enable(#PROC_STS ,true);
    if(#O_CMTNO=='105'){
        #RATE=substr(@line,0,7);
        #RATEDATE=substr(@line,7,5);
    }
    #RATE      =rtrim(#RATE      );enable(#RATE     ,true);
    #RATEDATE  =rtrim(#RATEDATE  );enable(#RATEDATE ,true);
  }"</ONLOSTFOCUS>
  </ITEM>


  <ITEM NAME="#CMTNO"  TYPE="%-3s"       FUNCTIONS="T(108)"/>

  <ITEM NAME="#PASSWD" TYPE="%-6s" FUNCTIONS="T()"/>
  <ITEM NAME="#PDATE"  TYPE="%-8s" FUNCTIONS=""/>
  <ITEM NAME="#PNUM"    TYPE="%8d"  FUNCTIONS=""/>

  <ITEM LINE="8"  COL="15" NAME="#CUR_NO"  TYPE="%-2s" DEVICE="KEYBOARD"  FUNCTIONS="V(NB)T(01)">
   <SELECT>
           <OPTION VALUE="01 人民币" TITLE="0.人民币"/>
   </SELECT>
   </ITEM>
  <ITEM LINE="9"   COL="15" NAME="#OPERLEVEL"   TYPE="%-1s" DEVICE="KEYBOARD"  FUNCTIONS="V(0,2)T(0)">
  <SELECT >
           <OPTION VALUE="0 普通" TITLE="0 普通"/>
           <OPTION VALUE="1 紧急" TITLE="1 紧急"/>
           <OPTION VALUE="2 特急" TITLE="2 特急"/>
   </SELECT>
   </ITEM>
  <ITEM LINE="09"  COL="45" TYPE="%-12s"  FUNCTIONS="T(原交易金额:)"/>
  <ITEM LINE="09"   COL="57" NAME="#TX_AMT"      TYPE="%16.2f" DEVICE="KEYBOARD" FUNCTIONS="V(0000000000000001,9999999999999999)"/>
  <ITEM NAME="#XTX_AMT"  TYPE="%-21s" FUNCTIONS="X(#TX_AMT)"/>

  <!----------A BLOCK -------------------->

  <BLOCK NAME="COMMON" LINE="7" COL="0" VISABLE="TRUE">
  <ITEM LINE="04"  COL="5" TYPE="%-13s" FUNCTIONS="T(原收款人帐号:)"/>
  <ITEM LINE="05"  COL="5" TYPE="%-11s" INPUT="LABEL" VISABLE="FALSE" NAME="#SHOW_ID_TYPE" FUNCTIONS="T(证件类型:)"/>
  <ITEM LINE="05"  COL="45" TYPE="%-9s" INPUT="LABEL" VISABLE="FALSE" NAME="#SHOW_ID_NO" FUNCTIONS="T(证件号码:)"/>
  <ITEM LINE="06"  COL="5" TYPE="%-13s" FUNCTIONS="T(原收款人名称:)"/>
  <ITEM LINE="09"  COL="5" TYPE="%-13s" FUNCTIONS="T(原付款人帐号:)"/>
  <ITEM LINE="10"  COL="5" TYPE="%-13s" FUNCTIONS="T(原付款人名称:)"/>
  <ITEM LINE="9"     COL="40"  NAME="#LBLPIC" TYPE="%-10s" FUNCTIONS="T(照    片:)"/>
  <ITEM LINE="9"     COL="55"  NAME="#LBLPIC1" TYPE="%-10s" FUNCTIONS="T(印    件:)"/>
   <ITEM NAME="#AC_NO"   TYPE="%-24s" FUNCTIONS=""/>
   <ITEM NAME="#AC_SEQN"   TYPE="%-4s" FUNCTIONS="T(0001)"/>
   <ITEM NAME="#FULL102"   TYPE="%350s" FUNCTIONS="T(0001)">
   <ONLOSTFOCUS>"{
   }"
   </ONLOSTFOCUS>
   </ITEM>
   <ITEM LINE="04"   COL="18" NAME="#PAY_AC_NO"   TYPE="%-32s"  DEVICE="KEYBOARD" FUNCTIONS="">
   <ONLOSTFOCUS>
   "{
   dim @baktxno as string;
   dim @name as string;
   dim @avbal as string;
   dim @pwd_ind as string;
   dim @actype as string;
   dim @prdt_name as string;
   dim @sts as string;
   @baktxno=$TXNO;
   $TXNO='9731';
   if(len(#PAY_AC_NO) &lt; 24)
   {
       #AC_NO=substr(#PAY_AC_NO,0,24)+space(24-len(#PAY_AC_NO))+'';
   }
   $FD102=#AC_NO+#AC_SEQN;
   commsend_001(); 
   callserver();
   $TXNO=@baktxno;
   if($FD12!='0000'){
     showmsg(geterror());
   }
   else{
     @name=substr($FD102,125,60);
     @avbal=substr($FD102,185,16);
     @pwd_ind=substr($FD102,48,1);
     @actype=substr($FD102,207,1);
     @prdt_name=rtrim(substr($FD102,313,30));
     showhelp(4,68,5,10,'帐户信息','户名:'+@name+' 余额:'+itoa(val(@avbal)/100,'%16.2f')+space(6)+' 产品名称:'+@prdt_name);
     #ID_TYPE=substr($FD102,61,1);
     if(#ID_TYPE=='Y'){
       showmsg('该账户需要凭证件支取，需要输入证件');
       show(#ID_TYPE,true);
       show(#ID_NO,true);
       show(#SHOW_ID_TYPE,true);
       show(#SHOW_ID_NO,true);
     }else{
       show(#ID_TYPE,false);
       show(#ID_NO,false);
       show(#SHOW_ID_TYPE,false);
       show(#SHOW_ID_NO  ,false);
     }
     @sts=substr($FD123,800,1);
     showmsg('sts='+@sts);
     if(@pwd_ind=='Y' and @sts == '9'){
       showmsg('需要检查密码');
       show(#LDRAW_PWD,true);
       show(#DRAW_PWD,true);
     }else{
       show(#LDRAW_PWD,false);
       show(#DRAW_PWD ,false);
       if(@actype=='1' and @sts == '9'){
         showmsg(@prdt_name+'必需有密码才能办理大小额业务');
         return(false);
       }
     }
     
     setitems('#ACTNO24#ACTSEQ#VOCTYPE#VOCNUM#FETCHFLAG#PWDFLAG#QUE_PWD#DRAW_PWD#ID_TYPE#CERTNO20#STAMPFLAG#PWDFLAG2#PWD16#PRINTDATE#TXAMT15#CERTTYPE#CUSTNAME#AVBAL#CURCD#CT_IND#DSCPT#ACTTYPE#ACTSEQ_2#ACCOUNTFLAG#INTEREST1#INTEREST2#INTEREST3#PAYAMOUNT#NEWVOCNUM#SPEFLAG#PRODNAME#ACTNO_24#EDUCREDIT#DESC10',$FD102);
     #DRAW_PWD='';
     #ID_NO=rtrim(#CERTNO20);// for test
   }
 }"
 </ONLOSTFOCUS>
</ITEM>

<ITEM NAME="#LDRAW_PWD" LINE="03"  COL="55"  TYPE="%-10s" INPUT="LABEL" VISABLE="FALSE"  FUNCTIONS="T(输入密码:)"/>
<ITEM NAME="#DRAW_PWD"  LINE="03"  COL="65" TYPE="%-6s"  DEVICE="PINPAD" INPUT="TEXT" VISABLE="FALSE" FUNCTIONS="V(NB)i()"/> 


  <ITEM LINE="05"   COL="16" NAME="#ID_TYPE"  INPUT="SELECT" VISABLE="FALSE"  TYPE="%-1s"  DEVICE="NONE" FUNCTIONS="">
  <SELECT>
    <OPTION VALUE="N"     TITLE="0.否"/>
    <OPTION VALUE="Y"     TITLE="1.是"/>
  </SELECT>
  </ITEM>

  <ITEM LINE="05"   COL="54" NAME="#ID_NO"  INPUT="TEXT" VISABLE="FALSE"  TYPE="%-20s"  DEVICE="KEYBOARD" FUNCTIONS="">
  <ONLOSTFOCUS>"{
     if(#ID_NO!=rtrim(#CERTNO20)){
       showmsg('输入的证件号码与原登记证件号码不同');
       return(false);
     }
  }"
  </ONLOSTFOCUS>
  </ITEM>

  <ITEM LINE="06"  COL="18" NAME="#PAY_NAME"    TYPE="%-60s"  DEVICE="KEYBOARD" FUNCTIONS=""/>
  <ITEM NAME="#PAY_ADDR"    TYPE="%-60s"  FUNCTIONS="T()"/>
	
  <ITEM LINE="09"  COL="18" NAME="#CASH_AC_NO"  TYPE="%-32s"  DEVICE="KEYBOARD" FUNCTIONS="T()"/>

  <ITEM NAME="#CASH_OPN_BR_NO"  TYPE="%-12s" FUNCTIONS="T()"/>

  <ITEM LINE="10"  COL="18" NAME="#CASH_NAME"   TYPE="%-60s"  DEVICE="KEYBOARD" FUNCTIONS="T()"/>
  <!--added by liuyong 2009-9-15 显示图片信息 start-->
  <ITEM  NAME="#CHECKACNO"  TYPE="%10s" FUNCTIONS="">
 <ONLOSTFOCUS>
 "{
     dim @txnobak as string;
     dim @len as number;
     @len = len(rtrim(#CASH_AC_NO));
     if(@len != 0 and @len != 3 and @len != 5 and @len != 7)
     {
       @txnobak = $TXNO;
       $TXNO = '9663';
       $FD30 = #CASH_AC_NO;
       commsend_001();
       callserver();
       if($FD12 !='0000')
       {
         show(#PIC,false);
         show(#PIC1,false);
         show(#LBLPIC,false);
         show(#LBLPIC1,false);
         enable(#SETPIC,false);
         enable(#SETPIC1,false);
       }
       else
       {
         show(#PIC,true);
         show(#PIC1,true);
         show(#LBLPIC,true);
         show(#LBLPIC1,true);
         enable(#SETPIC,true);
         enable(#SETPIC1,true);
       }
       $TXNO = @txnobak;
     }
     
 }"
 </ONLOSTFOCUS>
 </ITEM>
 <ITEM NAME="#LYACNO" TYPE="%-32s" FUNCTIONS="" />
  <ITEM LINE="9" COL="50" LINES="160" COLS="120" NAME="#PIC" TYPE="%-10s" VISABLE="FALSE" FUNCTIONS=""/>
  <ITEM NAME="#SETPIC" TYPE="%-10s" FUNCTIONS="">
  <ONLOSTFOCUS>
  "{
      #LYACNO=#CASH_AC_NO;
      call_96641();
  }"
  </ONLOSTFOCUS>
  </ITEM>
  <ITEM LINE="9" COL="65" LINES="220" COLS="160" NAME="#PIC1" TYPE="%-10s" VISABLE="FALSE" FUNCTIONS=""/>
  <ITEM NAME="#SETPIC1" TYPE="%-10s" FUNCTIONS="">
  <ONLOSTFOCUS>
  "{
      #LYACNO=#PAY_AC_NO;
      call_96642();
  }"
  </ONLOSTFOCUS>
  </ITEM>
  <!--added by liuyong 2009-9-15 显示图片信息 end-->
  <ITEM NAME="#PTXAMT" TYPE="%16.2f" FUNCTIONS=""/>
  <ITEM NAME="#JTXAMT" TYPE="%16.2f" FUNCTIONS=""/>
  </BLOCK>

  <BLOCK NAME="BLOCK_CJ" LINE="9" COL="0" VISABLE="FALSE">
      <ITEM LINE="03" COL="15" TYPE="%-30s"  FUNCTIONS="T(【拆借业务录入信息】)"/>
      <ITEM LINE="05"  COL="5" TYPE="%-13s" FUNCTIONS="T(拆借利率:)"/>
      <ITEM LINE="07"  COL="5" TYPE="%-13s" FUNCTIONS="T(拆借天数:)"/>
      <ITEM LINE="05"  COL="16" NAME="#RATE" TYPE="%7s" DEVICE="KEYBOARD" FUNCTIONS=""/>
      <ITEM LINE="07"  COL="17" NAME="#RATEDATE" TYPE="%5d"   DEVICE="KEYBOARD" FUNCTIONS=""/>
  </BLOCK>


  <ITEM LINE="20" COL="18" NAME="#CONTENT"  VISABLE="TRUE"  TYPE="%-60s"  INPUT="TEXT"  DEVICE="KEYBOARD" FUNCTIONS="T()"/>

  <ITEM NAME="#NOTE_TYPE" TYPE="%-2s" FUNCTIONS="V(NB)T(01)"/>
  <!---------这里定义了一个PAGE用于拆借------->
  <ITEM LINE="21" COL="59" NAME="#OK"  TYPE="%-6s" FUNCTIONS="T(确  定)" INPUT="SUBMIT"/>

</VARIABLE>
<REQUEST>
</REQUEST>
<RESPONSE>
  <PACKAGE DEVICE="SCREEN"   DESC="显示内容">
    NOTHING
  </PACKAGE>
  <PRINT>"{
        print(3,5, '                  大额支付交易来帐退汇录入');
        print(4,5, '原 委托 日期:[8]         原支付交易序号:[8]',#O_WT_DAY,#OORDERNO);
        print(5,5, '原 业务 类型:[20]接收行行号:[12]',#CCMTNO,#AC_BR_NO);
        print(6,5, '原付款人帐号:[24]支付交易序号:[8]',#CASH_AC_NO,#ORDERNO);
        print(7,5, '原付款人名称:[60]',#CASH_NAME);
        print(8,5, '汇 款  金 额:[21]',#XTX_AMT);
        print(9,5, '对方清算行号: [12]',#CASH_QS_NO);
        print(10,5,'原收款人帐号:[24]',#PAY_AC_NO);
        print(11,5,'原收款人名称:[60]',#PAY_NAME);
        print(12,5,'附      言:[60]',#CONTENT);
  }"
  </PRINT>
</RESPONSE>
<RESPONSE>
<PACKAGE DEVICE="PRINTER"  LINESPACE="24" DESC="请打印业务专用凭证" >
NOTHING  
</PACKAGE>
<PRINT>
"{
 $KINDNO='00';
 dim @txtime  as string;
 @txtime=substr($SYSTIME,0,2)+':'+substr($SYSTIME,2,2)+':'+substr($SYSTIME,4,2);

print( 5,20,'机构名称:[30]',$BRNAME);
print( 5,2,'代码:5103');
print( 5,13,'交易:大额支付交易来帐退汇录入');
        
print( 7,20,'原 委托 日期:[8]   原支付交易序号:[8]',#O_WT_DAY,#OORDERNO);
print( 8,20,'原 业务 类型:[20]     接收行行号:[12]',#CCMTNO,#AC_BR_NO);  
print( 9,20,'原付款人帐号:[24]    支付交易序号:[8] ',#CASH_AC_NO,#ORDERNO);
print(10,20,'原付款人名称:[60                                                           ]',#CASH_NAME);
print(11,20,'汇 款  金 额:[21                    ]  ',#XTX_AMT);
print(12,20,'对方清算行号:[12           ]',#CASH_QS_NO);
print(13,20,'原收款人名称:[24                       ]',#PAY_AC_NO);
print(14,20,'原收款人名称: [60                                                           ]',#PAY_NAME);
print(15,20,'附       言: [60                                                           ]',#CONTENT);

print(24,20,'备注:');
print(24,27,'交易日期:[8] [8]',$HDATE,@txtime);
print(24,5,'柜员:[4]',$FD7);
print(24,5,'流水号:[6]',$FD4);
}"
</PRINT>
</RESPONSE>
</TRANSACTION>
  
